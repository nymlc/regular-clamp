{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/util.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/dom.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/config.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/const.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/render/client.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/env.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/helper/animate.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/index.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/parser/Parser.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/parser/node.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/render/shared.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/helper/parse.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/helper/combine.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/helper/cursor.js","webpack:///./node_modules/_process@0.11.10@process/browser.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/parser/Lexer.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/helper/diff.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/helper/diffTrack.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/group.js","webpack:///./node_modules/_timers-browserify@2.0.11@timers-browserify/main.js","webpack:///./node_modules/_setimmediate@1.0.5@setimmediate/setImmediate.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/helper/shim.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/helper/entities.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/parser/FSM.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/helper/extend.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/walkers.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/helper/event.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/helper/watcher.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/helper/filter.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/directive/base.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/directive/event.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/directive/form.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/directive/animation.js","webpack:///./node_modules/_regularjs@0.6.2@regularjs/lib/module/timeout.js","webpack:///./node_modules/_resize-detector@0.2.0@resize-detector/esm/index.js","webpack:///./src/components/Clamp.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_uid","_","entities","o2str","toString","win","window","global","noop","uid","extend","o1","o2","override","undefined","keys","obj","res","push","values","some","list","fn","len","length","varName","setName","ctxName","extName","rWord","rSimpleAccessor","nextTick","setImmediate","callback","setTimeout","prefix","slice","start","end","typeOf","String","toLowerCase","makePredicate","words","split","f","cats","out","j","compareTo","arr","sort","a","b","cat","Function","trackErrorPos","lb","minRange","maxRange","formatLine","str","column","row","target","min","max","postfix","leadingTabsToSpaces","Array","join","replace","match","input","pos","lastIndex","line","lines","tmpLen","lineLen","num","prev","next","findLine","ignoredRef","findSubCapture","regStr","left","right","ignored","letter","charAt","escapeRegExp","rEntity","RegExp","convertEntity","chr","all","hex","dec","capture","charCode","parseInt","fromCharCode","createObject","Temp","createProto","Foo","this","constructor","removeOne","filter","splice","clone","isArray","cloned","equals","now","old","isNaN","rAmp","rLt","rGt","rApos","rQuot","hChars","dash","camelCase","toUpperCase","throttle","func","wait","context","args","result","timeout","previous","later","Date","apply","remaining","arguments","clearTimeout","escape","test","cache","set","shift","handleEvent","type","evaluate","self","sender","$update","data","$event","$sender","preventDefault","unshift","$emit","once","time","fixObjStr","trim","indexOf","map","array","log","msg","console","normListener","events","eventListeners","pType","listener","isVoidTag","isBooleanAttr","isExpr","expr","isGroup","group","inject","$inject","blankReg","getCompileFn","source","ctx","options","passedOptions","$compile","fixTagAST","tagAST","Component","touched","attrs","directives","otherAttrMap","attr","priority","MAX_PRIORITY","directive","forEach","param","a1","a2","p1","p2","findItem","getParamObj","component","paramObj","$get","eventReg","toText","val","simpleDiff","nlen","addEvent","removeEvent","dom","env","consts","tNode","document","createElement","namespaces","NAMESPACE","body","doc","addEventListener","node","removeEventListener","attachEvent","detachEvent","msie","exec","navigator","userAgent","find","sl","querySelector","e","getElementById","refer","position","tmp","fragment","appendChild","firstChild","insertBefore","nextSibling","parentNode","id","svg","Error","createElementNS","createDocumentFragment","specialAttr","namespaceURI","html","className","setAttribute","htmlFor","style","cssText","ensureId","fixEventName","elem","tagName","attributes","getNamedItem","specified","defaultChecked","removeAttribute","getAttribute","ret","on","handler","types","real","ev","Event","origin","nodeId","_events","cacheKey","off","text","textProp","nodeType","innerHTML","replaced","replaceChild","remove","removeChild","css","currentStyle","addClass","current","delClass","hasClass","rMouseEvent","event","_fixed","srcElement","button","pageX","clientX","scrollLeft","pageY","clientY","scrollTop","related","relatedTarget","wheelDelta","detail","which","keyCode","compatMode","documentElement","stop","stopPropagation","returnValue","cancelBubble","stopImmediatePropagation","nextFrame","request","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","cancel","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","webkitCancelRequestAnimationFrame","tid","nextReflow","offsetWidth","101","stable","init","force","sync","Lexer","Parser","config","shared","combine","browser","walkers","Group","Watcher","parse","ERROR","nodeCursor","NOOP","Regular","definition","prevRunning","isRunning","template","cursor","mountNode","dtemplate","tryGetSelector","initDefinition","$parent","_append","_children","$refs","$root","newExtra","extra","oldModify","$$modify","_body","modifyBodyComponent","comp","ast","$body","outer","namespace","record","cplOpt","$ready","devtools","emit","__REGULAR_DEVTOOLS_GLOBAL_HOOK__","tpl","_directives","__regexp__","_plugins","_protoInheritCache","__after__","supr","PRECOMPILE","computed","handleComputed","_inheritConfig","cfg","k","link","regexp","plugin","plugins","use","needGenLexer","setup","expression","_addProtoInheritCache","transform","defs","mixTo","implement","destroy","_watchers","_watchersForStable","_handles","parent","index","$phase","records","preExt","__ext__","_record","_walk","_release","ondestroy","$unwatch","$bind","expr1","expr2","_bind","$unbind","$mute","isMute","needupdate","_mute","wid1","$watch","$on","wid2","code","UNMATCHED_AST","createTextNode","_handleEvent","fire","_touchExpr","ext","rawget","setbody","filters","_f_","constant","_sg_","path","defaults","computedProperty","_ss_","op","implementation","hasFeature","exprCache","process","animate","transitionEnd","animationEnd","transitionProperty","animationProperty","appName","removeDone","getMaxTimeout","styles","tDuration","tDelay","aDuration","aDelay","getComputedStyle","getMaxTime","Math","maxTimeout","parseFloat","direction","count","enterCallback","onenter","loop","onleave","startClassAnimate","activeClassName","onceAnim","startStyleAnimate","util","BEGIN","END","stringify","JSON","Cursor","isServer","isRegular","Comp","g","isPath","isKeyWord","isInvalidTag","isLastBind","opts","tokens","lex","program","ll","error","la","eat","isAttr","statements","statement","rRN","getset","xml","interplation","children","selfClosed","element","xentity","modifier","attvalue","attribute","isAttribute","mdf","inc","include","content","tag","close","consequent","alternate","container","variable","track","sequence","depend","buffer","setBuffer","assign","filterName","condition","or","and","equal","relation","additive","multive","range","unary","member","base","last","pathes","prevBase","onlySimpleAccessor","primary","tmpName","paren","quota","item","wrapGet","wrapSet","handle","pair","parsedComputed","beforeConfig","hasInstanceComputed","usePrototyeString","listeners","_eventListeners","concat","prepareAttr","parsed","nps","simple","nodes","len1","preParent","newParent","first","elements","NodeCursor","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","run","marker","runClearTimeout","Item","title","argv","version","versions","addListener","removeListener","removeAllListeners","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","map1","map2","createFSM","conflictTag","macro","testSubCapure","wrapHander","markStart","markEnd","syntaxSets","state","enter","lo","genMap","rules","rule","sign","links","trunks","reg","retain","replaceFn","one","curIndex","TRUNK","leadingWhitespaces","mlen","token","syntax","marks","_process","marched","BODY_END","ENTER_JST","ENTER_TAG","TEXT","TAG_NAME","TAG_OPEN","TAG_CLOSE","TAG_PUNCHOR","TAG_ENTER_JST","TAG_UNQ_VALUE","TAG_STRING","TAG_SPACE","TAG_COMMENT","JST_OPEN","JST_BODY_OPEN","JST_CLOSE","JST_EXPR_OPEN","JST_IDENT","JST_SPACE","JST_LEAVE","JST_NUMBER","JST_PUNCHOR","JST_STRING","JST_COMMENT","ENTER_JST2","sets","leave","two","is","diffTrack","diffArray","arr2","arr1","diff","diffFn","matrix","array1","array2","equalFn","ld","edits","northWest","west","north","steps","step","add","removed","diffObject","keyOf","lastTrackInfo","nValues","lValues","dconst","DIFF","ADD_ALL","REMOVE_ALL","createStep","oldIndex","insert","substitute","getTrackInfo","untrack","trackMap","trackKey","newArr","oldArr","olen","isTrack","dirty","newTrack","oldTrack","newTrackMap","oldTrackMap","oldRemoved","oldUntracked","oldUntrackedLength","oldKey","jlen","slen","oldKeyMap","Timeout","clearFn","_id","_clearFn","scope","setInterval","clearInterval","unref","ref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","clearImmediate","registerImmediate","channel","messagePrefix","onGlobalMessage","nextHandle","tasksByHandle","currentlyRunningATask","attachTo","getPrototypeOf","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","MessageChannel","port1","port2","script","onreadystatechange","random","task","tstr","from","O","TypeError","kValue","preArgs","__bind__","__binding__","_stack","stack","pop","fnTest","isFn","hooks","propertyValue","proto","normedEvents","wrap","supro","merged","prop","what","OPTIONS","MSG","getListFromValue","extraObj","placeholder","createComment","indexName","keyName","removeRange","rlen","mayBeReuse","addRange","newList","rawNewValue","section","hasReusedSection","updateTarget","updateRange","sect","insertPlaceHolder","newValue","oldValue","isSimple","nType","oType","oldList","altGroup","updateSimple","child","updateTrack","updateLD","deep","compiled","INIT","ii","walkAttributes","bindings","fromElement","update","nvalue","FORCE","preValue","compiledSection","curOptions","FORCE_INIT","_handleMountText","astText","nodeText","newval","STABLE_INIT","Constructor","hasStopDirective","subMountNode","destroies","isolate","refDirective","eventName","etest","componentName","$outer","refDestroy","SYNC","ncomponent","refName","fallbackEvent","fix","API","desc","realFn","handles","calls","$off","$once","parseExpression","methods","isStable","tests","$expression","watcher","_records","prephase","_checkSingleWatch","watchers","$digest","_digest","stableDirty","mark","needRemoved","shouldRemove","tlast","tnow","trackDiff","$set","detect","rootParent","json","average","total","STABLE","DEEP_STABLE","isNotHtml","ovalue","compelete","preBool","bool","display","ssr","accept","COMPONENT_TYPE","ELEMENT_TYPE","cval","refs","nval","oval","root","_delegates","delegateEvent","delegate","delegates","matchParent","hasInput","modelHandlers","lazy","wc","isCompositing","that","CompositionEvent","getElementsByTagName","selectedIndex","checked","rSpace","WHEN_COMMAND","EVENT_COMMAND","processAnimate","seed","command","composites","seeds","reset","cb","done","pkey","createSeed","whenCallback","animationDestroy","animator","animation","evt","valid","TimeoutModule","$timeout","delay","$interval","interval","raf","caf","props","pseudo","getRenderInfo","contains","detached","rendered","__resize_mutation_handler__","handleMutation","__resize_listeners__","ResizeObserver","offsetHeight","ro","__resize_observer_triggered__","runCallbacks","__resize_observer__","observe","__resize_legacy_resize_handler__","styleText","styleSheet","createStyles","__resize_old_position__","__resize_last__","triggers","expand","expandChild","contract","__resize_triggers__","resetTriggers","handleScroll","width","height","initTriggers","__resize_rendered__","MutationObserver","mo","childList","characterData","subtree","__resize_mutation_observer__","__resize_raf__","updated","getUpdatedSize","scrollWidth","csw","scrollHeight","csh","eow","eoh","esw","esh","UPDATE_TRIGGERS","INIT_TRIGGERS","Clamp","offset","ellipsis","localExpanded","realLines","clampedText","isClamped","maxHeight","getText","maxLines","expanded","clampAt","mounted","cleanUp","initComp","nVal","getClientRects","autoresize","resizeCallback","clamp","unregisterResizeCallback","unobserve","disconnect","getLines","applyChange","isOverflow","search","$el","textContent","fill","moveEdge","to","stepToFit","floor","after","before","updateExpanded"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 35);\n","require('./helper/shim')();\n\n\n\nvar _  = module.exports;\nvar entities = require('./helper/entities');\nvar o2str = ({}).toString;\nvar win = typeof window !=='undefined'? window: global;\nvar MAX_PRIORITY = 9999;\nvar config = require('./config');\n\n\n_.noop = function(){};\n_.uid = (function(){\n  var _uid=0;\n  return function(){\n    return _uid++;\n  }\n})();\n\n_.extend = function( o1, o2, override ){\n  for(var i in o2) if (o2.hasOwnProperty(i)){\n    if( o1[i] === undefined || override === true ){\n      o1[i] = o2[i]\n    }\n  }\n  return o1;\n}\n\n\n_.keys = Object.keys? Object.keys: function(obj){\n  var res = [];\n  for(var i in obj) if(obj.hasOwnProperty(i)){\n    res.push(i);\n  }\n  return res;\n}\n\n_.values = Object.values? Object.values: function(obj){\n  var res = [];\n  for(var i in obj) if(obj.hasOwnProperty(i)){\n    res.push(obj[i]);\n  }\n  return res;\n}\n\n_.some = function(list, fn){\n  for(var i =0,len = list.length; i < len; i++){\n    if(fn(list[i])) return true\n  }\n}\n\n_.varName = 'd';\n_.setName = 'p_';\n_.ctxName = 'c';\n_.extName = 'e';\n\n_.rWord = /^[\\$\\w]+$/;\n_.rSimpleAccessor = /^[\\$\\w]+(\\.[\\$\\w]+)*$/;\n\n_.nextTick = typeof setImmediate === 'function'? \n  setImmediate.bind(win) : \n  function(callback) {\n    setTimeout(callback, 0) \n  }\n\n\n\n_.prefix = \"'use strict';var \" + _.varName + \"=\" + _.ctxName + \".data;\" +  _.extName  + \"=\" + _.extName + \"||'';\";\n\n\n_.slice = function(obj, start, end){\n  var res = [];\n  for(var i = start || 0, len = end || obj.length; i < len; i++){\n    res.push(obj[i])\n  }\n  return res;\n}\n\n// beacuse slice and toLowerCase is expensive. we handle undefined and null in another way\n_.typeOf = function (o) {\n  return o == null ? String(o) :o2str.call(o).slice(8, -1).toLowerCase();\n}\n\n\n\n\n_.makePredicate = function makePredicate(words, prefix) {\n    if (typeof words === \"string\") {\n        words = words.split(\" \");\n    }\n    var f = \"\",\n    cats = [];\n    out: for (var i = 0; i < words.length; ++i) {\n        for (var j = 0; j < cats.length; ++j){\n          if (cats[j][0].length === words[i].length) {\n              cats[j].push(words[i]);\n              continue out;\n          }\n        }\n        cats.push([words[i]]);\n    }\n    function compareTo(arr) {\n        if (arr.length === 1) return f += \"return str === '\" + arr[0] + \"';\";\n        f += \"switch(str){\";\n        for (var i = 0; i < arr.length; ++i){\n           f += \"case '\" + arr[i] + \"':\";\n        }\n        f += \"return true}return false;\";\n    }\n\n    // When there are more than three length categories, an outer\n    // switch first dispatches on the lengths, to save on comparisons.\n    if (cats.length > 3) {\n        cats.sort(function(a, b) {\n            return b.length - a.length;\n        });\n        f += \"switch(str.length){\";\n        for (var i = 0; i < cats.length; ++i) {\n            var cat = cats[i];\n            f += \"case \" + cat[0].length + \":\";\n            compareTo(cat);\n        }\n        f += \"}\";\n\n        // Otherwise, simply generate a flat `switch` statement.\n    } else {\n        compareTo(words);\n    }\n    return new Function(\"str\", f);\n}\n\n\n_.trackErrorPos = (function (){\n  // linebreak\n  var lb = /\\r\\n|[\\n\\r\\u2028\\u2029]/g;\n  var minRange = 50, maxRange = 20;\n  function findLine(lines, pos){\n    var tmpLen = 0;\n    for(var i = 0,len = lines.length; i < len; i++){\n      var lineLen = (lines[i] || \"\").length;\n\n      if(tmpLen + lineLen > pos) {\n        return {num: i, line: lines[i], start: pos - tmpLen , prev:lines[i-1], next: lines[i+1] };\n      }\n      // 1 is for the linebreak\n      tmpLen = tmpLen + lineLen + 1;\n    }\n  }\n  function formatLine(str, column, row, target){\n    var len = str.length;\n    var min = column - minRange;\n    if(min < 0) min = 0;\n    var max = column + maxRange;\n    if(max > len) max = len;\n\n    var remain = str.slice(min, max);\n    var prefix = \"[\" +(row+1) + \"] \" + (min > 0? \"..\" : \"\")\n    var postfix = max < len ? \"..\": \"\";\n    var res = prefix + leadingTabsToSpaces(remain) + postfix;\n    if(target) {\n      res += \"\\n\" + spaces(\n        leadingTabsToSpaces(str.slice(min,column)).length +\n        prefix.length\n      ) + \"^\";\n    }\n    return res;\n  }\n  function spaces(n) {\n    return new Array(n+1).join(\" \")\n  }\n  function leadingTabsToSpaces(str) {\n    return str.replace( /^\\t+/, function(match) {\n      return match.split('\\t').join('  ');\n    } )\n  }\n  return function(input, pos){\n    if( pos > input.length-1 ) pos = input.length-1;\n\n    lb.lastIndex = 0;\n    var lines = input.split(lb);\n    var line = findLine(lines,pos);\n    var start = line.start, num = line.num;\n\n    return (line.prev? formatLine(line.prev, start, num-1 ) + '\\n': '' ) + \n      formatLine(line.line, start, num, true) + '\\n' + \n      (line.next? formatLine(line.next, start, num+1 ) + '\\n': '' );\n\n  }\n})();\n\n\nvar ignoredRef = /\\((\\?\\!|\\?\\:|\\?\\=)/g;\n_.findSubCapture = function (regStr) {\n  var left = 0,\n    right = 0,\n    len = regStr.length,\n    ignored = regStr.match(ignoredRef); // ignored uncapture\n  if(ignored) ignored = ignored.length\n  else ignored = 0;\n  for (; len--;) {\n    var letter = regStr.charAt(len);\n    if (len === 0 || regStr.charAt(len - 1) !== \"\\\\\" ) { \n      if (letter === \"(\") left++;\n      if (letter === \")\") right++;\n    }\n  }\n  if (left !== right) throw \"RegExp: \"+ regStr + \"'s bracket is not marched\";\n  else return left - ignored;\n};\n\n\n_.escapeRegExp = function( str){// Credit: XRegExp 0.6.1 (c) 2007-2008 Steven Levithan <http://stevenlevithan.com/regex/xregexp/> MIT License\n  return str.replace(/[-[\\]{}()*+?.\\\\^$|,#\\s]/g, function(match){\n    return '\\\\' + match;\n  });\n};\n\n\nvar rEntity = new RegExp(\"&(?:(#x[0-9a-fA-F]+)|(#[0-9]+)|(\" + _.keys(entities).join('|') + '));', 'gi');\n\n_.convertEntity = function(chr){\n\n  return (\"\" + chr).replace(rEntity, function(all, hex, dec, capture){\n    var charCode;\n    if( dec ) charCode = parseInt( dec.slice(1), 10 );\n    else if( hex ) charCode = parseInt( hex.slice(2), 16 );\n    else charCode = entities[capture]\n\n    return String.fromCharCode( charCode )\n  });\n\n}\n\n\n// simple get accessor\n\n_.createObject = Object.create? function(o){\n  return Object.create(o || null)\n}: (function(){\n    function Temp() {}\n    return function(o){\n      if(!o) return {}\n      Temp.prototype = o;\n      var obj = new Temp();\n      Temp.prototype = null; //  O a stray reference...\n      return obj\n    }\n})();\n\n_.createProto = function(fn, o){\n    function Foo() { this.constructor = fn;}\n    Foo.prototype = o;\n    return (fn.prototype = new Foo());\n}\n\n\n_.removeOne = function(list , filter){\n  var len = list.length;\n  for(;len--;){\n    if(filter(list[len])) {\n      list.splice(len, 1)\n      return;\n    }\n  }\n}\n\n\n/**\nclone\n*/\n_.clone = function clone(obj){\n  if(!obj || (typeof obj !== 'object' )) return obj;\n  if(Array.isArray(obj)){\n    var cloned = [];\n    for(var i=0,len = obj.length; i< len;i++){\n      cloned[i] = obj[i]\n    }\n    return cloned;\n  }else{\n    var cloned = {};\n    for(var i in obj) if(obj.hasOwnProperty(i)){\n      cloned[i] = obj[i];\n    }\n    return cloned;\n  }\n}\n\n_.equals = function(now, old){\n  var type = typeof now;\n  if(type === 'number' && typeof old === 'number'&& isNaN(now) && isNaN(old)) return true\n  return now === old;\n}\n\nvar dash = /-([a-z])/g;\n_.camelCase = function(str){\n  return str.replace(dash, function(all, capture){\n    return capture.toUpperCase();\n  })\n}\n\n\n\n_.throttle = function throttle(func, wait){\n  var wait = wait || 100;\n  var context, args, result;\n  var timeout = null;\n  var previous = 0;\n  var later = function() {\n    previous = +new Date;\n    timeout = null;\n    result = func.apply(context, args);\n    context = args = null;\n  };\n  return function() {\n    var now = + new Date;\n    var remaining = wait - (now - previous);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      clearTimeout(timeout);\n      timeout = null;\n      previous = now;\n      result = func.apply(context, args);\n      context = args = null;\n    } else if (!timeout) {\n      timeout = setTimeout(later, remaining);\n    }\n    return result;\n  };\n};\n\n// hogan escape\n// ==============\n_.escape = (function(){\n  var rAmp = /&/g,\n      rLt = /</g,\n      rGt = />/g,\n      rApos = /\\'/g,\n      rQuot = /\\\"/g,\n      hChars = /[&<>\\\"\\']/;\n\n  return function(str) {\n    return hChars.test(str) ?\n      str\n        .replace(rAmp, '&amp;')\n        .replace(rLt, '&lt;')\n        .replace(rGt, '&gt;')\n        .replace(rApos, '&#39;')\n        .replace(rQuot, '&quot;') :\n      str;\n  }\n})();\n\n_.cache = function(max){\n  max = max || 1000;\n  var keys = [],\n      cache = {};\n  return {\n    set: function(key, value) {\n      if (keys.length > this.max) {\n        cache[keys.shift()] = undefined;\n      }\n      // \n      if(cache[key] === undefined){\n        keys.push(key);\n      }\n      cache[key] = value;\n      return value;\n    },\n    get: function(key) {\n      if (key === undefined) return cache;\n      return cache[key];\n    },\n    max: max,\n    len:function(){\n      return keys.length;\n    }\n  };\n}\n\n// // setup the raw Expression\n\n\n// handle the same logic on component's `on-*` and element's `on-*`\n// return the fire object\n_.handleEvent = function(value, type ){\n  var self = this, evaluate;\n  if(value.type === 'expression'){ // if is expression, go evaluated way\n    evaluate = value.get;\n  }\n  if(evaluate){\n    return function fire(obj){\n      var sender = this;\n\n      self.$update(function(){\n        var data = this.data;\n        data.$event = obj;\n        data.$sender = sender;\n        var res = evaluate(self);\n        if(res === false && obj && obj.preventDefault) obj.preventDefault();\n        data.$event = undefined;\n        data.$sender = undefined;\n      })\n\n    }\n  }else{\n    return function fire(){\n      var args = _.slice(arguments);\n      args.unshift(value);\n      self.$update(function(){\n        self.$emit.apply(self, args);\n      })\n    }\n  }\n}\n\n// only call once\n_.once = function(fn){\n  var time = 0;\n  return function(){\n    if( time++ === 0) fn.apply(this, arguments);\n  }\n}\n\n_.fixObjStr = function(str){\n  if(str.trim().indexOf('{') !== 0){\n    return '{' + str + '}';\n  }\n  return str;\n}\n\n\n_.map= function(array, callback){\n  var res = [];\n  for (var i = 0, len = array.length; i < len; i++) {\n    res.push(callback(array[i], i));\n  }\n  return res;\n}\n\nfunction log(msg, type){\n  if(typeof console !== \"undefined\")  console[type || \"log\"](msg);\n}\n\n_.log = log;\n\n\n_.normListener = function( events  ){\n    var eventListeners = [];\n    var pType = _.typeOf( events );\n    if( pType === 'array' ){\n      return events;\n    }else if ( pType === 'object' ){\n      for( var i in events ) if ( events.hasOwnProperty(i) ){\n        eventListeners.push({\n          type: i,\n          listener: events[i]\n        })\n      }\n    }\n    return eventListeners;\n}\n\n\n//http://www.w3.org/html/wg/drafts/html/master/single-page.html#void-elements\n_.isVoidTag = _.makePredicate(\"area base br col embed hr img input keygen link menuitem meta param source track wbr r-content\");\n_.isBooleanAttr = _.makePredicate('selected checked disabled readonly required open autofocus controls autoplay compact loop defer multiple');\n\n\n_.isExpr = function(expr){\n  return expr && expr.type === 'expression';\n}\n// @TODO: make it more strict\n_.isGroup = function(group){\n  return group.inject || group.$inject;\n}\n\n_.blankReg = /^\\s*$/; \n\n_.getCompileFn = function(source, ctx, options){\n  return function( passedOptions ){\n    if( passedOptions && options ) _.extend( passedOptions , options );\n    else passedOptions = options;\n    return ctx.$compile(source, passedOptions )\n  }\n  return ctx.$compile.bind(ctx,source, options)\n}\n\n// remove directive param from AST\n_.fixTagAST = function( tagAST, Component ){\n\n  if( tagAST.touched ) return;\n\n  var attrs = tagAST.attrs;\n\n  if( !attrs ) return;\n\n  // Maybe multiple directive need same param, \n  // We place all param in totalParamMap\n  var len = attrs.length;\n  if(!len) return;\n  var directives=[], otherAttrMap = {};\n  for(;len--;){\n\n    var attr = attrs[ len ];\n\n\n    // @IE fix IE9- input type can't assign after value\n    if(attr.name === 'type') attr.priority = MAX_PRIORITY + 1;\n\n    var directive = Component.directive( attr.name );\n    if( directive ) {\n\n      attr.priority = directive.priority || 1;\n      attr.directive = true;\n      directives.push(attr);\n\n    }else if(attr.type === 'attribute'){\n      otherAttrMap[attr.name] = attr.value;\n    }\n  }\n\n  directives.forEach( function( attr ){\n    var directive = Component.directive(attr.name);\n    var param = directive.param;\n    if(param && param.length){\n      attr.param = {};\n      param.forEach(function( name ){\n        if( name in otherAttrMap ){\n          attr.param[name] = otherAttrMap[name] === undefined? true: otherAttrMap[name]\n          _.removeOne(attrs, function(attr){\n            return attr.name === name\n          })\n        }\n      })\n    }\n  });\n\n  attrs.sort(function(a1, a2){\n    \n    var p1 = a1.priority;\n    var p2 = a2.priority;\n\n    if( p1 == null ) p1 = MAX_PRIORITY;\n    if( p2 == null ) p2 = MAX_PRIORITY;\n\n    return p2 - p1;\n\n  })\n\n  tagAST.touched = true;\n}\n\n_.findItem = function(list, filter){\n  if(!list || !list.length) return;\n  var len = list.length;\n  while(len--){\n    if(filter(list[len])) return list[len]\n  }\n}\n\n_.getParamObj = function(component, param){\n  var paramObj = {};\n  if(param) {\n    for(var i in param) if(param.hasOwnProperty(i)){\n      var value = param[i];\n      paramObj[i] =  value && value.type==='expression'? component.$get(value): value;\n    }\n  }\n  return paramObj;\n}\n_.eventReg = /^on-(\\w[-\\w]*)$/;\n\n_.toText = function(obj){\n  return obj == null ? \"\": \"\" + obj;\n}\n\n\n// hogan\n// https://github.com/twitter/hogan.js\n// MIT\n_.escape = (function(){\n  var rAmp = /&/g,\n      rLt = /</g,\n      rGt = />/g,\n      rApos = /\\'/g,\n      rQuot = /\\\"/g,\n      hChars = /[&<>\\\"\\']/;\n\n  function ignoreNullVal(val) {\n    return String((val === undefined || val == null) ? '' : val);\n  }\n\n  return function (str) {\n    str = ignoreNullVal(str);\n    return hChars.test(str) ?\n      str\n        .replace(rAmp, '&amp;')\n        .replace(rLt, '&lt;')\n        .replace(rGt, '&gt;')\n        .replace(rApos, '&#39;')\n        .replace(rQuot, '&quot;') :\n      str;\n  }\n\n})();\n\n_.simpleDiff = function (now, old){\n  var nlen = now.length;\n  var olen = old.length;\n  if(nlen !== olen){\n    return true;\n  }\n  for(var i = 0; i < nlen ; i++){\n    if(now[i] !== old[i]) return  true;\n  }\n  return false\n\n}\n","/*jshint -W082 */ \n\n// thanks for angular && mootools for some concise&cross-platform  implemention\n// =====================================\n\n// The MIT License\n// Copyright (c) 2010-2014 Google, Inc. http://angularjs.org\n\n// ---\n// license: MIT-style license. http://mootools.net\n\n\nif(typeof window !== 'undefined'){\n  \nvar dom = module.exports;\nvar env = require(\"./env\");\nvar _ = require(\"./util\");\nvar consts = require('./const');\nvar tNode = document.createElement('div')\nvar addEvent, removeEvent;\nvar noop = function(){}\n\nvar namespaces = consts.NAMESPACE;\n\ndom.body = document.body;\ndom.doc = document;\ndom.tNode = tNode;\n\n\n// camelCase\nvar camelCase = function (str){\n  return (\"\" + str).replace(/-\\D/g, function(match){\n    return match.charAt(1).toUpperCase();\n  });\n}\n\n\n\nif(tNode.addEventListener){\n  addEvent = function(node, type, fn) {\n    node.addEventListener(type, fn, false);\n  }\n  removeEvent = function(node, type, fn) {\n    node.removeEventListener(type, fn, false) \n  }\n}else{\n  addEvent = function(node, type, fn) {\n    node.attachEvent('on' + type, fn);\n  }\n  removeEvent = function(node, type, fn) {\n    node.detachEvent('on' + type, fn); \n  }\n}\n\n\ndom.msie = parseInt((/msie (\\d+)/.exec(navigator.userAgent.toLowerCase()) || [])[1]);\nif (isNaN(dom.msie)) {\n  dom.msie = parseInt((/trident\\/.*; rv:(\\d+)/.exec(navigator.userAgent.toLowerCase()) || [])[1]);\n}\n\ndom.find = function(sl){\n  if(document.querySelector) {\n    try{\n      return document.querySelector(sl);\n    }catch(e){\n\n    }\n  }\n  if(sl.indexOf('#')!==-1) return document.getElementById( sl.slice(1) );\n}\n\n\ndom.inject = function(node, refer, position){\n\n  position = position || 'bottom';\n  if(!node) return ;\n  if(Array.isArray(node)){\n    var tmp = node;\n    node = dom.fragment();\n    for(var i = 0,len = tmp.length; i < len ;i++){\n      node.appendChild(tmp[i])\n    }\n  }\n\n  var firstChild, next;\n  switch(position){\n    case 'bottom':\n      refer.appendChild( node );\n      break;\n    case 'top':\n      if( firstChild = refer.firstChild ){\n        refer.insertBefore( node, refer.firstChild );\n      }else{\n        refer.appendChild( node );\n      }\n      break;\n    case 'after':\n      if( next = refer.nextSibling ){\n        next.parentNode.insertBefore( node, next );\n      }else{\n        refer.parentNode.appendChild( node );\n      }\n      break;\n    case 'before':\n      refer.parentNode.insertBefore( node, refer );\n  }\n}\n\n\ndom.id = function(id){\n  return document.getElementById(id);\n}\n\n// createElement \ndom.create = function(type, ns){\n  if(ns === 'svg'){\n    if(!env.svg) throw Error('the env need svg support')\n    ns = namespaces.svg;\n  }\n  return !ns? document.createElement(type): document.createElementNS(ns, type);\n}\n\n// documentFragment\ndom.fragment = function(){\n  return document.createDocumentFragment();\n}\n\n\n\n\nvar specialAttr = {\n  'class': function(node, value){\n     ('className' in node && (!node.namespaceURI || node.namespaceURI === namespaces.html  )) ? \n      node.className = (value || '') : node.setAttribute('class', value);\n  },\n  'for': function(node, value){\n    ('htmlFor' in node) ? node.htmlFor = value : node.setAttribute('for', value);\n  },\n  'style': function(node, value){\n    (node.style) ? node.style.cssText = value : node.setAttribute('style', value);\n  },\n  'value': function(node, value){\n    node.value = (value != null) ? value : '';\n  }\n}\n\n\n// attribute Setter & Getter\ndom.attr = function(node, name, value){\n  if (_.isBooleanAttr(name)) {\n    if (typeof value !== 'undefined') {\n      if (!!value) {\n        node[name] = true;\n        node.setAttribute(name, name);\n        // lt ie7 . the javascript checked setting is in valid\n        //http://bytes.com/topic/javascript/insights/799167-browser-quirk-dynamically-appended-checked-checkbox-does-not-appear-checked-ie\n        if(dom.msie && dom.msie <=7 && name === 'checked' ) node.defaultChecked = true\n      } else {\n        node[name] = false;\n        node.removeAttribute(name);\n      }\n    } else {\n      return (node[name] ||\n               (node.attributes.getNamedItem(name)|| noop).specified) ? name : undefined;\n    }\n  } else if (typeof (value) !== 'undefined') {\n    // if in specialAttr;\n    if(specialAttr[name]) specialAttr[name](node, value);\n    else if(value === null) node.removeAttribute(name)\n    else node.setAttribute(name, value);\n  } else if (node.getAttribute) {\n    // the extra argument \"2\" is to get the right thing for a.href in IE, see jQuery code\n    // some elements (e.g. Document) don't have get attribute, so return undefined\n    var ret = node.getAttribute(name, 2);\n    // normalize non-existing attributes to undefined (as jQuery)\n    return ret === null ? undefined : ret;\n  }\n}\n\n// return node[key], if none exists, attach one with unique value\nfunction ensureId(node, key) {\n  return typeof node[key] !== 'undefined' ?\n    node[key] :\n    (node[key] = _.uid());\n}\n\ndom.on = function(node, type, handler){\n  var types = type.split(' ');\n  var real = function(ev){\n    var $event = new Event(ev);\n    $event.origin = node;\n    handler.call(node, $event);\n  }\n  \n  var nodeId = ensureId(node, '_nid');\n\n  handler._events = handler._events || {};\n\n  types.forEach(function(type){\n    type = fixEventName(node, type);\n    var cacheKey = nodeId + '-' + type;\n\n    if(!handler._events[cacheKey]) {\n      handler._events[cacheKey] = real;\n    }\n\n    addEvent(node, type, handler._events[cacheKey]);\n  });\n  return dom;\n}\ndom.off = function(node, type, handler){\n  var types = type.split(' ');\n  if(!handler || !handler._events) return;\n  var nodeId = ensureId(node, '_nid');\n\n  types.forEach(function(type){\n    type = fixEventName(node, type);\n    var cacheKey = nodeId + '-' + type;\n    var real = handler._events[cacheKey] || handler;\n    removeEvent(node, type, real);\n  })\n}\n\n\ndom.text = (function (){\n  var map = {};\n  if (dom.msie && dom.msie < 9) {\n    map[1] = 'innerText';    \n    map[3] = 'nodeValue';    \n  } else {\n    map[1] = map[3] = 'textContent';\n  }\n  \n  return function (node, value) {\n    var textProp = map[node.nodeType];\n    if (value == null) {\n      return textProp ? node[textProp] : '';\n    }\n    node[textProp] = value;\n  }\n})();\n\n\ndom.html = function( node, html ){\n  if(typeof html === \"undefined\"){\n    return node.innerHTML;\n  }else{\n    node.innerHTML = html;\n  }\n}\n\ndom.replace = function(node, replaced){\n  if(replaced.parentNode) replaced.parentNode.replaceChild(node, replaced);\n}\n\ndom.remove = function(node){\n  if(node.parentNode) node.parentNode.removeChild(node);\n}\n\n// css Settle & Getter from angular\n// =================================\n// it isnt computed style \ndom.css = function(node, name, value){\n  if( typeof (name) === \"object\" && name ){\n    for(var i in name){\n      if( name.hasOwnProperty(i) ){\n        dom.css( node, i, name[i] );\n      }\n    }\n    return;\n  }\n  if ( typeof value !== \"undefined\" ) {\n\n    name = camelCase(name);\n    if(name) node.style[name] = value;\n\n  } else {\n\n    var val;\n    if (dom.msie <= 8) {\n      // this is some IE specific weirdness that jQuery 1.6.4 does not sure why\n      val = node.currentStyle && node.currentStyle[name];\n      if (val === '') val = 'auto';\n    }\n    val = val || node.style[name];\n    if (dom.msie <= 8) {\n      val = val === '' ? undefined : val;\n    }\n    return  val;\n  }\n}\n\ndom.addClass = function(node, className){\n  var current = node.className || \"\";\n  if ((\" \" + current + \" \").indexOf(\" \" + className + \" \") === -1) {\n    node.className = current? ( current + \" \" + className ) : className;\n  }\n}\n\ndom.delClass = function(node, className){\n  var current = node.className || \"\";\n  node.className = (\" \" + current + \" \").replace(\" \" + className + \" \", \" \").trim();\n}\n\ndom.hasClass = function(node, className){\n  var current = node.className || \"\";\n  return (\" \" + current + \" \").indexOf(\" \" + className + \" \") !== -1;\n}\n\n\n\n// simple Event wrap\n\n//http://stackoverflow.com/questions/11068196/ie8-ie7-onchange-event-is-emited-only-after-repeated-selection\nfunction fixEventName(elem, name){\n  return (name === 'change'  &&  dom.msie < 9 && \n      (elem && elem.tagName && elem.tagName.toLowerCase()==='input' && \n        (elem.type === 'checkbox' || elem.type === 'radio')\n      )\n    )? 'click': name;\n}\n\nvar rMouseEvent = /^(?:click|dblclick|contextmenu|DOMMouseScroll|mouse(?:\\w+))$/\nvar doc = document;\ndoc = (!doc.compatMode || doc.compatMode === 'CSS1Compat') ? doc.documentElement : doc.body;\nfunction Event(ev){\n  ev = ev || window.event;\n  if(ev._fixed) return ev;\n  this.event = ev;\n  this.target = ev.target || ev.srcElement;\n\n  var type = this.type = ev.type;\n  var button = this.button = ev.button;\n\n  // if is mouse event patch pageX\n  if(rMouseEvent.test(type)){ //fix pageX\n    this.pageX = (ev.pageX != null) ? ev.pageX : ev.clientX + doc.scrollLeft;\n    this.pageY = (ev.pageX != null) ? ev.pageY : ev.clientY + doc.scrollTop;\n    if (type === 'mouseover' || type === 'mouseout'){// fix relatedTarget\n      var related = ev.relatedTarget || ev[(type === 'mouseover' ? 'from' : 'to') + 'Element'];\n      while (related && related.nodeType === 3) related = related.parentNode;\n      this.relatedTarget = related;\n    }\n  }\n  // if is mousescroll\n  if (type === 'DOMMouseScroll' || type === 'mousewheel'){\n    // ff ev.detail: 3    other ev.wheelDelta: -120\n    this.wheelDelta = (ev.wheelDelta) ? ev.wheelDelta / 120 : -(ev.detail || 0) / 3;\n  }\n  \n  // fix which\n  this.which = ev.which || ev.keyCode;\n  if( !this.which && button !== undefined){\n    // http://api.jquery.com/event.which/ use which\n    this.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );\n  }\n  this._fixed = true;\n}\n\n_.extend(Event.prototype, {\n  stop: function(){\n    this.preventDefault().stopPropagation();\n  },\n  preventDefault: function(){\n    if (this.event.preventDefault) this.event.preventDefault();\n    else this.event.returnValue = false;\n    return this;\n  },\n  stopPropagation: function(){\n    if (this.event.stopPropagation) this.event.stopPropagation();\n    else this.event.cancelBubble = true;\n    return this;\n  },\n  stopImmediatePropagation: function(){\n    if(this.event.stopImmediatePropagation) this.event.stopImmediatePropagation();\n  }\n})\n\n\ndom.nextFrame = (function(){\n    var request = window.requestAnimationFrame ||\n                  window.webkitRequestAnimationFrame ||\n                  window.mozRequestAnimationFrame|| \n                  function(callback){\n                    return setTimeout(callback, 16)\n                  }\n\n    var cancel = window.cancelAnimationFrame ||\n                 window.webkitCancelAnimationFrame ||\n                 window.mozCancelAnimationFrame ||\n                 window.webkitCancelRequestAnimationFrame ||\n                 function(tid){\n                    clearTimeout(tid)\n                 }\n  \n  return function(callback){\n    var id = request(callback);\n    return function(){ cancel(id); }\n  }\n})();\n\n// 3ks for angular's raf  service\nvar k\ndom.nextReflow = dom.msie? function(callback){\n  return dom.nextFrame(function(){\n    k = document.body.offsetWidth;\n    callback();\n  })\n}: dom.nextFrame;\n\n}\n","\nmodule.exports = {\n  'BEGIN': '{',\n  'END': '}',\n  'PRECOMPILE': false\n}","module.exports = {\n  'COMPONENT_TYPE': 1,\n  'ELEMENT_TYPE': 2,\n  'ERROR': {\n    'UNMATCHED_AST': 101\n  },\n  \"MSG\": {\n    101: \"Unmatched ast and mountNode, report issue at https://github.com/regularjs/regular/issues\"\n  },\n  'NAMESPACE': {\n    html: \"http://www.w3.org/1999/xhtml\",\n    svg: \"http://www.w3.org/2000/svg\"\n  },\n  'OPTIONS': {\n    'STABLE_INIT': { stable: !0, init: !0 },\n    'FORCE_INIT': { force: !0, init: !0 },\n    'STABLE': {stable: !0},\n    'INIT': { init: !0 },\n    'SYNC': { sync: !0 },\n    'FORCE': { force: !0 }\n  },\n  'DIFF': {\n    'REMOVE_ALL': 1,\n    'ADD_ALL': 0\n  }\n}\n","/**\n * render for component in browsers\n */\n\nvar env = require('../env');\nvar Lexer = require('../parser/Lexer');\nvar Parser = require('../parser/Parser');\nvar config = require('../config');\nvar _ = require('../util');\nvar extend = require('../helper/extend');\nvar shared = require('./shared');\nvar combine = {};\nif(env.browser){\n  var dom = require(\"../dom\");\n  var walkers = require('../walkers');\n  var Group = require('../group');\n  var doc = dom.doc;\n  combine = require('../helper/combine');\n}\nvar events = require('../helper/event');\nvar Watcher = require('../helper/watcher');\nvar parse = require('../helper/parse');\nvar filter = require('../helper/filter');\nvar ERROR = require('../const').ERROR;\nvar nodeCursor = require('../helper/cursor');\nvar shared = require('./shared');\nvar NOOP = function(){};\n\n\n/**\n* `Regular` is regularjs's NameSpace and BaseClass. Every Component is inherited from it\n* \n* @class Regular\n* @module Regular\n* @constructor\n* @param {Object} options specification of the component\n*/\nvar Regular = function(definition, options){\n  var prevRunning = env.isRunning;\n  env.isRunning = true;\n  var node, template, cursor, context = this, body, mountNode;\n  options = options || {};\n  definition = definition || {};\n\n\n\n  var dtemplate = definition.template;\n\n  if(env.browser) {\n\n    if( node = tryGetSelector( dtemplate ) ){\n      dtemplate = node;\n    }\n    if( dtemplate && dtemplate.nodeType ){\n      definition.template = dtemplate.innerHTML\n    }\n    \n    mountNode = definition.mountNode;\n    if(typeof mountNode === 'string'){\n      mountNode = dom.find( mountNode );\n      if(!mountNode) throw Error('mountNode ' + mountNode + ' is not found')\n    } \n\n    if(mountNode){\n      cursor = nodeCursor(mountNode.firstChild, mountNode)\n      delete definition.mountNode\n    }else{\n      cursor = options.cursor\n    }\n  }\n\n\n\n  template = shared.initDefinition(context, definition)\n  \n\n  if(context.$parent){\n     context.$parent._append(context);\n  }\n  context._children = [];\n  context.$refs = {};\n  context.$root = context.$root || context;\n\n  var extra = options.extra;\n  var oldModify = extra && extra.$$modify;\n\n  \n  var newExtra;\n  if( body = context._body ){\n    context._body = null\n    var modifyBodyComponent = context.modifyBodyComponent;\n    if( typeof modifyBodyComponent  === 'function'){\n      modifyBodyComponent = modifyBodyComponent.bind(this)\n      newExtra = _.createObject(extra);\n      newExtra.$$modify = function( comp ){\n        return modifyBodyComponent(comp, oldModify? oldModify: NOOP)\n      }\n    }else{ //@FIXIT: multiply modifier\n      newExtra = extra\n    }\n    if(body.ast && body.ast.length){\n      context.$body = _.getCompileFn(body.ast, body.ctx , {\n        outer: context,\n        namespace: options.namespace,\n        extra: newExtra,\n        record: true\n      })\n    }\n  }\n\n  // handle computed\n  if(template){\n    var cplOpt = {\n      namespace: options.namespace,\n      cursor: cursor\n    }\n    // if(extra && extra.$$modify){\n      cplOpt.extra = {$$modify : extra&& extra.$$modify}\n    // }\n    context.group = context.$compile(template, cplOpt);\n    combine.node(context);\n  }\n\n\n\n  // modifycompile SSR\n  \n  if( oldModify ){\n    oldModify(this);\n  }\n\n  // this is outest component\n  if( !context.$parent ) context.$update();\n  context.$ready = true;\n\n  context.$emit(\"$init\");\n  if( context.init ) context.init( context.data );\n  context.$emit(\"$afterInit\");\n\n  env.isRunning = prevRunning;\n\n  // children is not required;\n  \n  if (this.devtools) {\n    this.devtools.emit(\"init\", this)\n  }\n}\n\n// check if regular devtools hook exists\nif(typeof window !== 'undefined'){\n  var devtools = window.__REGULAR_DEVTOOLS_GLOBAL_HOOK__;\n  if (devtools) {\n    Regular.prototype.devtools = devtools;\n  }\n}\n\nwalkers && (walkers.Regular = Regular);\n\n\n// description\n// -------------------------\n// 1. Regular and derived Class use same filter\n_.extend(Regular, {\n  // private data stuff\n  _directives: { __regexp__:[] },\n  _plugins: {},\n  _protoInheritCache: [ 'directive', 'use'] ,\n  __after__: function(supr, o) {\n\n    var template;\n    this.__after__ = supr.__after__;\n\n    // use name make the component global.\n    if(o.name) Regular.component(o.name, this);\n    // this.prototype.template = dom.initTemplate(o)\n    if(template = o.template){\n      var node, name;\n      if( env.browser ){\n        if( node = tryGetSelector(template) ) template = node ;\n        if( template && template.nodeType ){\n\n          if(name = dom.attr(template, 'name')) Regular.component(name, this);\n\n          template = template.innerHTML;\n        } \n      }\n\n      if(typeof template === 'string' ){\n        this.prototype.template = config.PRECOMPILE? new Parser(template).parse(): template;\n      }\n    }\n\n    if(o.computed) this.prototype.computed = shared.handleComputed(o.computed);\n    // inherit directive and other config from supr\n    Regular._inheritConfig(this, supr);\n\n  },\n  /**\n   * Define a directive\n   *\n   * @method directive\n   * @return {Object} Copy of ...\n   */  \n  directive: function(name, cfg){\n    if(!name) return;\n\n    var type = typeof name;\n    if(type === 'object' && !cfg){\n      for(var k in name){\n        if(name.hasOwnProperty(k)) this.directive(k, name[k]);\n      }\n      return this;\n    }\n    var directives = this._directives, directive;\n    if(cfg == null){\n      if( type === 'string' ){\n        if( directive = directives[name] ) return directive;\n        else{\n          var regexp = directives.__regexp__;\n          for(var i = 0, len = regexp.length; i < len ; i++){\n            directive = regexp[i];\n            var test = directive.regexp.test(name);\n            if(test) return directive;\n          }\n        }\n      }\n    }else{\n      if( typeof cfg === 'function') cfg = { link: cfg } \n      if( type === 'string' ) directives[name] = cfg;\n      else{\n        cfg.regexp = name;\n        directives.__regexp__.push(cfg)\n      }\n      if(typeof cfg.link !== 'function') cfg.link = NOOP;\n      return this\n    }\n  },\n  plugin: function(name, fn){\n    var plugins = this._plugins;\n    if(fn == null) return plugins[name];\n    plugins[name] = fn;\n    return this;\n  },\n  use: function(fn){\n    if(typeof fn === \"string\") fn = Regular.plugin(fn);\n    if(typeof fn !== \"function\") return this;\n    fn(this, Regular);\n    return this;\n  },\n  // config the Regularjs's global\n  config: function(name, value){\n    var needGenLexer = false;\n    if(typeof name === \"object\"){\n      for(var i in name){\n        // if you config\n        if( i ===\"END\" || i==='BEGIN' )  needGenLexer = true;\n        config[i] = name[i];\n      }\n    }\n    if(needGenLexer) Lexer.setup();\n  },\n  expression: parse.expression,\n  Parser: Parser,\n  Lexer: Lexer,\n  _addProtoInheritCache: function(name, transform){\n    if( Array.isArray( name ) ){\n      return name.forEach(Regular._addProtoInheritCache);\n    }\n    var cacheKey = \"_\" + name + \"s\"\n    Regular._protoInheritCache.push(name)\n    Regular[cacheKey] = {};\n    if(Regular[name]) return;\n    Regular[name] = function(key, cfg){\n      var cache = this[cacheKey];\n\n      if(typeof key === \"object\"){\n        for(var i in key){\n          if(key.hasOwnProperty(i)) this[name](i, key[i]);\n        }\n        return this;\n      }\n      if(cfg == null) return cache[key];\n      cache[key] = transform? transform(cfg) : cfg;\n      return this;\n    }\n  },\n  _inheritConfig: function(self, supr){\n\n    // prototype inherit some Regular property\n    // so every Component will have own container to serve directive, filter etc..\n    var defs = Regular._protoInheritCache;\n    var keys = _.slice(defs);\n    keys.forEach(function(key){\n      self[key] = supr[key];\n      var cacheKey = '_' + key + 's';\n      if(supr[cacheKey]) self[cacheKey] = _.createObject(supr[cacheKey]);\n    })\n    return self;\n  }\n\n});\n\nextend(Regular);\n\nRegular._addProtoInheritCache(\"component\")\n\nRegular._addProtoInheritCache(\"filter\", function(cfg){\n  return typeof cfg === \"function\"? {get: cfg}: cfg;\n})\n\n\nevents.mixTo(Regular);\nWatcher.mixTo(Regular);\n\nRegular.implement({\n  init: function(){},\n  config: function(){},\n  destroy: function(){\n    // destroy event wont propgation;\n    this.$emit(\"$destroy\");\n    this._watchers = null;\n    this._watchersForStable = null;\n    this.group && this.group.destroy(true);\n    this.group = null;\n    this.parentNode = null;\n    this._children = null;\n    this.$root = null;\n    this._handles = null;\n    this.$refs = null;\n    var parent = this.$parent;\n    if(parent && parent._children){\n      var index = parent._children.indexOf(this);\n      parent._children.splice(index,1);\n    }\n    this.$parent = null;\n\n    if (this.devtools) {\n      this.devtools.emit(\"destroy\", this)\n    }\n    this._handles = null;\n    this.$phase = \"destroyed\";\n  },\n\n  /**\n   * compile a block ast ; return a group;\n   * @param  {Array} parsed ast\n   * @param  {[type]} record\n   * @return {[type]}\n   */\n  $compile: function(ast, options){\n    options = options || {};\n    if(typeof ast === 'string'){\n      ast = new Parser(ast).parse()\n    }\n    var preExt = this.__ext__,\n      record = options.record, \n      records;\n\n    if(options.extra) this.__ext__ = options.extra;\n\n\n    if(record) this._record();\n    var group = this._walk(ast, options);\n    if(record){\n      records = this._release();\n      var self = this;\n      if( records.length ){\n        // auto destroy all wather;\n        group.ondestroy = function(){ self.$unwatch(records); }\n      }\n    }\n    if(options.extra) this.__ext__ = preExt;\n    return group;\n  },\n\n\n  /**\n   * create two-way binding with another component;\n   * *warn*: \n   *   expr1 and expr2 must can operate set&get, for example: the 'a.b' or 'a[b + 1]' is set-able, but 'a.b + 1' is not, \n   *   beacuse Regular dont know how to inverse set through the expression;\n   *   \n   *   if before $bind, two component's state is not sync, the component(passed param) will sync with the called component;\n   *\n   * *example: *\n   *\n   * ```javascript\n   * // in this example, we need to link two pager component\n   * var pager = new Pager({}) // pager compoennt\n   * var pager2 = new Pager({}) // another pager component\n   * pager.$bind(pager2, 'current'); // two way bind throw two component\n   * pager.$bind(pager2, 'total');   // \n   * // or just\n   * pager.$bind(pager2, {\"current\": \"current\", \"total\": \"total\"}) \n   * ```\n   * \n   * @param  {Regular} component the\n   * @param  {String|Expression} expr1     required, self expr1 to operate binding\n   * @param  {String|Expression} expr2     optional, other component's expr to bind with, if not passed, the expr2 will use the expr1;\n   * @return          this;\n   */\n  $bind: function(component, expr1, expr2){\n    var type = _.typeOf(expr1);\n    if( expr1.type === 'expression' || type === 'string' ){\n      this._bind(component, expr1, expr2)\n    }else if( type === \"array\" ){ // multiply same path binding through array\n      for(var i = 0, len = expr1.length; i < len; i++){\n        this._bind(component, expr1[i]);\n      }\n    }else if(type === \"object\"){\n      for(var i in expr1) if(expr1.hasOwnProperty(i)){\n        this._bind(component, i, expr1[i]);\n      }\n    }\n    // digest\n    component.$update();\n    return this;\n  },\n  /**\n   * unbind one component( see $bind also)\n   *\n   * unbind will unbind all relation between two component\n   * \n   * @param  {Regular} component [descriptionegular\n   * @return {This}    this\n   */\n  $unbind: function(){\n    // todo\n  },\n  $inject: combine.inject,\n  $mute: function(isMute){\n\n    isMute = !!isMute;\n\n    var needupdate = isMute === false && this._mute;\n\n    this._mute = !!isMute;\n\n    if(needupdate) this.$update();\n    return this;\n  },\n  // private bind logic\n  _bind: function(component, expr1, expr2){\n\n    var self = this;\n    // basic binding\n\n    if(!component || !(component instanceof Regular)) throw \"$bind() should pass Regular component as first argument\";\n    if(!expr1) throw \"$bind() should  pass as least one expression to bind\";\n\n    if(!expr2) expr2 = expr1;\n\n    expr1 = parse.expression( expr1 );\n    expr2 = parse.expression( expr2 );\n\n    // set is need to operate setting ;\n    if(expr2.set){\n      var wid1 = this.$watch( expr1, function(value){\n        component.$update(expr2, value)\n      });\n      component.$on('$destroy', function(){\n        self.$unwatch(wid1)\n      })\n    }\n    if(expr1.set){\n      var wid2 = component.$watch(expr2, function(value){\n        self.$update(expr1, value)\n      });\n      // when brother destroy, we unlink this watcher\n      this.$on('$destroy', component.$unwatch.bind(component,wid2))\n    }\n    // sync the component's state to called's state\n    expr2.set(component, expr1.get(this));\n  },\n  _walk: function(ast, options){\n    if( Array.isArray(ast) ){\n      var res = [];\n\n      for(var i = 0, len = ast.length; i < len; i++){\n        var ret = this._walk(ast[i], options);\n        if(ret && ret.code === ERROR.UNMATCHED_AST){\n          ast.splice(i, 1);\n          i--;\n          len--;\n        }else res.push( ret );\n      }\n      return new Group(res);\n    }\n    if(typeof ast === 'string') return doc.createTextNode(ast)\n    return walkers[ast.type || \"default\"].call(this, ast, options);\n  },\n  _append: function(component){\n    this._children.push(component);\n    component.$parent = this;\n  },\n  _handleEvent: function(elem, type, value, attrs){\n    var Component = this.constructor,\n      fire = typeof value !== \"function\"? _.handleEvent.call( this, value, type ) : value,\n      handler = Component.event(type), destroy;\n\n    if ( handler ) {\n      destroy = handler.call(this, elem, fire, attrs);\n    } else {\n      dom.on(elem, type, fire);\n    }\n    return handler ? destroy : function() {\n      dom.off(elem, type, fire);\n    }\n  },\n  // 1. exprBody -> Function\n  // 2. list\n  _touchExpr: function(expr, ext){\n    var rawget, ext = this.__ext__, touched = {};\n    if(expr.type !== 'expression' || expr.touched) return expr;\n\n    rawget = expr.get;\n    if(!rawget){\n      rawget = expr.get = new Function(_.ctxName, _.extName , _.prefix+ \"return (\" + expr.body + \")\");\n      expr.body = null;\n    }\n    touched.get = !ext? rawget: function(context, e){\n      return rawget( context, e || ext )\n    }\n\n    if(expr.setbody && !expr.set){\n      var setbody = expr.setbody;\n      var filters = expr.filters;\n      var self = this;\n      if(!filters || !_.some(filters, function(filter){ return !self._f_(filter).set }) ){\n        expr.set = function(ctx, value, ext){\n          expr.set = new Function(_.ctxName, _.setName , _.extName, _.prefix + setbody);          \n          return expr.set(ctx, value, ext);\n        }\n      }\n      expr.filters = expr.setbody = null;\n    }\n    if(expr.set){\n      touched.set = !ext? expr.set : function(ctx, value){\n        return expr.set(ctx, value, ext);\n      }\n    }\n\n    touched.type = 'expression';\n    touched.touched = true;\n    touched.once = expr.once || expr.constant;\n    return touched\n  },\n  // find filter\n  _f_: function(name){\n    var Component = this.constructor;\n    var filter = Component.filter(name);\n    if(!filter) throw Error('filter ' + name + ' is undefined');\n    return filter;\n  },\n  // simple accessor get\n  // ext > parent > computed > defaults\n  _sg_:function(path, parent, defaults, ext){\n    if( path === undefined ) return undefined;\n\n    if(ext && typeof ext === 'object'){\n      if(ext[path] !== undefined)  return ext[path];\n    }\n    \n    // reject to get from computed, return undefined directly\n    // like { empty.prop }, empty equals undefined\n    // prop shouldn't get from computed\n    if(parent === null) {\n      return undefined\n    }\n\n    if(parent && typeof parent[path] !== 'undefined') {\n      return parent[path]\n    }\n\n    // without parent, get from computed\n    if (parent !== null) {\n      var computed = this.computed,\n        computedProperty = computed[path];\n      if(computedProperty){\n        if(computedProperty.type==='expression' && !computedProperty.get) this._touchExpr(computedProperty);\n        if(computedProperty.get)  return computedProperty.get(this);\n        else _.log(\"the computed '\" + path + \"' don't define the get function,  get data.\"+path + \" altnately\", \"warn\")\n      }\n    }\n\n    if( defaults === undefined  ){\n      return undefined;\n    }\n    return defaults[path];\n\n  },\n  // simple accessor set\n  _ss_:function(path, value, data , op, computed){\n    var computed = this.computed,\n      op = op || \"=\", prev, \n      computedProperty = computed? computed[path]:null;\n\n    if(op !== '='){\n      prev = computedProperty? computedProperty.get(this): data[path];\n      switch(op){\n        case \"+=\":\n          value = prev + value;\n          break;\n        case \"-=\":\n          value = prev - value;\n          break;\n        case \"*=\":\n          value = prev * value;\n          break;\n        case \"/=\":\n          value = prev / value;\n          break;\n        case \"%=\":\n          value = prev % value;\n          break;\n      }\n    }\n    if(computedProperty) {\n      if(computedProperty.set) return computedProperty.set(this, value);\n    }\n    data[path] = value;\n    return value;\n  }\n});\n\nRegular.prototype.inject = function(){\n  _.log(\"use $inject instead of inject\", \"warn\");\n  return this.$inject.apply(this, arguments);\n}\n\n\n// only one builtin filter\n\nRegular.filter(filter);\n\nmodule.exports = Regular;\n\n\n\nfunction tryGetSelector(tpl){\n  var node;\n  if( typeof tpl === 'string' && tpl.length < 16 && (node = dom.find( tpl )) ) {\n    _.log(\"pass selector as template has be deprecated, pass node or template string instead\", 'warn')\n    return node\n  }\n}\n","// some fixture test;\n// ---------------\nvar _ = require('./util');\nexports.svg = (function(){\n  return typeof document !== \"undefined\" && document.implementation.hasFeature( \"http://www.w3.org/TR/SVG11/feature#BasicStructure\", \"1.1\" );\n})();\n\n\nexports.browser = typeof document !== \"undefined\" && document.nodeType;\n// whether have component in initializing\nexports.exprCache = _.cache(1000);\nexports.node = typeof process !== \"undefined\" && ( '' + process ) === '[object process]';\nexports.isRunning = false;\n","var _ = require(\"../util\");\nvar dom  = require(\"../dom\");\nvar animate = {};\nvar env = require(\"../env\");\n\n\nif(typeof window !== 'undefined'){\nvar \n  transitionEnd = 'transitionend', \n  animationEnd = 'animationend', \n  transitionProperty = 'transition', \n  animationProperty = 'animation';\n\nif(!('ontransitionend' in window)){\n  if('onwebkittransitionend' in window) {\n    \n    // Chrome/Saf (+ Mobile Saf)/Android\n    transitionEnd += ' webkitTransitionEnd';\n    transitionProperty = 'webkitTransition'\n  } else if('onotransitionend' in dom.tNode || navigator.appName === 'Opera') {\n\n    // Opera\n    transitionEnd += ' oTransitionEnd';\n    transitionProperty = 'oTransition';\n  }\n}\nif(!('onanimationend' in window)){\n  if ('onwebkitanimationend' in window){\n    // Chrome/Saf (+ Mobile Saf)/Android\n    animationEnd += ' webkitAnimationEnd';\n    animationProperty = 'webkitAnimation';\n\n  }else if ('onoanimationend' in dom.tNode){\n    // Opera\n    animationEnd += ' oAnimationEnd';\n    animationProperty = 'oAnimation';\n  }\n}\n}\n\n/**\n * inject node with animation\n * @param  {[type]} node      [description]\n * @param  {[type]} refer     [description]\n * @param  {[type]} direction [description]\n * @return {[type]}           [description]\n */\nanimate.inject = function( node, refer ,direction, callback ){\n  callback = callback || _.noop;\n  if( Array.isArray(node) ){\n    var fragment = dom.fragment();\n    var count=0;\n\n    for(var i = 0,len = node.length;i < len; i++ ){\n      fragment.appendChild(node[i]); \n    }\n    dom.inject(fragment, refer, direction);\n\n    // if all nodes is done, we call the callback\n    var enterCallback = function (){\n      count++;\n      if( count === len ) callback();\n    }\n    if(len === count) callback();\n    for( i = 0; i < len; i++ ){\n      if(node[i].onenter){\n        node[i].onenter(enterCallback);\n      }else{\n        enterCallback();\n      }\n    }\n  }else{\n    if(!node) return;\n    dom.inject( node, refer, direction );\n    if(node.onenter){\n      node.onenter(callback)\n    }else{\n      callback();\n    }\n  }\n}\n\n/**\n * remove node with animation\n * @param  {[type]}   node     [description]\n * @param  {Function} callback [description]\n * @return {[type]}            [description]\n */\n\nanimate.remove = function(node, callback){\n  if(!node) return;\n  var count = 0;\n  function loop(){\n    count++;\n    if(count === len) callback && callback()\n  }\n  if( Array.isArray(node) ){\n    for(var i = 0, len = node.length; i < len ; i++){\n      animate.remove(node[i], loop)\n    }\n    return;\n  }\n  if(typeof node.onleave ==='function'){\n    node.onleave(function(){\n      removeDone(node, callback)\n    })\n  }else{\n    removeDone(node, callback)\n  }\n}\n\nfunction removeDone(node, callback){\n    dom.remove(node);\n    callback && callback();\n}\n\n\n\nanimate.startClassAnimate = function ( node, className,  callback, mode ){\n  var activeClassName, timeout, tid, onceAnim;\n  if( (!animationEnd && !transitionEnd) || env.isRunning ){\n    return callback();\n  }\n\n  if(mode !== 4){\n    onceAnim = _.once(function onAnimateEnd(){\n      if(tid) clearTimeout(tid);\n\n      if(mode === 2) {\n        dom.delClass(node, activeClassName);\n      }\n      if(mode !== 3){ // mode hold the class\n        dom.delClass(node, className);\n      }\n      dom.off(node, animationEnd, onceAnim)\n      dom.off(node, transitionEnd, onceAnim)\n\n      callback();\n\n    });\n  }else{\n    onceAnim = _.once(function onAnimateEnd(){\n      if(tid) clearTimeout(tid);\n      callback();\n    });\n  }\n  if(mode === 2){ // auto removed\n    dom.addClass( node, className );\n\n    activeClassName = _.map(className.split(/\\s+/), function(name){\n       return name + '-active';\n    }).join(\" \");\n\n    dom.nextReflow(function(){\n      dom.addClass( node, activeClassName );\n      timeout = getMaxTimeout( node );\n      tid = setTimeout( onceAnim, timeout );\n    });\n\n  }else if(mode===4){\n    dom.nextReflow(function(){\n      dom.delClass( node, className );\n      timeout = getMaxTimeout( node );\n      tid = setTimeout( onceAnim, timeout );\n    });\n\n  }else{\n    dom.nextReflow(function(){\n      dom.addClass( node, className );\n      timeout = getMaxTimeout( node );\n      tid = setTimeout( onceAnim, timeout );\n    });\n  }\n\n\n\n  dom.on( node, animationEnd, onceAnim )\n  dom.on( node, transitionEnd, onceAnim )\n  return onceAnim;\n}\n\n\nanimate.startStyleAnimate = function(node, styles, callback){\n  var timeout, onceAnim, tid;\n\n  dom.nextReflow(function(){\n    dom.css( node, styles );\n    timeout = getMaxTimeout( node );\n    tid = setTimeout( onceAnim, timeout );\n  });\n\n\n  onceAnim = _.once(function onAnimateEnd(){\n    if(tid) clearTimeout(tid);\n\n    dom.off(node, animationEnd, onceAnim)\n    dom.off(node, transitionEnd, onceAnim)\n\n    callback();\n\n  });\n\n  dom.on( node, animationEnd, onceAnim )\n  dom.on( node, transitionEnd, onceAnim )\n\n  return onceAnim;\n}\n\n\n/**\n * get maxtimeout\n * @param  {Node} node \n * @return {[type]}   [description]\n */\nfunction getMaxTimeout(node){\n  var timeout = 0,\n    tDuration = 0,\n    tDelay = 0,\n    aDuration = 0,\n    aDelay = 0,\n    ratio = 5 / 3,\n    styles ;\n\n  if(window.getComputedStyle){\n\n    styles = window.getComputedStyle(node),\n    tDuration = getMaxTime( styles[transitionProperty + 'Duration']) || tDuration;\n    tDelay = getMaxTime( styles[transitionProperty + 'Delay']) || tDelay;\n    aDuration = getMaxTime( styles[animationProperty + 'Duration']) || aDuration;\n    aDelay = getMaxTime( styles[animationProperty + 'Delay']) || aDelay;\n    timeout = Math.max( tDuration+tDelay, aDuration + aDelay );\n\n  }\n  return timeout * 1000 * ratio;\n}\n\nfunction getMaxTime(str){\n\n  var maxTimeout = 0, time;\n\n  if(!str) return 0;\n\n  str.split(\",\").forEach(function(str){\n\n    time = parseFloat(str);\n    if( time > maxTimeout ) maxTimeout = time;\n\n  });\n\n  return maxTimeout;\n}\n\nmodule.exports = animate;","var env =  require(\"./env\");\nvar config = require(\"./config\"); \nvar Regular = module.exports = require(\"./render/client\");\nvar Parser = Regular.Parser;\nvar Lexer = Regular.Lexer;\n\n// if(env.browser){\n    require(\"./directive/base\");\n    require(\"./directive/animation\");\n    require(\"./module/timeout\");\n    Regular.dom = require(\"./dom\");\n// }\nRegular.env = env;\nRegular.util = require(\"./util\");\nRegular.parse = function(str, options){\n  options = options || {};\n\n  if(options.BEGIN || options.END){\n    if(options.BEGIN) config.BEGIN = options.BEGIN;\n    if(options.END) config.END = options.END;\n    Lexer.setup();\n  }\n  var ast = new Parser(str).parse();\n  return !options.stringify? ast : JSON.stringify(ast);\n}\nRegular.Cursor =require('./helper/cursor') \n\nRegular.isServer = env.node;\nRegular.isRegular = function( Comp ){\n  return  Comp.prototype instanceof Regular;\n}\n\n\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","var _ = require(\"../util\");\n\nvar config = require(\"../config\");\nvar node = require(\"./node\");\nvar Lexer = require(\"./Lexer\");\nvar varName = _.varName;\nvar ctxName = _.ctxName;\nvar extName = _.extName;\nvar isPath = _.makePredicate(\"STRING IDENT NUMBER\");\nvar isKeyWord = _.makePredicate(\"true false undefined null this Array Date JSON Math NaN RegExp decodeURI decodeURIComponent encodeURI encodeURIComponent parseFloat parseInt Object\");\nvar isInvalidTag = _.makePredicate(\"script style\");\nvar isLastBind = /\\.bind$/;\n\n\n\nfunction Parser(input, opts){\n  opts = opts || {};\n\n  this.input = input;\n  this.tokens = new Lexer(input, opts).lex();\n  this.pos = 0;\n  this.length = this.tokens.length;\n}\n\n\nvar op = Parser.prototype;\n\n\nop.parse = function(){\n  this.pos = 0;\n  var res= this.program();\n  if(this.ll().type === 'TAG_CLOSE'){\n    this.error(\"You may got a unclosed Tag\")\n  }\n  return res;\n}\n\nop.ll =  function(k){\n  k = k || 1;\n  if(k < 0) k = k + 1;\n  var pos = this.pos + k - 1;\n  if(pos > this.length - 1){\n      return this.tokens[this.length-1];\n  }\n  return this.tokens[pos];\n}\n  // lookahead\nop.la = function(k){\n  return (this.ll(k) || '').type;\n}\n\nop.match = function(type, value){\n  var ll;\n  if(!(ll = this.eat(type, value))){\n    ll  = this.ll();\n    this.error('expect [' + type + (value == null? '':':'+ value) + ']\" -> got \"[' + ll.type + (value==null? '':':'+ll.value) + ']', ll.pos)\n  }else{\n    return ll;\n  }\n}\n\nop.error = function(msg, pos){\n  msg =  \"\\n parse failed  \" + msg +  ':\\n\\n' + _.trackErrorPos(this.input, typeof pos === 'number'? pos: this.ll().pos||0);\n  throw new Error(msg);\n}\n\nop.next = function(k){\n  k = k || 1;\n  this.pos += k;\n}\nop.eat = function(type, value){\n  var ll = this.ll();\n  if(typeof type !== 'string'){\n    for(var len = type.length ; len--;){\n      if(ll.type === type[len]) {\n        this.next();\n        return ll;\n      }\n    }\n  }else{\n    if( ll.type === type && (typeof value === 'undefined' || ll.value === value) ){\n       this.next();\n       return ll;\n    }\n  }\n  return false;\n}\n\n// program\n//  :EOF\n//  | (statement)* EOF\nop.program = function(isAttr){\n  var statements = [],  ll = this.ll();\n  while(ll.type !== 'EOF' && ll.type !=='TAG_CLOSE'){\n\n    statements.push(this.statement());\n    ll = this.ll();\n    // {~ <div></div>}\n    if( isAttr && ll.type === 'END'){\n      this.next();\n      return node.body(statements)\n    }\n  }\n  // if(ll.type === 'TAG_CLOSE') this.error(\"You may have unmatched Tag\")\n  return statements;\n}\n\n// statement\n//  : xml\n//  | jst\n//  | text\nvar rRN = /\\r\\n/g;\nop.statement = function(){\n  var ll = this.ll();\n  switch(ll.type){\n    case 'NAME':\n    case 'TEXT':\n      var text = ll.value;\n      this.next();\n      while(ll = this.eat(['NAME', 'TEXT'])){\n        text += ll.value;\n      }\n      return node.text(text.replace(rRN, '\\n'));\n    case 'TAG_OPEN':\n      return this.xml();\n    case 'OPEN': \n      return this.directive();\n    case 'EXPR_OPEN':\n      return this.interplation();\n    default:\n      this.error('Unexpected token: '+ this.la())\n  }\n}\n\n// xml \n// stag statement* TAG_CLOSE?(if self-closed tag)\nop.xml = function(){\n  var name, attrs, children, selfClosed;\n  name = this.match('TAG_OPEN').value;\n\n  if( isInvalidTag(name)){\n    this.error('Invalid Tag: ' + name);\n  }\n  attrs = this.attrs();\n  selfClosed = this.eat('/')\n  this.match('>');\n  if( !selfClosed && !_.isVoidTag(name) ){\n    children = this.program();\n    if(!this.eat('TAG_CLOSE', name)) this.error('expect </'+name+'> got'+ 'no matched closeTag')\n  }\n  return node.element(name, attrs, children);\n}\n\n// xentity\n//  -rule(wrap attribute)\n//  -attribute\n//\n// __example__\n//  name = 1 |  \n//  ng-hide |\n//  on-click={{}} | \n//  {{#if name}}on-click={{xx}}{{#else}}on-tap={{}}{{/if}}\n\nop.xentity = function(ll){\n  var name = ll.value, value, modifier;\n  if(ll.type === 'NAME'){\n    //@ only for test\n    if(~name.indexOf('.')){\n      var tmp = name.split('.');\n      name = tmp[0];\n      modifier = tmp[1]\n\n    }\n    if( this.eat(\"=\") ) value = this.attvalue(modifier);\n    return node.attribute( name, value, modifier );\n  }else{\n    if( name !== 'if') this.error(\"current version. ONLY RULE #if #else #elseif is valid in tag, the rule #\" + name + ' is invalid');\n    return this['if'](true);\n  }\n\n}\n\n// stag     ::=    '<' Name (S attr)* S? '>'  \n// attr    ::=     Name Eq attvalue\nop.attrs = function(isAttribute){\n  var eat\n  if(!isAttribute){\n    eat = [\"NAME\", \"OPEN\"]\n  }else{\n    eat = [\"NAME\"]\n  }\n\n  var attrs = [], ll;\n  while (ll = this.eat(eat)){\n    attrs.push(this.xentity( ll ))\n  }\n  return attrs;\n}\n\n// attvalue\n//  : STRING  \n//  | NAME\nop.attvalue = function(mdf){\n  var ll = this.ll();\n  switch(ll.type){\n    case \"NAME\":\n    case \"UNQ\":\n    case \"STRING\":\n      this.next();\n      var value = ll.value;\n      return value;\n    case \"EXPR_OPEN\":\n      return this.interplation();\n    case \"BODY_OPEN\":\n      this.next();\n      return this.program(true);\n    default:\n      this.error('Unexpected token: '+ this.la())\n  }\n}\n\n\n// {{#}}\nop.directive = function(){\n  var name = this.ll().value;\n  this.next();\n  if(typeof this[name] === 'function'){\n    return this[name]()\n  }else{\n    this.error('Undefined directive['+ name +']');\n  }\n}\n\n\n\n\n\n// {{}}\nop.interplation = function(){\n  this.match('EXPR_OPEN');\n  var res = this.expression(true);\n  this.match('END');\n  return res;\n}\n\n// {{~}}\nop.inc = op.include = function(){\n  var content = this.expression();\n  this.match('END');\n  return node.template(content);\n}\n\n// {{#if}}\nop[\"if\"] = function(tag){\n  var test = this.expression();\n  var consequent = [], alternate=[];\n\n  var container = consequent;\n  var statement = !tag? \"statement\" : \"attrs\";\n\n  this.match('END');\n\n  var ll, close;\n  while( ! (close = this.eat('CLOSE')) ){\n    ll = this.ll();\n    if( ll.type === 'OPEN' ){\n      switch( ll.value ){\n        case 'else':\n          container = alternate;\n          this.next();\n          this.match( 'END' );\n          break;\n        case 'elseif':\n          this.next();\n          alternate.push( this[\"if\"](tag) );\n          return node['if']( test, consequent, alternate );\n        default:\n          container.push( this[statement](true) );\n      }\n    }else{\n      container.push(this[statement](true));\n    }\n  }\n  // if statement not matched\n  if(close.value !== \"if\") this.error('Unmatched if directive')\n  return node[\"if\"](test, consequent, alternate);\n}\n\n\n// @mark   mustache syntax have natrure dis, canot with expression\n// {{#list}}\nop.list = function(){\n  // sequence can be a list or hash\n  var sequence = this.expression(), variable, ll, track;\n  var consequent = [], alternate=[];\n  var container = consequent;\n\n  this.match('IDENT', 'as');\n\n  variable = this.match('IDENT').value;\n\n  if(this.eat('IDENT', 'by')){\n    if(this.eat('IDENT', variable+'_key')){\n      this.error('can not track by ' + variable + '_key in list statement');\n    }\n    if(this.eat('IDENT',variable + '_index')){\n      track = true;\n    }else{\n      track = this.expression();\n      if(track.constant){\n        // true is means constant, we handle it just like xxx_index.\n        track = true;\n      }\n    }\n  }\n\n  this.match('END');\n\n  while( !(ll = this.eat('CLOSE')) ){\n    if(this.eat('OPEN', 'else')){\n      container =  alternate;\n      this.match('END');\n    }else{\n      container.push(this.statement());\n    }\n  }\n  \n  if(ll.value !== 'list') this.error('expect ' + 'list got ' + '/' + ll.value + ' ', ll.pos );\n  return node.list(sequence, variable, consequent, alternate, track);\n}\n\n\nop.expression = function(){\n  var expression;\n  if(this.eat('@(')){ //once bind\n    expression = this.expr();\n    expression.once = true;\n    this.match(')')\n  }else{\n    expression = this.expr();\n  }\n  return expression;\n}\n\nop.expr = function(){\n  this.depend = [];\n\n  var buffer = this.filter()\n\n  var body = buffer.get || buffer;\n  var setbody = buffer.set;\n  return node.expression(body, setbody, !this.depend.length, buffer.filters);\n}\n\n\n// filter\n// assign ('|' filtername[':' args]) * \nop.filter = function(){\n  var left = this.assign();\n  var ll = this.eat('|');\n  var buffer = [], filters,setBuffer, prefix,\n    attr = \"t\", \n    set = left.set, get, \n    tmp = \"\";\n\n  if(ll){\n    if(set) {\n      setBuffer = [];\n      filters = [];\n    }\n\n    prefix = \"(function(\" + attr + \"){\";\n\n    do{\n      var filterName = this.match('IDENT').value;\n      tmp = attr + \" = \" + ctxName + \"._f_('\" + filterName + \"' ).get.call( \"+_.ctxName +\",\" + attr ;\n      if(this.eat(':')){\n        tmp +=\", \"+ this.arguments(\"|\").join(\",\") + \");\"\n      }else{\n        tmp += ');'\n      }\n      buffer.push(tmp);\n      \n      if(set){\n        // only in runtime ,we can detect  whether  the filter has a set function. \n        filters.push(filterName);\n        setBuffer.unshift( tmp.replace(\" ).get.call\", \" ).set.call\") );\n      }\n\n    }while(ll = this.eat('|'));\n    buffer.push(\"return \" + attr );\n    setBuffer && setBuffer.push(\"return \" + attr);\n\n    get =  prefix + buffer.join(\"\") + \"})(\"+left.get+\")\";\n    // we call back to value.\n    if(setBuffer){\n      // change _ss__(name, _p_) to _s__(name, filterFn(_p_));\n      set = set.replace(_.setName, \n        prefix + setBuffer.join(\"\") + \"})(\"+ _.setName +\")\" );\n\n    }\n    // the set function is depend on the filter definition. if it have set method, the set will work\n    var ret = getset(get, set);\n    ret.filters = filters;\n    return ret;\n  }\n  return left;\n}\n\n// assign\n// left-hand-expr = condition\nop.assign = function(){\n  var left = this.condition(), ll;\n  if(ll = this.eat(['=', '+=', '-=', '*=', '/=', '%='])){\n    if(!left.set) this.error('invalid lefthand expression in assignment expression');\n    return getset( left.set.replace( \",\" + _.setName, \",\" + this.condition().get ).replace(\"'='\", \"'\"+ll.type+\"'\"), left.set);\n    // return getset('(' + left.get + ll.type  + this.condition().get + ')', left.set);\n  }\n  return left;\n}\n\n// or\n// or ? assign : assign\nop.condition = function(){\n\n  var test = this.or();\n  if(this.eat('?')){\n    return getset([test.get + \"?\", \n      this.assign().get, \n      this.match(\":\").type, \n      this.assign().get].join(\"\"));\n  }\n\n  return test;\n}\n\n// and\n// and && or\nop.or = function(){\n\n  var left = this.and();\n\n  if(this.eat('||')){\n    return getset(left.get + '||' + this.or().get);\n  }\n\n  return left;\n}\n// equal\n// equal && and\nop.and = function(){\n\n  var left = this.equal();\n\n  if(this.eat('&&')){\n    return getset(left.get + '&&' + this.and().get);\n  }\n  return left;\n}\n// relation\n// \n// equal == relation\n// equal != relation\n// equal === relation\n// equal !== relation\nop.equal = function(){\n  var left = this.relation(), ll;\n  // @perf;\n  if( ll = this.eat(['==','!=', '===', '!=='])){\n    return getset(left.get + ll.type + this.equal().get);\n  }\n  return left\n}\n// relation < additive\n// relation > additive\n// relation <= additive\n// relation >= additive\n// relation in additive\nop.relation = function(){\n  var left = this.additive(), ll;\n  // @perf\n  if(ll = (this.eat(['<', '>', '>=', '<=']) || this.eat('IDENT', 'in') )){\n    return getset(left.get + ll.value + this.relation().get);\n  }\n  return left\n}\n// additive :\n// multive\n// additive + multive\n// additive - multive\nop.additive = function(){\n  var left = this.multive() ,ll;\n  if(ll= this.eat(['+','-']) ){\n    return getset(left.get + ll.value + this.additive().get);\n  }\n  return left\n}\n// multive :\n// unary\n// multive * unary\n// multive / unary\n// multive % unary\nop.multive = function(){\n  var left = this.range() ,ll;\n  if( ll = this.eat(['*', '/' ,'%']) ){\n    return getset(left.get + ll.type + this.multive().get);\n  }\n  return left;\n}\n\nop.range = function(){\n  var left = this.unary(), ll, right;\n\n  if(ll = this.eat('..')){\n    right = this.unary();\n    var body = \n      \"(function(start,end){var res = [],step=end>start?1:-1; for(var i = start; end>start?i <= end: i>=end; i=i+step){res.push(i); } return res })(\"+left.get+\",\"+right.get+\")\"\n    return getset(body);\n  }\n\n  return left;\n}\n\n\n\n// lefthand\n// + unary\n// - unary\n// ~ unary\n// ! unary\nop.unary = function(){\n  var ll;\n  if(ll = this.eat(['+','-','~', '!'])){\n    return getset('(' + ll.type + this.unary().get + ')') ;\n  }else{\n    return this.member()\n  }\n}\n\n// call[lefthand] :\n// member args\n// member [ expression ]\n// member . ident  \n\nop.member = function(base, last, pathes, prevBase){\n  var ll, path;\n\n\n  var onlySimpleAccessor = false;\n  if(!base){ //first\n    path = this.primary();\n    var type = typeof path;\n    if(type === 'string'){ \n      pathes = [];\n      pathes.push( path );\n      last = path;\n      base = ctxName + \"._sg_('\" + path + \"', undefined, \" + varName + \", \" + extName + \")\";\n      onlySimpleAccessor = true;\n    }else{ //Primative Type\n      if(path.get === 'this'){\n        base = ctxName;\n        pathes = ['this'];\n      }else{\n        pathes = null;\n        base = path.get;\n      }\n    }\n  }else{ // not first enter\n    if(typeof last === 'string' && isPath( last) ){ // is valid path\n      pathes.push(last);\n    }else{\n      if(pathes && pathes.length) this.depend.push(pathes);\n      pathes = null;\n    }\n  }\n  if(ll = this.eat(['[', '.', '('])){\n    switch(ll.type){\n      case '.':\n          // member(object, property, computed)\n        var tmpName = this.match('IDENT').value;\n        prevBase = base;\n        if( this.la() !== \"(\" ){ \n          base = ctxName + \"._sg_('\" + tmpName + \"', \" + base + \" || null)\";\n        }else{\n          base += \".\" + tmpName ;\n        }\n        return this.member( base, tmpName, pathes,  prevBase);\n      case '[':\n          // member(object, property, computed)\n        path = this.assign();\n        prevBase = base;\n        if( this.la() !== \"(\" ){ \n        // means function call, we need throw undefined error when call function\n        // and confirm that the function call wont lose its context\n          base = ctxName + \"._sg_(\" + path.get + \", \" + base + \" || null)\";\n        }else{\n          base += \"[\" + path.get + \"]\";\n        }\n        this.match(']')\n        return this.member(base, path, pathes, prevBase);\n      case '(':\n        // call(callee, args)\n\n        base = base.replace(isLastBind, '.__bind__')\n        var args = this.arguments().join(',');\n\n        base =  base+\"(\" + args +\")\";\n        this.match(')')\n        return this.member(base, null, pathes);\n    }\n  }\n  if( pathes && pathes.length ) this.depend.push( pathes );\n  var res =  {get: base};\n  if(last){\n    res.set = ctxName + \"._ss_(\" + \n        (last.get? last.get : \"'\"+ last + \"'\") + \n        \",\"+ _.setName + \",\"+ \n        (prevBase?prevBase:_.varName) + \n        \", '=', \"+ ( onlySimpleAccessor? 1 : 0 ) + \")\";\n  \n  }\n  return res;\n}\n\n/**\n * \n */\nop.arguments = function(end){\n  end = end || ')'\n  var args = [];\n  do{\n    if(this.la() !== end){\n      args.push(this.assign().get)\n    }\n  }while( this.eat(','));\n  return args\n}\n\n\n// primary :\n// this \n// ident\n// literal\n// array\n// object\n// ( expression )\n\nop.primary = function(){\n  var ll = this.ll();\n  switch(ll.type){\n    case \"{\":\n      return this.object();\n    case \"[\":\n      return this.array();\n    case \"(\":\n      return this.paren();\n    // literal or ident\n    case 'STRING':\n      this.next();\n      var value = \"\" + ll.value;\n      var quota = ~value.indexOf(\"'\")? \"\\\"\": \"'\" ;\n      return getset(quota + value + quota);\n    case 'NUMBER':\n      this.next();\n      return getset( \"\" + ll.value );\n    case \"IDENT\":\n      this.next();\n      if(isKeyWord(ll.value)){\n        return getset( ll.value );\n      }\n      return ll.value;\n    default: \n      this.error('Unexpected Token: ' + ll.type);\n  }\n}\n\n// object\n//  {propAssign [, propAssign] * [,]}\n\n// propAssign\n//  prop : assign\n\n// prop\n//  STRING\n//  IDENT\n//  NUMBER\n\nop.object = function(){\n  var code = [this.match('{').type];\n\n  var ll = this.eat( ['STRING', 'IDENT', 'NUMBER'] );\n  while(ll){\n    code.push(\"'\" + ll.value + \"'\" + this.match(':').type);\n    var get = this.assign().get;\n    code.push(get);\n    ll = null;\n    if(this.eat(\",\") && (ll = this.eat(['STRING', 'IDENT', 'NUMBER'])) ) code.push(\",\");\n  }\n  code.push(this.match('}').type);\n  return {get: code.join(\"\")}\n}\n\n// array\n// [ assign[,assign]*]\nop.array = function(){\n  var code = [this.match('[').type], item;\n  if( this.eat(\"]\") ){\n\n     code.push(\"]\");\n  } else {\n    while(item = this.assign()){\n      code.push(item.get);\n      if(this.eat(',')) code.push(\",\");\n      else break;\n    }\n    code.push(this.match(']').type);\n  }\n  return {get: code.join(\"\")};\n}\n\n// '(' expression ')'\nop.paren = function(){\n  this.match('(');\n  var res = this.filter()\n  res.get = '(' + res.get + ')';\n  res.set = res.set;\n  this.match(')');\n  return res;\n}\n\nfunction getset(get, set){\n  return {\n    get: get,\n    set: set\n  }\n}\n\n\n\nmodule.exports = Parser;\n","module.exports = {\n  element: function(name, attrs, children){\n    return {\n      type: 'element',\n      tag: name,\n      attrs: attrs,\n      children: children\n    }\n  },\n  attribute: function(name, value, mdf){\n    return {\n      type: 'attribute',\n      name: name,\n      value: value,\n      mdf: mdf\n    }\n  },\n  \"if\": function(test, consequent, alternate){\n    return {\n      type: 'if',\n      test: test,\n      consequent: consequent,\n      alternate: alternate\n    }\n  },\n  list: function(sequence, variable, body, alternate, track){\n    return {\n      type: 'list',\n      sequence: sequence,\n      alternate: alternate,\n      variable: variable,\n      body: body,\n      track: track\n    }\n  },\n  expression: function( body, setbody, constant, filters ){\n    return {\n      type: \"expression\",\n      body: body,\n      constant: constant || false,\n      setbody: setbody || false,\n      filters: filters\n    }\n  },\n  // {~ <div>{name}</div>}\n  body: function( body ){\n    return {\n      type: \"body\",\n      body: body\n    }\n  },\n  text: function(text){\n    return {\n      type: \"text\",\n      text: text\n    }\n  },\n  template: function(template){\n    return {\n      type: 'template',\n      content: template\n    }\n  }\n}\n","var _ = require('../util');\nvar config = require('../config');\nvar parse = require('../helper/parse');\nvar node = require('../parser/node');\n\n\nfunction initDefinition(context, definition, beforeConfig){\n\n  var eventConfig, hasInstanceComputed = !!definition.computed, template;\n  var usePrototyeString = typeof context.template === 'string' && !definition.template;\n\n // template is a string (len < 16). we will find it container first\n\n  definition.data = definition.data || {};\n  definition.computed = definition.computed || {};\n  if( context.data ) _.extend( definition.data, context.data );\n  if( context.computed ) _.extend( definition.computed, context.computed );\n\n  var listeners = context._eventListeners || [];\n  var normListener;\n  // hanle initialized event binding\n  if( definition.events){\n    normListener = _.normListener(definition.events);\n    if(normListener.length){\n      listeners = listeners.concat(normListener)\n    }\n    delete definition.events;\n  }\n\n\n  definition.data = definition.data || {};\n  definition.computed = definition.computed || {};\n  if(context.data) _.extend(definition.data, context.data);\n  if(context.computed) _.extend(definition.computed, context.computed);\n\n  var usePrototyeString = typeof context.template === 'string' && !definition.template;\n\n  _.extend(context, definition, true);\n\n\n\n  if(listeners && listeners.length){\n    listeners.forEach(function( item ){\n      context.$on(item.type, item.listener)\n    })\n  }\n\n\n  // we need add some logic at client.\n  beforeConfig && beforeConfig();\n\n  // only have instance computed, we need prepare the property\n  if( hasInstanceComputed ) context.computed = handleComputed(context.computed);\n\n  context.$emit( \"$config\", context.data );\n  context.config && context.config( context.data );\n  context.$emit( \"$afterConfig\", context.data );\n\n  template = context.template;\n\n \n  if(typeof template === 'string') {\n    template = parse.parse(template);\n    if(usePrototyeString) {\n    // avoid multiply compile\n      context.constructor.prototype.template = template;\n    }else{\n      delete context.template;\n    }\n  }\n  return template;\n}\n\nvar handleComputed = (function(){\n  // wrap the computed getter;\n  function wrapGet(get){\n    return function(context){\n      return get.call(context, context.data );\n    }\n  }\n  // wrap the computed setter;\n  function wrapSet(set){\n    return function(context, value){\n      set.call( context, value, context.data );\n      return value;\n    }\n  }\n\n  return function( computed ){\n    if(!computed) return;\n    var parsedComputed = {}, handle, pair, type;\n    for(var i in computed){\n      handle = computed[i]\n      type = typeof handle;\n\n      if(handle.type === 'expression'){\n        parsedComputed[i] = handle;\n        continue;\n      }\n      if( type === \"string\" ){\n        parsedComputed[i] = parse.expression(handle)\n      }else{\n        pair = parsedComputed[i] = {type: 'expression'};\n        if(type === \"function\" ){\n          pair.get = wrapGet(handle);\n        }else{\n          if(handle.get) pair.get = wrapGet(handle.get);\n          if(handle.set) pair.set = wrapSet(handle.set);\n        }\n      } \n    }\n    return parsedComputed;\n  }\n})();\n\n\nfunction prepareAttr ( ast ,directive ){\n  if(ast.parsed ) return ast;\n  var value = ast.value;\n  var name=  ast.name, body, constant;\n  if(typeof value === 'string' && ~value.indexOf(config.BEGIN) && ~value.indexOf(config.END) ){\n    if( !directive || !directive.nps ) {\n      var parsed = parse.parse(value, { mode: 2 });\n      if(parsed.length === 1 && parsed[0].type === 'expression'){ \n        body = parsed[0];\n      } else{\n        constant = true;\n        body = [];\n        parsed.forEach(function(item){\n          if(!item.constant) constant=false;\n          // silent the mutiple inteplation\n            body.push(item.body || \"'\" + item.text.replace(/'/g, \"\\\\'\") + \"'\");        \n        });\n        body = node.expression(\"[\" + body.join(\",\") + \"].join('')\", null, constant);\n      }\n      ast.value = body;\n    }\n  }\n  ast.parsed = true;\n  return ast;\n}\n\nmodule.exports = {\n  // share logic between server and client\n  initDefinition: initDefinition,\n  handleComputed: handleComputed,\n  prepareAttr: prepareAttr\n}","var exprCache = require('../env').exprCache;\nvar _ = require(\"../util\");\nvar Parser = require(\"../parser/Parser\");\nmodule.exports = {\n  expression: function(expr, simple){\n    // @TODO cache\n    if( typeof expr === 'string' && ( expr = expr.trim() ) ){\n      expr = exprCache.get( expr ) || exprCache.set( expr, new Parser( expr, { mode: 2, expression: true } ).expression() )\n    }\n    if(expr) return expr;\n  },\n  parse: function(template){\n    return new Parser(template).parse();\n  }\n}\n\n","// some nested  operation in ast\n// --------------------------------\n\nvar dom = require(\"../dom\");\nvar animate = require(\"./animate\");\n\nvar combine = module.exports = {\n\n  // get the initial dom in object\n  node: function(item){\n    var children,node, nodes;\n    if(!item) return;\n    if(typeof item.node === \"function\") return item.node();\n    if(typeof item.nodeType === \"number\") return item;\n    if(item.group) return combine.node(item.group)\n\n    item = item.children || item;\n    if( Array.isArray(item )){\n      var len = item.length;\n      if(len === 1){\n        return combine.node(item[0]);\n      }\n      nodes = [];\n      for(var i = 0, len = item.length; i < len; i++ ){\n        node = combine.node(item[i]);\n        if(Array.isArray(node)){\n          for (var j = 0, len1 = node.length; j < len1; j++){\n            nodes.push(node[j])\n          }\n        }else if(node) {\n          nodes.push(node)\n        }\n      }\n      return nodes;\n    }\n    \n  },\n  // @TODO remove _gragContainer\n  inject: function(node, pos ){\n    var group = this;\n    var fragment = combine.node(group.group || group);\n    if(node === false) {\n      animate.remove(fragment)\n      return group;\n    }else{\n      if(!fragment) return group;\n      if(typeof node === 'string') node = dom.find(node);\n      if(!node) throw Error('injected node is not found');\n      // use animate to animate firstchildren\n      animate.inject(fragment, node, pos);\n    }\n    // if it is a component\n    if(group.$emit) {\n      var preParent = group.parentNode;\n      var newParent = (pos ==='after' || pos === 'before')? node.parentNode : node;\n      group.parentNode = newParent;\n      group.$emit(\"$inject\", node, pos, preParent);\n    }\n    return group;\n  },\n\n  // get the last dom in object(for insertion operation)\n  last: function(item){\n    var children = item.children;\n\n    if(typeof item.last === \"function\") return item.last();\n    if(typeof item.nodeType === \"number\") return item;\n\n    if(children && children.length) return combine.last(children[children.length - 1]);\n    if(item.group) return combine.last(item.group);\n\n  },\n\n  destroy: function(item, first){\n    if(!item) return;\n    if( typeof item.nodeType === \"number\"  ) return first && dom.remove(item)\n    if( typeof item.destroy === \"function\" ) return item.destroy(first);\n\n    if( Array.isArray(item)){\n      for(var i = 0, len = item.length; i < len; i++ ){\n        combine.destroy(item[i], first);\n      }\n    }\n  }\n\n}\n\n\n// @TODO: need move to dom.js\ndom.element = function( component, all ){\n  if(!component) return !all? null: [];\n  var nodes = combine.node( component );\n  if( nodes.nodeType === 1 ) return all? [nodes]: nodes;\n  var elements = [];\n  for(var i = 0; i<nodes.length ;i++){\n    var node = nodes[i];\n    if( node && node.nodeType === 1){\n      if(!all) return node;\n      elements.push(node);\n    }\n  }\n  return !all? elements[0]: elements;\n}\n\n\n\n","function NodeCursor(node, parentNode){\n  this.node = node;\n  this.parent = parentNode;\n}\n\n\nvar no = NodeCursor.prototype;\n\nno.next = function(){\n  this.prev = this.node;\n  this.node = this.node.nextSibling;\n  return this;\n}\n\nmodule.exports = function(n, p){ return new NodeCursor(n, p)}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","var _ = require(\"../util\");\nvar config = require(\"../config\");\nvar createFSM = require(\"./FSM\");\n\n// some custom tag  will conflict with the Lexer progress\nvar conflictTag = {\"}\": \"{\", \"]\": \"[\"}, map1, map2;\n// some macro for lexer\nvar macro = {\n  'NAME': /(?:[:_A-Za-z][-\\.:_0-9A-Za-z]*)/,\n  'IDENT': /[\\$_A-Za-z][_0-9A-Za-z\\$]*/,\n  'SPACE': /[\\r\\n\\t\\f ]/\n}\n\n\nvar test = /a|(b)/.exec(\"a\");\nvar testSubCapure = test && test[1] === undefined? \n  function(str){ return str !== undefined }\n  :function(str){return !!str};\n\nfunction wrapHander(handler){\n  return function(all){\n    return {type: handler, value: all }\n  }\n}\n\nfunction Lexer(input, opts){\n  if(conflictTag[config.END]){\n    this.markStart = conflictTag[config.END];\n    this.markEnd = config.END;\n  }\n\n  this.input = input||\"\";\n  this.opts = opts || {};\n  this.syntaxSets = createFSM();\n  this.state = createFSM();\n  this.map = this.opts.mode !== 2?  map1: map2;\n  this.syntaxSets.enter('INIT');\n  if(opts && opts.expression){\n     this.syntaxSets.enter('JST');\n     this.expression = true;\n  }\n}\n\nvar lo = Lexer.prototype\n\n\nlo.lex = function(str){\n  str = str || this.input\n  var leadingWhitespaces = /^\\s*/.exec(str)\n  str = str.trim();\n  var tokens = [], split, test,mlen, token, syntax;\n  this.input = str, \n  this.marks = 0;\n  // fix the pos offset caused by trim\n  this.index=leadingWhitespaces ? leadingWhitespaces[0].length : 0;\n  var i = 0;\n  while(str){\n    i++\n    syntax = this.syntaxSets.get();\n    split = this.map[syntax];\n    test = split.TRUNK.exec(str);\n    if(!test){\n      this.error('Unrecoginized Token');\n    }\n    mlen = test[0].length;\n    str = str.slice(mlen)\n    token = this._process.call(this, test, split, str)\n    if(token) tokens.push(token)\n    this.index += mlen;\n    // if(state == 'TAG' || state == 'JST') str = this.skipspace(str);\n  }\n\n  tokens.push({type: 'EOF'});\n  \n  return tokens;\n}\n\nlo.error = function(msg){\n  throw  Error(\"Parse Error: \" + msg +  ':\\n' + _.trackErrorPos(this.input, this.index));\n}\n\nlo._process = function(args, split,str){\n  // console.log(args.join(\",\"), this.state())\n  var links = split.links, marched = false, token;\n\n  for(var len = links.length, i=0;i<len ;i++){\n    var link = links[i],\n      handler = link[2],\n      index = link[0];\n    // if(args[6] === '>' && index === 6) console.log('haha')\n    if(testSubCapure(args[index])) {\n      marched = true;\n      if(handler){\n        token = handler.apply(this, _.slice(args, index, index + link[1]))\n        if(token)  token.pos = this.index;\n      }\n      break;\n    }\n  }\n  if(!marched){ // in ie lt8 . sub capture is \"\" but ont \n    switch(str.charAt(0)){\n      case \"<\":\n        this.syntaxSets.enter(\"TAG\");\n        break;\n      default:\n        this.syntaxSets.enter(\"JST\");\n        break;\n    }\n  }\n  return token;\n}\n\nLexer.setup = function(){\n  macro.END = config.END;\n  macro.BEGIN = config.BEGIN;\n  \n  // living template lexer\n  map1 = genMap([\n    // INIT\n    rules.BODY_END,\n    rules.ENTER_JST,\n    rules.ENTER_TAG,\n    rules.TEXT,\n\n    //TAG\n    rules.TAG_NAME,\n    rules.TAG_OPEN,\n    rules.TAG_CLOSE,\n    rules.TAG_PUNCHOR,\n    rules.TAG_ENTER_JST,\n    rules.TAG_UNQ_VALUE,\n    rules.TAG_STRING,\n    rules.TAG_SPACE,\n    rules.TAG_COMMENT,\n\n    // JST\n    rules.JST_OPEN,\n    rules.JST_BODY_OPEN,\n    rules.JST_CLOSE,\n    rules.JST_EXPR_OPEN,\n    rules.JST_IDENT,\n    rules.JST_SPACE,\n    rules.JST_LEAVE,\n    rules.JST_NUMBER,\n    rules.JST_PUNCHOR,\n    rules.JST_STRING,\n    rules.JST_COMMENT\n    ])\n\n  // ignored the tag-relative token\n  map2 = genMap([\n    // INIT no < restrict\n    rules.BODY_END,\n    rules.ENTER_JST2,\n    rules.TEXT,\n    // JST\n    rules.JST_OPEN,\n    rules.JST_BODY_OPEN,\n    rules.JST_CLOSE,\n    rules.JST_EXPR_OPEN,\n    rules.JST_IDENT,\n    rules.JST_SPACE,\n    rules.JST_LEAVE,\n    rules.JST_NUMBER,\n    rules.JST_PUNCHOR,\n    rules.JST_STRING,\n    rules.JST_COMMENT\n    ])\n}\n\n\nfunction genMap(rules){\n  var rule, map = {}, sign;\n  for(var i = 0, len = rules.length; i < len ; i++){\n    rule = rules[i];\n    sign = rule[2] || 'INIT';\n    ( map[sign] || (map[sign] = {rules:[], links:[]}) ).rules.push(rule);\n  }\n  return setup(map);\n}\n\nfunction setup(map){\n  var split, rules, trunks, handler, reg, retain, rule;\n  function replaceFn(all, one){\n    return typeof macro[one] === 'string'? \n      _.escapeRegExp(macro[one]) \n      : String(macro[one]).slice(1,-1);\n  }\n\n  for(var i in map){\n\n    split = map[i];\n    split.curIndex = 1;\n    rules = split.rules;\n    trunks = [];\n\n    for(var j = 0,len = rules.length; j<len; j++){\n      rule = rules[j]; \n      reg = rule[0];\n      handler = rule[1];\n\n      if(typeof handler === 'string'){\n        handler = wrapHander(handler);\n      }\n      if(_.typeOf(reg) === 'regexp') reg = reg.toString().slice(1, -1);\n\n      reg = reg.replace(/\\{(\\w+)\\}/g, replaceFn)\n      retain = _.findSubCapture(reg) + 1; \n      split.links.push([split.curIndex, retain, handler]); \n      split.curIndex += retain;\n      trunks.push(reg);\n    }\n    split.TRUNK = new RegExp(\"^(?:(\" + trunks.join(\")|(\") + \"))\")\n  }\n  return map;\n}\n\nvar rules = {\n\n  // 1. INIT\n  // ---------------\n\n  // mode1's JST ENTER RULE\n  ENTER_JST: [/[^\\x00<]*?(?={BEGIN})/, function(all){\n    this.syntaxSets.enter('JST');\n    if(all) return {type: 'TEXT', value: all}\n  }],\n\n  // mode2's JST ENTER RULE\n  ENTER_JST2: [/[^\\x00]*?(?={BEGIN})/, function(all){\n    this.syntaxSets.enter('JST');\n    if(all) return {type: 'TEXT', value: all}\n  }],\n\n  ENTER_TAG: [/[^\\x00]*?(?=<[\\w\\/\\!])/, function(all){ \n    this.syntaxSets.enter('TAG');\n    if(all) return {type: 'TEXT', value: all}\n  }],\n\n  // {~ <div></div> }\n  BODY_END: [/{SPACE}*{END}/,  function(val){\n    var sets = this.syntaxSets.all(), slen = sets.length;\n\n    if(sets[slen-2] === 'JST'){\n      this.syntaxSets.leave('INIT');\n      this.syntaxSets.leave('JST');\n      return {type: 'END'}\n    }\n\n    return { type: 'TEXT', value: val }\n\n  } ],\n\n  TEXT: [/[^\\x00]+/, 'TEXT' ],\n\n  // 2. TAG\n  // --------------------\n  TAG_NAME: [/{NAME}/, 'NAME', 'TAG'],\n  TAG_UNQ_VALUE: [/[^\\{}&\"'=><`\\r\\n\\f\\t ]+/, 'UNQ', 'TAG'],\n\n  TAG_OPEN: [/<({NAME})\\s*/, function(all, one){ //\"\n    return {type: 'TAG_OPEN', value: one}\n  }, 'TAG'],\n  TAG_CLOSE: [/<\\/({NAME})[\\r\\n\\f\\t ]*>/, function(all, one){\n    this.syntaxSets.leave();\n    return {type: 'TAG_CLOSE', value: one }\n  }, 'TAG'],\n\n    // mode2's JST ENTER RULE\n  TAG_ENTER_JST: [/(?={BEGIN})/, function(){\n    this.syntaxSets.enter('JST');\n  }, 'TAG'],\n\n\n  TAG_PUNCHOR: [/[\\>\\/=&]/, function(all){\n    if(all === '>') this.syntaxSets.leave();\n    return {type: all, value: all }\n  }, 'TAG'],\n\n  TAG_STRING:  [ /'([^']*)'|\"([^\"]*)\\\"/, /*'*/  function(all, one, two){ \n    var value = one || two || \"\";\n\n    return {type: 'STRING', value: value}\n  }, 'TAG'],\n\n  TAG_SPACE: [/{SPACE}+/, null, 'TAG'],\n  TAG_COMMENT: [/<\\!--([^\\x00]*?)--\\>/, function(all){\n    this.syntaxSets.leave()\n    // this.leave('TAG')\n  } ,'TAG'],\n\n  // 3. JST\n  // -------------------\n  JST_OPEN: ['{BEGIN}#{SPACE}*({IDENT})', function(all, name){\n    this.state.enter('JST_OPEN');\n    return {\n      type: 'OPEN',\n      value: name\n    }\n  }, 'JST'],\n  // title = {~ <div></div>}\n  JST_BODY_OPEN: ['{BEGIN}~{SPACE}*', function(all, name){\n    this.syntaxSets.enter('INIT');\n    return {\n      type: 'BODY_OPEN',\n      value: name\n    }\n  }, 'JST'],\n  JST_LEAVE: [/{END}/, function(all){\n    if(this.markEnd === all && this.expression) return {type: this.markEnd, value: this.markEnd};\n    if(!this.markEnd || !this.marks ){\n      this.state.leave('JST_OPEN');\n      this.state.leave('JST_EXPR_OPEN');\n      this.syntaxSets.leave('JST');\n      return {type: 'END'}\n    }else{\n      this.marks--;\n      return {type: this.markEnd, value: this.markEnd}\n    }\n  }, 'JST'],\n  JST_CLOSE: [/{BEGIN}\\s*\\/({IDENT})\\s*{END}/, function(all, one){\n    this.syntaxSets.leave('JST');\n    return {\n      type: 'CLOSE',\n      value: one\n    }\n  }, 'JST'],\n  JST_COMMENT: [/{BEGIN}\\!([^\\x00]*?)\\!{END}/, function(){\n    this.syntaxSets.leave();\n  }, 'JST'],\n  JST_EXPR_OPEN: ['{BEGIN}',function(all, one){\n    if(all === this.markStart){\n      if(this.expression) return { type: this.markStart, value: this.markStart };\n      if(this.state.is('JST_OPEN') || this.state.is('JST_EXPR_OPEN') || this.marks){\n        this.marks++\n        return { type: this.markStart, value: this.markStart };\n      }else{\n        this.state.enter('JST_EXPR_OPEN');\n      }\n    }\n    return {\n      type: 'EXPR_OPEN',\n      escape: false\n    }\n\n  }, 'JST'],\n  JST_IDENT: ['{IDENT}', 'IDENT', 'JST'],\n  JST_SPACE: [/[ \\r\\n\\f]+/, null, 'JST'],\n  JST_PUNCHOR: [/[=!]?==|[-=><+*\\/%\\!]?\\=|\\|\\||&&|\\@\\(|\\.\\.|[<\\>\\[\\]\\(\\)\\-\\|\\{}\\+\\*\\/%?:\\.!,]/, function(all){\n    return { type: all, value: all }\n  },'JST'],\n\n  JST_STRING:  [ /'([^']*)'|\"([^\"]*)\"/, function(all, one, two){ //\"'\n    return {type: 'STRING', value: one || two || \"\"}\n  }, 'JST'],\n  JST_NUMBER: [/(?:[0-9]*\\.[0-9]+|[0-9]+)(e\\d+)?/, function(all){\n    return {type: 'NUMBER', value: parseFloat(all, 10)};\n  }, 'JST']\n}\n\n\n// setup when first config\nLexer.setup();\n\n\n\nmodule.exports = Lexer;\n","var _ = require('../util');\nvar diffTrack = require('./diffTrack');\n\n\nfunction equals(a,b){\n  return a === b;\n}\n\n// array1 - old array\n// array2 - new array\nfunction ld(array1, array2, equalFn){\n  var n = array1.length;\n  var m = array2.length;\n  var equalFn = equalFn || equals;\n  var matrix = [];\n  for(var i = 0; i <= n; i++){\n    matrix.push([i]);\n  }\n  for(var j=1;j<=m;j++){\n    matrix[0][j]=j;\n  }\n  for(var i = 1; i <= n; i++){\n    for(var j = 1; j <= m; j++){\n      if(equalFn(array1[i-1], array2[j-1])){\n        matrix[i][j] = matrix[i-1][j-1];\n      }else{\n        matrix[i][j] = Math.min(\n          matrix[i-1][j]+1, //delete\n          matrix[i][j-1]+1//add\n          )\n      }\n    }\n  }\n  return matrix;\n}\n// arr2 - new array\n// arr1 - old array\nfunction diffArray(arr2, arr1, diff, diffFn) {\n  if(!diff) return _.simpleDiff(arr2, arr1);\n  var matrix = ld(arr1, arr2, diffFn)\n  var n = arr1.length;\n  var i = n;\n  var m = arr2.length;\n  var j = m;\n  var edits = [];\n  var current = matrix[i][j];\n  while(i>0 || j>0){\n  // the last line\n    if (i === 0) {\n      edits.unshift(3);\n      j--;\n      continue;\n    }\n    // the last col\n    if (j === 0) {\n      edits.unshift(2);\n      i--;\n      continue;\n    }\n    var northWest = matrix[i - 1][j - 1];\n    var west = matrix[i - 1][j];\n    var north = matrix[i][j - 1];\n\n    var min = Math.min(north, west, northWest);\n\n    if (min === west) {\n      edits.unshift(2); //delete\n      i--;\n      current = west;\n    } else if (min === northWest ) {\n      if (northWest === current) {\n        edits.unshift(0); //no change\n      } else {\n        edits.unshift(1); //update\n        current = northWest;\n      }\n      i--;\n      j--;\n    } else {\n      edits.unshift(3); //add\n      j--;\n      current = north;\n    }\n  }\n  var LEAVE = 0;\n  var ADD = 3;\n  var DELELE = 2;\n  var UPDATE = 1;\n  var n = 0;m=0;\n  var steps = [];\n  var step = { index: null, add:0, removed:[] };\n\n  for(var i=0;i<edits.length;i++){\n    if(edits[i] > 0 ){ // NOT LEAVE\n      if(step.index === null){\n        step.index = m;\n      }\n    } else { //LEAVE\n      if(step.index != null){\n        steps.push(step)\n        step = {index: null, add:0, removed:[]};\n      }\n    }\n    switch(edits[i]){\n      case LEAVE:\n        n++;\n        m++;\n        break;\n      case ADD:\n        step.add++;\n        m++;\n        break;\n      case DELELE:\n        step.removed.push(arr1[n])\n        n++;\n        break;\n      case UPDATE:\n        step.add++;\n        step.removed.push(arr1[n])\n        n++;\n        m++;\n        break;\n    }\n  }\n  if(step.index != null){\n    steps.push(step)\n  }\n  return steps\n}\n\n\n\n// diffObject\n// ----\n// test if obj1 deepEqual obj2\nfunction diffObject( now, last, diff, keyOf, lastTrackInfo ){\n\n  if(!diff){\n\n    for( var j in now ){\n      if( last[j] !== now[j] ) return true\n    }\n\n    for( var n in last ){\n      if(last[n] !== now[n]) return true;\n    }\n\n  }else{\n\n    var nValues = _.values( now );\n    var lValues = _.values( last );\n\n    /**\n     * [description]\n     * @param  {[type]} a    [description]\n     * @param  {[type]} b){                   return now[b] [description]\n     * @return {[type]}      [description]\n     */\n    if(typeof keyOf === 'function'){\n      return diffTrack( nValues, lValues, keyOf, lastTrackInfo);\n    }\n    return diffArray( nValues, lValues, diff);\n\n  }\n\n  return false;\n}\n\n\n\n\nmodule.exports = {\n  diffArray: diffArray,\n  diffObject: diffObject,\n  diffTrack: diffTrack\n}","\nvar _ = require('../util');\n\nvar dconst = require('../const').DIFF\nvar ADD_ALL = dconst.ADD_ALL\nvar REMOVE_ALL = dconst.REMOVE_ALL\n\n\n// tracked  ls tracked\nfunction diffTrack( newArr, oldArr, keyOf  ){\n\n  var olen = oldArr.length;\n  var nlen = newArr.length;\n\n\n  var steps = [];\n  var ret = {\n    isTrack: true,\n    steps:steps\n  }\n\n  // keyOfitem\n  // true  \n  // false  \n  if( !_.simpleDiff(newArr, oldArr) ) return ret;\n\n  ret.dirty = true;\n\n  if( olen && !nlen ) { // \n    createStep( steps, 0,0,olen );\n    return ret\n  }\n  if(nlen && !olen){ //\n    createStep(steps, 1,0,nlen);\n    return ret\n  }\n\n  // groups\n  var substitute = _.slice( oldArr );\n  var newTrack = getTrackInfo( newArr, keyOf );\n  var oldTrack = getTrackInfo( oldArr, keyOf );\n\n  var newTrackMap = newTrack.trackMap;\n  var oldTrackMap = oldTrack.trackMap;\n\n  var oldRemoved = {};\n\n  // DOM\n\n  // i  \n  // j \n  var untrackIndex = 0, \n    oldUntracked = oldTrack.untrack, \n    oldUntrackedLength = oldUntracked.length;\n\n  // @FIXIT, keykey\n  // untraked, \n  if(oldUntrackedLength){\n    while(oldUntrackedLength--){\n      var oidx = oldUntracked[oldUntrackedLength];\n      remove( substitute, steps, oldUntracked[ oldUntrackedLength ] );\n    }\n  }\n\n  var len = substitute.length;\n  for(var i =0; i<len ;i++){\n    var oldItem = substitute[i];\n    var oldKey = keyOf( oldItem);\n\n    // \n    if( !newTrackMap.hasOwnProperty(oldKey) ){\n      oldRemoved[ oldKey ] = oldTrackMap[ oldKey ]\n      remove( substitute, steps, i );\n      i--;\n      len--;\n    }\n    \n  }\n\n\n  var jlen = newArr.length;\n  // i old index\n  // j new index\n  var i = 0, j = 0;\n\n  while( j < jlen  ){\n\n    //@TODO key\n    if(i >= substitute.length){\n      insert( substitute, steps, i, 1 );\n      i++;\n      j++;\n      continue\n    }\n    var oldKey = keyOf( substitute[i] );\n\n\n    var item = newArr[ j ];\n    var key = keyOf( item );\n\n    if( key === oldKey ){\n      i++; j++;\n      continue;\n    }else{\n      //\n      insert( substitute, steps, i, 1 );\n      i++;\n      j++;\n      continue;\n    }\n\n  }\n  // j\n\n  var slen = substitute.length;\n  if( j < slen ){\n    createStep(steps, 0, j, slen - j )\n    for(var k = j; k < slen; k++ ){\n      var oldKey = keyOf( substitute[k]);\n      oldRemoved[oldKey] = oldTrackMap[oldKey];\n    }\n  }\n  // apply\n  ret.oldKeyMap = oldRemoved;\n\n  return ret;\n}\n\n\nfunction createStep(steps ,mode, index, len, oldIndex){\n  len = len || 1;\n  var last = steps[steps.length-1];\n  if(last && last.mode === mode  ){\n    if( (mode === 0 && last.index === index) ||\n        (mode === 1 && last.index + last.len === index)\n      ){\n      last.len++;\n      return steps;\n    }\n    \n  }\n  steps.push( {\n    mode: mode,\n    index:index,\n    len: len\n  } );\n  return steps;\n\n}\n\nfunction insert( substitute, steps ,index, len){\n\n  createStep(steps, 1, index, len, steps)\n  substitute.splice(index, 0, null)\n}\n\nfunction remove( substitute, steps ,index, len ){\n  createStep(steps, 0, index, len)\n  substitute.splice(index, 1);\n}\n\n// convert <Array>list to \n// <Object>{ trackMap: <Map> trackMap, unmark: <Array> indextrackPair}\n\nfunction getTrackInfo( list, keyOf ){\n\n  var untrack = [], trackMap = {};\n\n  for(var i = 0, len = list.length; i < len ; i++){\n\n    var item = list[i];\n    var trackKey = keyOf(list[i]);\n\n    // can be stringify\n    if( !trackMap.hasOwnProperty(trackKey) ){\n\n      trackMap[ trackKey ] = i\n    }else{\n\n      untrack.push( i )\n    }\n  }\n\n  return {\n    untrack: untrack,\n    trackMap: trackMap\n  }\n}\n\nfunction isTrackable( key ){\n  var type = typeof key;\n  return type !== 'object' && type !== 'undefined';\n}\n\n\nmodule.exports = diffTrack","var _ = require('./util');\nvar combine = require('./helper/combine')\n\nfunction Group(list){\n  this.children = list || [];\n}\n\n\nvar o = _.extend(Group.prototype, {\n  destroy: function(first){\n    combine.destroy(this.children, first);\n    if(this.ondestroy) this.ondestroy();\n    this.children = null;\n  },\n  get: function(i){\n    return this.children[i]\n  },\n  push: function(item){\n    this.children.push( item );\n  }\n})\no.inject = o.$inject = combine.inject\n\n\n\nmodule.exports = Group;\n\n\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","// shim for es5\nvar slice = [].slice;\nvar tstr = ({}).toString;\n\nfunction extend(o1, o2 ){\n  for(var i in o2) if( o1[i] === undefined){\n    o1[i] = o2[i]\n  }\n  return o2;\n}\n\n\nmodule.exports = function(){\n  // String proto ;\n  extend(String.prototype, {\n    trim: function(){\n      return this.replace(/^\\s+|\\s+$/g, '');\n    }\n  });\n\n\n  // Array proto;\n  extend(Array.prototype, {\n    indexOf: function(obj, from){\n      from = from || 0;\n      for (var i = from, len = this.length; i < len; i++) {\n        if (this[i] === obj) return i;\n      }\n      return -1;\n    },\n    // polyfill from MDN \n    // https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach\n    forEach: function(callback, ctx){\n      var k = 0;\n\n      // 1. Let O be the result of calling ToObject passing the |this| value as the argument.\n      var O = Object(this);\n\n      var len = O.length >>> 0; \n\n      if ( typeof callback !== \"function\" ) {\n        throw new TypeError( callback + \" is not a function\" );\n      }\n\n      // 7. Repeat, while k < len\n      while( k < len ) {\n\n        var kValue;\n\n        if ( k in O ) {\n\n          kValue = O[ k ];\n\n          callback.call( ctx, kValue, k, O );\n        }\n        k++;\n      }\n    },\n    // @deprecated\n    //  will be removed at 0.5.0\n    filter: function(fun, context){\n\n      var t = Object(this);\n      var len = t.length >>> 0;\n      if (typeof fun !== \"function\")\n        throw new TypeError();\n\n      var res = [];\n      for (var i = 0; i < len; i++)\n      {\n        if (i in t)\n        {\n          var val = t[i];\n          if (fun.call(context, val, i, t))\n            res.push(val);\n        }\n      }\n\n      return res;\n    }\n  });\n\n  // Function proto;\n  extend(Function.prototype, {\n    bind: function(context){\n      var fn = this;\n      var preArgs = slice.call(arguments, 1);\n      return function(){\n        var args = preArgs.concat(slice.call(arguments));\n        return fn.apply(context, args);\n      }\n    },\n    //@FIXIT\n    __bind__: function(context){\n      if(this.__binding__){\n        return this.__binding__\n      }else{\n        return (this.__binding__ = this.bind.apply(this, arguments))\n      }\n    }\n  })\n  \n  // Array\n  extend(Array, {\n    isArray: function(arr){\n      return tstr.call(arr) === \"[object Array]\";\n    }\n  })\n}\n\n","// http://stackoverflow.com/questions/1354064/how-to-convert-characters-to-html-entities-using-plain-javascript\nvar entities = {\n  'quot':34, \n  'amp':38, \n  'apos':39, \n  'lt':60, \n  'gt':62, \n  'nbsp':160, \n  'iexcl':161, \n  'cent':162, \n  'pound':163, \n  'curren':164, \n  'yen':165, \n  'brvbar':166, \n  'sect':167, \n  'uml':168, \n  'copy':169, \n  'ordf':170, \n  'laquo':171, \n  'not':172, \n  'shy':173, \n  'reg':174, \n  'macr':175, \n  'deg':176, \n  'plusmn':177, \n  'sup2':178, \n  'sup3':179, \n  'acute':180, \n  'micro':181, \n  'para':182, \n  'middot':183, \n  'cedil':184, \n  'sup1':185, \n  'ordm':186, \n  'raquo':187, \n  'frac14':188, \n  'frac12':189, \n  'frac34':190, \n  'iquest':191, \n  'Agrave':192, \n  'Aacute':193, \n  'Acirc':194, \n  'Atilde':195, \n  'Auml':196, \n  'Aring':197, \n  'AElig':198, \n  'Ccedil':199, \n  'Egrave':200, \n  'Eacute':201, \n  'Ecirc':202, \n  'Euml':203, \n  'Igrave':204, \n  'Iacute':205, \n  'Icirc':206, \n  'Iuml':207, \n  'ETH':208, \n  'Ntilde':209, \n  'Ograve':210, \n  'Oacute':211, \n  'Ocirc':212, \n  'Otilde':213, \n  'Ouml':214, \n  'times':215, \n  'Oslash':216, \n  'Ugrave':217, \n  'Uacute':218, \n  'Ucirc':219, \n  'Uuml':220, \n  'Yacute':221, \n  'THORN':222, \n  'szlig':223, \n  'agrave':224, \n  'aacute':225, \n  'acirc':226, \n  'atilde':227, \n  'auml':228, \n  'aring':229, \n  'aelig':230, \n  'ccedil':231, \n  'egrave':232, \n  'eacute':233, \n  'ecirc':234, \n  'euml':235, \n  'igrave':236, \n  'iacute':237, \n  'icirc':238, \n  'iuml':239, \n  'eth':240, \n  'ntilde':241, \n  'ograve':242, \n  'oacute':243, \n  'ocirc':244, \n  'otilde':245, \n  'ouml':246, \n  'divide':247, \n  'oslash':248, \n  'ugrave':249, \n  'uacute':250, \n  'ucirc':251, \n  'uuml':252, \n  'yacute':253, \n  'thorn':254, \n  'yuml':255, \n  'fnof':402, \n  'Alpha':913, \n  'Beta':914, \n  'Gamma':915, \n  'Delta':916, \n  'Epsilon':917, \n  'Zeta':918, \n  'Eta':919, \n  'Theta':920, \n  'Iota':921, \n  'Kappa':922, \n  'Lambda':923, \n  'Mu':924, \n  'Nu':925, \n  'Xi':926, \n  'Omicron':927, \n  'Pi':928, \n  'Rho':929, \n  'Sigma':931, \n  'Tau':932, \n  'Upsilon':933, \n  'Phi':934, \n  'Chi':935, \n  'Psi':936, \n  'Omega':937, \n  'alpha':945, \n  'beta':946, \n  'gamma':947, \n  'delta':948, \n  'epsilon':949, \n  'zeta':950, \n  'eta':951, \n  'theta':952, \n  'iota':953, \n  'kappa':954, \n  'lambda':955, \n  'mu':956, \n  'nu':957, \n  'xi':958, \n  'omicron':959, \n  'pi':960, \n  'rho':961, \n  'sigmaf':962, \n  'sigma':963, \n  'tau':964, \n  'upsilon':965, \n  'phi':966, \n  'chi':967, \n  'psi':968, \n  'omega':969, \n  'thetasym':977, \n  'upsih':978, \n  'piv':982, \n  'bull':8226, \n  'hellip':8230, \n  'prime':8242, \n  'Prime':8243, \n  'oline':8254, \n  'frasl':8260, \n  'weierp':8472, \n  'image':8465, \n  'real':8476, \n  'trade':8482, \n  'alefsym':8501, \n  'larr':8592, \n  'uarr':8593, \n  'rarr':8594, \n  'darr':8595, \n  'harr':8596, \n  'crarr':8629, \n  'lArr':8656, \n  'uArr':8657, \n  'rArr':8658, \n  'dArr':8659, \n  'hArr':8660, \n  'forall':8704, \n  'part':8706, \n  'exist':8707, \n  'empty':8709, \n  'nabla':8711, \n  'isin':8712, \n  'notin':8713, \n  'ni':8715, \n  'prod':8719, \n  'sum':8721, \n  'minus':8722, \n  'lowast':8727, \n  'radic':8730, \n  'prop':8733, \n  'infin':8734, \n  'ang':8736, \n  'and':8743, \n  'or':8744, \n  'cap':8745, \n  'cup':8746, \n  'int':8747, \n  'there4':8756, \n  'sim':8764, \n  'cong':8773, \n  'asymp':8776, \n  'ne':8800, \n  'equiv':8801, \n  'le':8804, \n  'ge':8805, \n  'sub':8834, \n  'sup':8835, \n  'nsub':8836, \n  'sube':8838, \n  'supe':8839, \n  'oplus':8853, \n  'otimes':8855, \n  'perp':8869, \n  'sdot':8901, \n  'lceil':8968, \n  'rceil':8969, \n  'lfloor':8970, \n  'rfloor':8971, \n  'lang':9001, \n  'rang':9002, \n  'loz':9674, \n  'spades':9824, \n  'clubs':9827, \n  'hearts':9829, \n  'diams':9830, \n  'OElig':338, \n  'oelig':339, \n  'Scaron':352, \n  'scaron':353, \n  'Yuml':376, \n  'circ':710, \n  'tilde':732, \n  'ensp':8194, \n  'emsp':8195, \n  'thinsp':8201, \n  'zwnj':8204, \n  'zwj':8205, \n  'lrm':8206, \n  'rlm':8207, \n  'ndash':8211, \n  'mdash':8212, \n  'lsquo':8216, \n  'rsquo':8217, \n  'sbquo':8218, \n  'ldquo':8220, \n  'rdquo':8221, \n  'bdquo':8222, \n  'dagger':8224, \n  'Dagger':8225, \n  'permil':8240, \n  'lsaquo':8249, \n  'rsaquo':8250, \n  'euro':8364\n}\n\n\n\nmodule.exports  = entities;","// create a simple finite state machine\nfunction createFSM() {\n  return {\n    _stack: [],\n    enter: function(state) {\n      this._stack.push(state);\n      return this;\n    },\n    leave: function(state) {\n      var stack = this._stack;\n      // if state is falsy or state equals to last item in stack\n      if(!state || stack[stack.length-1] === state) {\n        stack.pop();\n      }\n      return this;\n    },\n    get: function() {\n      var stack = this._stack;\n      return stack[stack.length - 1];\n    },\n    all: function() {\n      return this._stack;\n    },\n    is: function(state) {\n      var stack = this._stack;\n      return stack[stack.length - 1] === state\n    }\n  }\n}\n\nmodule.exports = createFSM;\n","// (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n// Backbone may be freely distributed under the MIT license.\n// For all details and documentation:\n// http://backbonejs.org\n\n// klass: a classical JS OOP faade\n// https://github.com/ded/klass\n// License MIT (c) Dustin Diaz 2014\n  \n// inspired by backbone's extend and klass\nvar _ = require(\"../util\"),\n  fnTest = /xy/.test(function(){\"xy\";}) ? /\\bsupr\\b/:/.*/,\n  isFn = function(o){return typeof o === \"function\"};\n\nvar hooks = {\n  events: function( propertyValue, proto ){\n    var eventListeners = proto._eventListeners || [];\n    var normedEvents = _.normListener(propertyValue);\n\n    if(normedEvents.length) {\n      proto._eventListeners = eventListeners.concat( normedEvents );\n    }\n    delete proto.events ;\n  }\n}\n\n\nfunction wrap( k, fn, supro ) {\n  return function () {\n    var tmp = this.supr;\n    this.supr = supro[k];\n    var ret = fn.apply(this, arguments);\n    this.supr = tmp;\n    return ret;\n  }\n}\n\nfunction process( what, o, supro ) {\n  for ( var k in o ) {\n    if (o.hasOwnProperty(k)) {\n      if(hooks.hasOwnProperty(k)) {\n        hooks[k](o[k], what, supro)\n      }\n      what[k] = isFn( o[k] ) && isFn( supro[k] ) && \n        fnTest.test( o[k] ) ? wrap(k, o[k], supro) : o[k];\n    }\n  }\n}\n\n// if the property is [\"events\", \"data\", \"computed\"] , we should merge them\nvar merged = [\"data\", \"computed\"], mlen = merged.length;\nmodule.exports = function extend(o){\n  o = o || {};\n  var supr = this, proto,\n    supro = supr && supr.prototype || {};\n\n  if(typeof o === 'function'){\n    proto = o.prototype;\n    o.implement = implement;\n    o.extend = extend;\n    return o;\n  } \n  \n  function fn() {\n    supr.apply(this, arguments);\n  }\n\n  proto = _.createProto(fn, supro);\n\n  function implement(o){\n    // we need merge the merged property\n    var len = mlen;\n    for(;len--;){\n      var prop = merged[len];\n      if(proto[prop] && o.hasOwnProperty(prop) && proto.hasOwnProperty(prop)){\n        _.extend(proto[prop], o[prop], true) \n        delete o[prop];\n      }\n    }\n\n\n    process(proto, o, supro); \n    return this;\n  }\n\n\n\n  fn.implement = implement\n  fn.implement(o)\n  if(supr.__after__) supr.__after__.call(fn, supr, o);\n  fn.extend = extend;\n  return fn;\n}\n\n","var diffArray = require('./helper/diff').diffArray;\nvar combine = require('./helper/combine');\nvar animate = require(\"./helper/animate\");\nvar Parser = require('./parser/Parser');\nvar node = require(\"./parser/node\");\nvar Group = require('./group');\nvar dom = require(\"./dom\");\nvar _ = require('./util');\nvar consts = require('./const');\nvar OPTIONS = consts.OPTIONS;\nvar ERROR = consts.ERROR;\nvar MSG = consts.MSG;\nvar nodeCursor = require('./helper/cursor');\nvar config = require('./config')\nvar shared = require('./render/shared');\nvar dconst = require('./const').DIFF\n\n\n\nvar walkers = module.exports = {};\n\n// used in walkers.list\n// remove block in group\n\nwalkers.list = function(ast, options){\n\n  var Regular = walkers.Regular;\n  var placeholder = document.createComment(\"Regular list\"),\n    namespace = options.namespace,\n    extra = options.extra;\n\n  var self = this;\n  var group = new Group([placeholder]);\n  var children = group.children;\n\n  var indexName = ast.variable + '_index';\n  var keyName = ast.variable + '_key';\n  var variable = ast.variable;\n  var alternate = ast.alternate;\n  var track = ast.track, keyOf, extraObj;\n  var cursor = options.cursor;\n\n  insertPlaceHolder(placeholder, cursor)\n\n\n  if( track && track !== true ){\n\n    track = this._touchExpr(track);\n    extraObj = _.createObject(extra);\n    keyOf = function( item, index ){\n      extraObj[ variable ] = item;\n      // @FIX keyName\n      return track.get( self, extraObj );\n    }\n  }\n\n  function removeRange(index, rlen, children, oldKeyMap){\n    for(var j = 1; j <= rlen; j++){ //removed\n      var removed = children[ index + j ];\n      if( oldKeyMap  ){\n        var mayBeReuse = keyOf(removed.data[variable]);\n        // \n        if(typeof oldKeyMap[mayBeReuse] !== 'undefined') {\n          if(oldKeyMap[mayBeReuse]!==null){//hasn't already moved\n            removed.inject(false);\n          }\n          continue;\n        }\n      }\n      removed.destroy(true);\n    }\n    children.splice(index+1, rlen);\n  }\n\n  function addRange(index, end, newList, rawNewValue, oldKeyMap){\n    for(var o = index; o < end; o++){ //add\n      // prototype inherit\n      var item = newList[o];\n      var section = null;\n\n      if(oldKeyMap){\n        var key = keyOf( item );\n        section = oldKeyMap[key];\n        // \n        if(section) oldKeyMap[key] = null;\n        // \n      }\n      var hasReusedSection = !!section;\n\n      if(!hasReusedSection){\n        var data = _.createObject(extra);\n        updateTarget(data, o, item, rawNewValue);\n        section = self.$compile(ast.body, {\n          extra: data,\n          namespace:namespace,\n          record: true,\n          outer: options.outer,\n          cursor: cursor\n        })\n        section.data = data;\n      }else{\n        // means track reused section\n        updateTarget(section.data, o, item)\n      }\n\n\n      // autolink\n      var insert =  combine.last(group.get(o));\n      if(insert.parentNode && !(cursor && cursor.node) ){\n        // hasReusedSection\n        (hasReusedSection?dom:animate).inject(combine.node(section),insert, 'after');\n      }\n      // insert.parentNode.insertBefore(combine.node(section), insert.nextSibling);\n      children.splice( o + 1 , 0, section);\n    }\n  }\n\n  function updateTarget(target, index, item, rawNewValue){\n    target[ indexName ] = index;\n    if( rawNewValue ){\n      target[ keyName ] = item;\n      target[ variable ] = rawNewValue[ item ];\n    }else{\n      target[ variable ] = item;\n      target[keyName] = null\n    }\n  }\n\n\n  function updateRange(start, end, newList, rawNewValue){\n    for(var k = start; k < end; k++){ // no change\n      var sect = group.get( k + 1 ), item = newList[ k ];\n      updateTarget(sect.data, k, item, rawNewValue);\n    }\n  }\n\n  function updateLD(newList, oldList, steps, rawNewValue ){\n\n    var cur = placeholder;\n    var m = 0, len = newList.length;\n\n    if(!steps && (len !==0 || oldList.length !==0)  ){\n      steps = diffArray(newList, oldList, true);\n    }\n\n    if(!steps || !steps.length) return;\n      \n    for(var i = 0; i < steps.length; i++){ //init\n\n      var splice = steps[i];\n      var index = splice.index; // beacuse we use a comment for placeholder\n      var removed = splice.removed;\n      var add = splice.add;\n      var rlen = removed.length;\n      // update\n      updateRange(m, index, newList, rawNewValue);\n\n      removeRange( index ,rlen, children)\n\n      addRange(index, index+add, newList, rawNewValue)\n\n      m = index + add - rlen;\n      m  = m < 0? 0 : m;\n\n    }\n    if(m < len){\n      for(var i = m; i < len; i++){\n        var pair = group.get(i + 1);\n        pair.data[indexName] = i;\n        // @TODO fix keys\n      }\n    }\n  }\n\n  // if the track is constant test.\n  function updateSimple(newList, oldList, rawNewValue ){\n\n    var nlen = newList.length;\n    var olen = oldList.length;\n    var mlen = Math.min(nlen, olen);\n\n    updateRange(0, mlen, newList, rawNewValue)\n    if(nlen < olen){ //need add\n      removeRange(nlen, olen-nlen, children);\n    }else if(nlen > olen){\n      addRange(olen, nlen, newList, rawNewValue);\n    }\n  }\n\n\n\n  // oldKeyMap: \n  function updateTrack( newList, oldList, steps,  rawNewValue, oldKeyMap ){\n    \n    for(var i =0, slen = steps.length; i < slen ;i++){\n      var step = steps[i];\n      switch( step.mode){\n        case 0 : //remove\n          removeRange(step.index, step.len, group.children, oldKeyMap);\n          break;\n        case 1 : //insert\n          addRange(step.index, step.index + step.len, newList, rawNewValue, oldKeyMap )\n          break;\n      }\n    }     \n    var children = group.children;\n    for(var j=1, len = children.length; j < len; j++){\n      var child = children[j];\n      if( child ){\n        child.data[variable] = newList[j-1];\n        child.data[indexName] = j-1\n      }\n    }\n\n    \n  }\n\n  function update(newValue, oldValue, steps, oldKeyMap, isSimple){\n\n    var nType = _.typeOf( newValue );\n    var oType = _.typeOf( oldValue );\n\n    var newList = getListFromValue( newValue, nType );\n    var oldList = getListFromValue( oldValue, oType );\n\n\n    var rawNewValue;\n\n\n    var nlen = newList && newList.length;\n    var olen = oldList && oldList.length;\n\n    // if previous list has , we need to remove the altnated section.\n\n    if( nType === 'object' ) rawNewValue = newValue;\n\n    if(!olen && nlen){\n      if(group.get(1)){\n        var altGroup = children.pop();\n        if(altGroup.destroy)  altGroup.destroy(true);\n      } \n      return addRange(0, nlen, newList, rawNewValue )\n    }\n    // @ {#list} {#else}\n    if( !nlen ){\n      if(olen){\n        removeRange(0, olen, group.children) \n      }\n      if(alternate && alternate.length){\n        var section = self.$compile(alternate, {\n          extra: extra,\n          record: true,\n          outer: options.outer,\n          namespace: namespace\n        })\n        children.push(section);\n        if(placeholder.parentNode){\n          animate.inject(combine.node(section), placeholder, 'after');\n        }\n      }\n      return;\n    }\n\n    if(track){\n      \n      if( track === true || (isSimple && !steps.length) ){ // track simple update\n        updateSimple( newList, oldList,  rawNewValue );\n      }else{\n        if(oldKeyMap){\n          for(var i in oldKeyMap){\n            var index= oldKeyMap[i];\n            if(children[index + 1]) oldKeyMap[i]= children[index + 1];\n          }\n        }\n        updateTrack( newList, oldList , steps, rawNewValue, oldKeyMap);\n      }\n      \n    }else{\n      updateLD( newList, oldList, steps, rawNewValue );\n    }\n\n  }\n\n  this.$watch(ast.sequence, update, { \n    init: true, \n    keyOf: keyOf,\n    diff: track!==true,\n    deep: true\n  });\n  //@FIXIT, beacuse it is sync process, we can\n  cursor = null;\n  return group;\n}\n\n\n\n// {#include } or {#inc template}\nwalkers.template = function(ast, options){\n  var content = ast.content, compiled;\n  var placeholder = document.createComment('inlcude');\n  var compiled, namespace = options.namespace, extra = options.extra;\n  var group = new Group([placeholder]);\n  var cursor = options.cursor;\n\n  insertPlaceHolder(placeholder, cursor);\n\n  if(content){\n    var self = this;\n    this.$watch(content, function(value){\n      var removed = group.get(1), type= typeof value;\n      if( removed){\n        removed.destroy(true);\n        group.children.pop();\n      }\n      if(!value) return;\n\n      group.push( compiled = type === 'function' ? value(cursor? {cursor: cursor}: null): self.$compile( type !== 'object'? String(value): value, {\n        record: true,\n        outer: options.outer,\n        namespace: namespace,\n        cursor: cursor,\n        extra: extra}) );\n      if(placeholder.parentNode && !cursor) {\n        compiled.$inject(placeholder, 'before')\n      }\n    }, OPTIONS.INIT);\n    cursor = null;\n  }\n  return group;\n};\n\nfunction getListFromValue(value, type){\n  return type === 'array'? value: (type === 'object'? _.keys(value) :  []);\n}\n\n\n// how to resolve this problem\nvar ii = 0;\nwalkers['if'] = function(ast, options){\n  var self = this, consequent, alternate, extra = options.extra;\n  if(options && options.element){ // attribute inteplation\n    var update = function(nvalue){\n      if(!!nvalue){\n        if(alternate) combine.destroy(alternate)\n        if(ast.consequent) consequent = self.$compile(ast.consequent, {\n          record: true,\n          element: options.element ,\n          extra:extra\n        });\n      }else{\n        if( consequent ) combine.destroy(consequent)\n        if( ast.alternate ) alternate = self.$compile(ast.alternate, {record: true, element: options.element, extra: extra});\n      }\n    }\n    this.$watch(ast.test, update, OPTIONS.FORCE);\n    return {\n      destroy: function(){\n        if(consequent) combine.destroy(consequent);\n        else if(alternate) combine.destroy(alternate);\n      }\n    }\n  }\n\n  var test, node;\n  var placeholder = document.createComment(\"Regular if\" + ii++);\n  var group = new Group();\n  group.push(placeholder);\n  var preValue = null, namespace= options.namespace;\n  var cursor = options.cursor;\n  insertPlaceHolder(placeholder, cursor)\n\n  var update = function (nvalue, old){\n    var value = !!nvalue, compiledSection;\n    if(value === preValue) return;\n    preValue = value;\n    if(group.children[1]){\n      group.children[1].destroy(true);\n      group.children.pop();\n    }\n    var curOptions = {\n      record: true,\n      outer: options.outer,\n      namespace: namespace,\n      extra: extra,\n      cursor: cursor\n    }\n    if(value){ //true\n\n      if(ast.consequent && ast.consequent.length){\n        compiledSection = self.$compile( ast.consequent , curOptions );\n      }\n    }else{ //false\n      if(ast.alternate && ast.alternate.length){\n        compiledSection = self.$compile(ast.alternate, curOptions);\n      }\n    }\n    // placeholder.parentNode && placeholder.parentNode.insertBefore( node, placeholder );\n    if(compiledSection){\n      group.push(compiledSection );\n      if(placeholder.parentNode && !cursor){\n        animate.inject(combine.node(compiledSection), placeholder, 'before');\n      }\n    }\n    cursor = null;\n    // after first mount , we need clear this flat;\n  }\n  this.$watch(ast.test, update, OPTIONS.FORCE_INIT);\n\n  return group;\n}\n\n\nwalkers._handleMountText = function(cursor, astText){\n    var node, mountNode = cursor.node;\n    // fix unused black in astText;\n    var nodeText = dom.text(mountNode);\n\n    if( nodeText === astText ){\n      node = mountNode;\n      cursor.next();\n    }else{\n      // maybe have some redundancy  blank\n      var index = nodeText.indexOf(astText);\n      if(~index){\n        node = document.createTextNode(astText);\n        dom.text( mountNode, nodeText.slice(index + astText.length) );\n        dom.inject(node, mountNode, 'before');\n      } else {\n        // if( _.blankReg.test( astText ) ){ }\n        throw Error( MSG[ERROR.UNMATCHED_AST]);\n      }\n    }\n\n    return node;\n}\n\n\nwalkers.expression = function(ast, options){\n\n  var cursor = options.cursor, node,\n    mountNode = cursor && cursor.node;\n\n  if(mountNode){\n    //@BUG: if server render &gt; in Expression will cause error\n    var astText = _.toText( this.$get(ast) );\n    node = walkers._handleMountText(cursor, astText);\n\n  }else{\n    node = document.createTextNode(\"\");\n  }\n\n  this.$watch(ast, function(newval){\n    dom.text(node, _.toText(newval));\n  }, OPTIONS.STABLE_INIT )\n  return node;\n\n}\n\n\nwalkers.text = function(ast, options){\n  var cursor = options.cursor , node;\n  var text = ast.text;\n  var astText = text.indexOf('&') !== -1? _.convertEntity(text): text;\n\n  if(cursor && cursor.node) {\n    var mountNode = cursor.node;\n    // maybe regularjs parser have some difference with html builtin parser when process  empty text\n    // @todo error report\n    if(mountNode.nodeType !== 3 ){\n\n      if( _.blankReg.test(astText) ) return {\n        code:  ERROR.UNMATCHED_AST\n      }\n\n    }else{\n      node = walkers._handleMountText( cursor, astText )\n    }\n  }\n\n\n  return node || document.createTextNode( astText );\n}\n\n\n\n\n/**\n * walkers element (contains component)\n */\nwalkers.element = function(ast, options){\n\n  var attrs = ast.attrs, self = this,\n    Constructor = this.constructor,\n    children = ast.children,\n    namespace = options.namespace,\n    extra = options.extra,\n    cursor = options.cursor,\n    tag = ast.tag,\n    Component = Constructor.component(tag),\n    ref, group, element, mountNode;\n    \n\n\n\n  if( tag === 'r-content' ){\n    _.log('r-content is deprecated, use {#inc this.$body} instead (`{#include}` as same)', 'warn');\n    return this.$body && this.$body(cursor? {cursor: cursor}: null);\n  }\n\n\n  // if inititalized with mount mode, sometime, \n  // browser will ignore the whitespace between node, and sometimes it won't\n  if(cursor ){\n    // textCOntent with Empty text\n    if(cursor.node && cursor.node.nodeType === 3){\n      if(_.blankReg.test(dom.text(cursor.node) ) ) cursor.next();\n      else if( !Component && tag !== 'r-component' ) {\n        throw Error(MSG[ERROR.UNMATCHED_AST]);\n      } \n    }\n  }\n  \n  if(Component || tag === 'r-component'){\n    options.Component = Component;\n    return walkers.component.call(this, ast, options)\n  }\n\n  if(cursor) mountNode = cursor.node;\n\n  if(tag === 'svg') namespace = \"svg\";\n  // @Deprecated: may be removed in next version, use {#inc } instead\n\n  if( children && children.length && !hasStopDirective( attrs ) ){\n\n    var subMountNode = mountNode? mountNode.firstChild: null;\n    group = this.$compile(children, {\n      extra: extra ,\n      outer: options.outer,\n      namespace: namespace,\n      cursor: nodeCursor( subMountNode, mountNode )\n    });\n  }\n\n\n  if(mountNode){\n    element = mountNode\n    cursor.next();\n  }else{\n    element = dom.create( tag, namespace, attrs);\n  }\n\n  if(group && !_.isVoidTag( tag ) && !mountNode ){ // if not init with mount mode\n    animate.inject( combine.node( group ) , element)\n  }\n\n  // fix tag ast, some infomation only avaliable at runtime (directive etc..)\n  _.fixTagAST(ast, Constructor)\n\n  var destroies = walkAttributes.call(this, attrs, element, extra);\n\n  return {\n    type: \"element\",\n    group: group,\n    node: function(){\n      return element;\n    },\n    last: function(){\n      return element;\n    },\n    destroy: function(first){\n      if( first ){\n        animate.remove( element, group? group.destroy.bind( group ): _.noop );\n      }else if(group) {\n        group.destroy();\n      }\n      // destroy ref\n      if( destroies.length ) {\n        destroies.forEach(function( destroy ){\n          if( destroy ){\n            if( typeof destroy.destroy === 'function' ){\n              destroy.destroy()\n            }else{\n              destroy();\n            }\n          }\n        })\n      }\n    }\n  }\n}\n\n\n\nwalkers.component = function(ast, options){\n  var attrs = ast.attrs,\n    Component = options.Component,\n    cursor = options.cursor,\n    Constructor = this.constructor,\n    isolate,\n    extra = options.extra,\n    namespace = options.namespace,\n    refDirective = walkers.Regular.directive('ref'),\n    ref, self = this, is;\n\n  var data = {}, events;\n\n  for(var i = 0, len = attrs.length; i < len; i++){\n    var attr = attrs[i];\n    // consider disabled   equlasto  disabled={true}\n\n    shared.prepareAttr( attr, attr.name === 'ref' && refDirective );\n\n    var value = this._touchExpr(attr.value === undefined? true: attr.value);\n    if(value.constant) value = attr.value = value.get(this);\n    if(attr.value && attr.value.constant === true){\n      value = value.get(this);\n    }\n    var name = attr.name;\n    if(!attr.event){\n      var etest = name.match(_.eventReg);\n      // event: 'nav'\n      if(etest) attr.event = etest[1];\n    }\n\n\n    // @deprecated  use \n    if(attr.mdf === 'cmpl'){\n      value = _.getCompileFn(value, this, {\n        record: true,\n        namespace:namespace,\n        extra: extra,\n        outer: options.outer\n      })\n    }\n\n    // title = {~ <h2>{name}</h2>}\n    if(value && value.type === 'body'){\n      value = _.getCompileFn(value.body, this, {\n        record: true,\n        namespace: namespace,\n        extra: extra,\n        outer: options.outer\n      }) \n    }\n\n    // @if is r-component . we need to find the target Component\n    if(name === 'is' && !Component){\n      is = value;\n      var componentName = this.$get(value, true);\n      Component = Constructor.component(componentName)\n      if(typeof Component !== 'function') throw new Error(\"component \" + componentName + \" has not registed!\");\n    }\n    // bind event proxy\n    var eventName;\n    if(eventName = attr.event){\n      events = events || {};\n      events[eventName] = _.handleEvent.call(this, value, eventName);\n      continue;\n    }else {\n      name = attr.name = _.camelCase( name );\n    }\n\n    if(!value || value.type !== 'expression'){\n      data[name] = value;\n    }else{\n      data[name] = value.get(self);\n    }\n    if( name === 'ref'  && value != null){\n      ref = value\n    }\n    if( name === 'isolate'){\n      // 1: stop: composite -> parent\n      // 2. stop: composite <- parent\n      // 3. stop 1 and 2: composite <-> parent\n      // 0. stop nothing (defualt)\n      isolate = value.type === 'expression'? value.get(self): parseInt(value === true? 3: value, 10);\n      data.isolate = isolate;\n    }\n  }\n\n  var definition = {\n    data: data,\n    events: events,\n    $parent: (isolate & 2)? null: this,\n    $root: this.$root,\n    $outer: options.outer,\n    _body: {\n      ctx: this,\n      ast: ast.children\n    }\n  }\n  var options = {\n    namespace: namespace,\n    cursor: cursor,\n    extra: options.extra\n  }\n\n\n  var component = new Component(definition, options), reflink;\n\n\n  if(ref && this.$refs){\n    reflink = refDirective.link;\n    var refDestroy = reflink.call(this, component, ref);\n    component.$on('$destroy', refDestroy);\n  }\n  for(var i = 0, len = attrs.length; i < len; i++){\n    var attr = attrs[i];\n    var value = attr.value||true;\n    var name = attr.name;\n    // need compiled\n    if(value.type === 'expression' && !attr.event){\n      value = self._touchExpr(value);\n      // use bit operate to control scope\n      if( !(isolate & 2) )\n        this.$watch(value, (function(name, val){\n          this.data[name] = val;\n        }).bind(component, name), OPTIONS.SYNC)\n      if( value.set && !(isolate & 1 ) )\n        // sync the data. it force the component don't trigger attr.name's first dirty echeck\n        component.$watch(name, self.$update.bind(self, value), OPTIONS.INIT);\n    }\n  }\n  if(is && is.type === 'expression'  ){\n    var group = new Group();\n    group.push(component);\n    this.$watch(is, function(value){\n      // found the new component\n      var Component = Constructor.component(value);\n      if(!Component) throw new Error(\"component \" + value + \" has not registed!\");\n      var ncomponent = new Component(definition);\n      var component = group.children.pop();\n      group.push(ncomponent);\n      ncomponent.$inject(combine.last(component), 'after')\n      component.destroy();\n      // @TODO  if component changed , we need update ref\n      if(ref){\n        var refName = ref.get? ref.get(this): ref;\n        self.$refs[refName] = ncomponent;\n      }\n    }, OPTIONS.SYNC)\n    return group;\n  }\n  return component;\n}\n\nfunction walkAttributes(attrs, element, extra){\n  var bindings = []\n  for(var i = 0, len = attrs.length; i < len; i++){\n    var binding = this._walk(attrs[i], {element: element, fromElement: true, attrs: attrs, extra: extra})\n    if(binding) bindings.push(binding);\n  }\n  return bindings;\n}\n\n\nwalkers.attribute = function(ast ,options){\n\n  var attr = ast;\n  var Component = this.constructor;\n  var name = attr.name;\n  var directive = Component.directive(name);\n\n  shared.prepareAttr(ast, directive);\n\n  var value = attr.value || \"\";\n  var constant = value.constant;\n  var element = options.element;\n  var self = this;\n\n\n\n  value = this._touchExpr(value);\n\n  if(constant) value = value.get(this);\n\n  if(directive && directive.link){\n    var extra = {\n      attrs: options.attrs,\n      param: _.getParamObj(this, attr.param)\n    }\n    var binding = directive.link.call(self, element, value, name, extra);\n    // if update has been passed in , we will  automately watch value for user\n    if( typeof directive.update === 'function'){\n      if(_.isExpr(value)){\n        this.$watch(value, function(val, old){\n          directive.update.call(self, element, val, old, extra);\n        })\n      }else{\n        directive.update.call(self, element, value, undefined, extra );\n      }\n    }\n    if(typeof binding === 'function') binding = {destroy: binding};\n    return binding;\n  } else{\n    if(value.type === 'expression' ){\n      this.$watch(value, function(nvalue, old){\n        dom.attr(element, name, nvalue);\n      }, OPTIONS.STABLE_INIT);\n    }else{\n      if(_.isBooleanAttr(name)){\n        dom.attr(element, name, true);\n      }else{\n        dom.attr(element, name, value);\n      }\n    }\n    if(!options.fromElement){\n      return {\n        destroy: function(){\n          dom.attr(element, name, null);\n        }\n      }\n    }\n  }\n}\n\nfunction insertPlaceHolder(placeholder, cursor){\n  if(cursor){\n    if(cursor.node) dom.inject( placeholder , cursor.node,'before')\n    else if(cursor.prev) {\n      dom.inject( placeholder , cursor.prev,'after')\n      cursor.prev = placeholder;\n    }else if(cursor.parent){\n      dom.inject( placeholder , cursor.parent)\n      cursor.prev = placeholder\n    }\n  }\n}\n\n\n// @FIXIT\nfunction hasStopDirective(attrs){\n  for( var i = attrs.length; i--; ){\n    var attr = attrs[i];\n    if(attr.name === 'r-html') return true;\n  }\n}\n","// simplest event emitter 60 lines\n// ===============================\nvar _ = require(\"../util.js\");\nvar fallbackEvent = {\n  destroy: '$destroy',\n  update: '$update',\n  init: '$init',\n  config: '$config'\n}\n\n// to fix 0.2.x version event\n// map init to $init;\n// @FIXIT after version 1.0\nfunction fix(type){\n  return fallbackEvent[type] || type\n}\nvar API = {\n  $on: function(event, fn, desc) {\n    if(typeof event === \"object\" && event){\n      for (var i in event) {\n        this.$on(i, event[i], fn);\n      }\n    }else{\n      desc = desc || {};\n      // @patch: for list\n      var context = this;\n      event = fix(event);\n      var handles = context._handles || (context._handles = {}),\n        calls = handles[event] || (handles[event] = []);\n      var realFn;\n      if(desc.once){\n        realFn = function(){\n          fn.apply( this, arguments )\n          this.$off(event, fn);\n        }\n        // @FIX: if  same fn\n        fn.real = realFn;\n      }\n      calls.push( realFn || fn );\n    }\n    return this;\n  },\n  $off: function(event, fn) {\n    var context = this;\n    if(!context._handles) return;\n    if(!event) this._handles = {};\n    var handles = context._handles,\n      calls;\n\n    event = fix(event);\n    if (calls = handles[event]) {\n      if (!fn) {\n        handles[event] = [];\n        return context;\n      }\n      fn = fn.real || fn;\n      for (var i = 0, len = calls.length; i < len; i++) {\n        if (fn === calls[i]) {\n          calls.splice(i, 1);\n          return context;\n        }\n      }\n    }\n    return context;\n  },\n  // bubble event\n  $emit: function(event){\n    // @patch: for list\n    var context = this;\n    var handles = context._handles, calls, args, type;\n    if(!event) return;\n    var args = _.slice(arguments, 1);\n    var type = fix(event);\n\n    if(!handles) return context;\n    if (!(calls = handles[type])) return context;\n\n    if(calls.length > 1){ // handle, when first is off the event\n      calls = calls.slice();\n    }\n    \n    for (var i = 0, len = calls.length; i < len; i++) {\n      if(typeof calls[i] === 'function') calls[i].apply(context, args)\n    }\n    return context;\n  },\n  // capture  event\n  $once: function(event, fn){\n    var args = _.slice(arguments);\n    args.push({once: true})\n    return this.$on.apply(this, args);\n  }\n}\n// container class\nfunction Event() {}\n_.extend(Event.prototype, API)\n\nEvent.mixTo = function(obj){\n  obj = typeof obj === \"function\" ? obj.prototype : obj;\n  _.extend(obj, API)\n}\nmodule.exports = Event;\n","var _ = require('../util');\nvar parseExpression = require('./parse').expression;\nvar diff = require('./diff');\nvar diffTrack = require('./diffTrack');\nvar diffArray = diff.diffArray;\nvar diffObject = diff.diffObject;\n\nfunction Watcher(){}\n\nvar methods = {\n  $watch: function(expr, fn, options){\n    var get, once, test, rlen, isStable = false, extra = this.__ext__; //records length\n    if(!this._watchers) this._watchers = [];\n    if(!this._watchersForStable) this._watchersForStable = [];\n\n    options = options || {};\n    if(options === true){\n       options = { deep: true }\n    }\n    var uid = _.uid('w_');\n    if(Array.isArray(expr)){\n      var tests = [];\n      for(var i = 0,len = expr.length; i < len; i++){\n          tests.push(this.$expression(expr[i]).get)\n      }\n      var prev = [];\n      test = function(context){\n        var equal = true;\n        for(var i =0, len = tests.length; i < len; i++){\n          var splice = tests[i](context, extra);\n          if(!_.equals(splice, prev[i])){\n             equal = false;\n             prev[i] = splice;//_.clone(splice);\n          }\n        }\n        return equal? false: prev;\n      }\n    }else{\n      if(typeof expr === 'function'){\n        get = expr.bind(this);      \n      }else{\n        expr = this.$expression(expr);\n        if(_.isExpr(expr)) {\n          get = expr.get;\n          once = expr.once;\n        } else {\n          get = function(){return expr};\n          once = true;\n          isStable = true;\n        }\n      }\n    }\n\n    var watcher = {\n      id: uid, \n      get: get, \n      fn: fn, \n      once: once, \n      force: options.force,\n      // don't use ld to resolve array diff\n      diff: options.diff,\n      keyOf: options.keyOf,\n      test: test,\n      deep: options.deep,\n      last: options.sync? get(this): options.last\n      // cache the trackInfo for list tarck.\n    }\n\n\n    this[(options.stable || isStable)? '_watchersForStable': '_watchers'].push(watcher);\n    \n    rlen = this._records && this._records.length;\n    if(rlen) this._records[rlen-1].push(watcher)\n    // init state.\n    if(options.init === true){\n      var prephase = this.$phase;\n      this.$phase = 'digest';\n      this._checkSingleWatch( watcher);\n      this.$phase = prephase;\n    }\n    return watcher;\n  },\n  $unwatch: function( watcher ){\n    if(!this._watchers || !watcher) return;\n    var watchers = this._watchers;\n    var type = typeof watcher;\n\n    if(type === 'object'){\n      var len = watcher.length;\n      if(!len){\n        watcher.removed = true\n      }else{\n        while( (len--) >= 0 ){\n          this.$unwatch(watcher[len])\n        }\n      }\n    }else if(type === 'number'){\n      var id = watcher;\n      watcher =  _.findItem( watchers, function(item){\n        return item.id === id;\n      } );\n      if(!watcher) watcher = _.findItem(this._watchersForStable, function( item ){\n        return item.id === id\n      })\n      return this.$unwatch(watcher);\n    }\n    return this;\n  },\n  $expression: function(value){\n    return this._touchExpr(parseExpression(value))\n  },\n  /**\n   * the whole digest loop ,just like angular, it just a dirty-check loop;\n   * @param  {String} path  now regular process a pure dirty-check loop, but in parse phase, \n   *                  Regular's parser extract the dependencies, in future maybe it will change to dirty-check combine with path-aware update;\n   * @return {Void}   \n   */\n\n  $digest: function(){\n    if(this.$phase === 'digest' || this._mute) return;\n    this.$phase = 'digest';\n    var dirty = false, n =0;\n    while(dirty = this._digest()){\n\n      if((++n) > 20){ // max loop\n        throw Error('there may a circular dependencies reaches')\n      }\n    }\n    // stable watch is dirty\n    var stableDirty =  this._digest(true);\n\n    if( (n > 0 || stableDirty) && this.$emit) {\n      this.$emit(\"$update\");\n      if (this.devtools) {\n        this.devtools.emit(\"flush\", this)\n      }\n    }\n    this.$phase = null;\n  },\n  // private digest logic\n  _digest: function(stable){\n    if(this._mute) return;\n    var watchers = !stable? this._watchers: this._watchersForStable;\n    var dirty = false, children, watcher, watcherDirty;\n    var len = watchers && watchers.length;\n    if(len){\n      var mark = 0, needRemoved=0;\n      for(var i =0; i < len; i++ ){\n        watcher = watchers[i];\n        var shouldRemove = !watcher ||  watcher.removed;\n        if( shouldRemove ){\n          needRemoved += 1;\n        }else{\n          watcherDirty = this._checkSingleWatch(watcher);\n          if(watcherDirty) dirty = true;\n        }\n        // remove when encounter first unmoved item or touch the end\n        if( !shouldRemove || i === len-1 ){\n          if( needRemoved ){\n            watchers.splice(mark, needRemoved );          \n            len -= needRemoved;\n            i -= needRemoved;\n            needRemoved = 0;\n          }\n          mark = i+1;\n        }\n      }\n    }\n    // check children's dirty.\n    children = this._children;\n    if(children && children.length){\n      for(var m = 0, mlen = children.length; m < mlen; m++){\n        var child = children[m];\n        if(child && child._digest(stable)) dirty = true;\n      }\n    }\n    return dirty;\n  },\n  // check a single one watcher \n  _checkSingleWatch: function(watcher){\n    var dirty = false;\n    if(!watcher) return;\n\n    var now, last, tlast, tnow,  \n      eq, diff, keyOf, trackDiff\n     \n\n    if(!watcher.test){\n\n      now = watcher.get(this);\n      last = watcher.last;\n      keyOf = watcher.keyOf\n\n      if(now !== last || watcher.force){\n        tlast = _.typeOf(last);\n        tnow = _.typeOf(now);\n        eq = true; \n\n        // !Object\n        if( !(tnow === 'object' && tlast==='object' && watcher.deep) ){\n          // Array\n          if( tnow === 'array' && ( tlast=='undefined' || tlast === 'array') ){\n            if(typeof keyOf === 'function'){\n              trackDiff = diffTrack(now, watcher.last || [], keyOf )\n              diff = trackDiff.steps;\n              if(trackDiff.dirty) dirty = true;\n            }else{\n              diff = diffArray(now, watcher.last || [], watcher.diff)\n            }\n            \n            if(!dirty && (tlast !== 'array' || diff === true || diff.length) ) dirty = true;\n          }else{\n            eq = _.equals( now, last );\n            if( !eq || watcher.force ){\n              watcher.force = null;\n              dirty = true; \n            }\n          }\n        }else{\n          diff =  diffObject( now, last, watcher.diff, keyOf  );\n          if(diff.isTrack){\n            trackDiff = diff;\n            diff = trackDiff.steps;\n          }\n          if( diff === true || diff.length ) dirty = true;\n        }\n      }\n\n    } else{\n      // @TODO \n      var result = watcher.test(this);\n      if(result){\n        dirty = true;\n        watcher.fn.apply(this, result)\n      }\n    }\n    if(dirty && !watcher.test){\n      if(tnow === 'object' && watcher.deep || tnow === 'array'){\n        watcher.last = _.clone(now);\n      }else{\n        watcher.last = now;\n      }\n      watcher.fn.call(this, now, last, diff, trackDiff && trackDiff.oldKeyMap, trackDiff && trackDiff.dirty)\n      if(watcher.once) this.$unwatch(watcher)\n    }\n\n    return dirty;\n  },\n\n  /**\n   * **tips**: whatever param you passed in $update, after the function called, dirty-check(digest) phase will enter;\n   * \n   * @param  {Function|String|Expression} path  \n   * @param  {Whatever} value optional, when path is Function, the value is ignored\n   * @return {this}     this \n   */\n  $set: function(path, value){\n    if(path != null){\n      var type = typeof (path);\n      if( type === 'string' || path.type === 'expression' ){\n        path = this.$expression(path);\n        path.set(this, value);\n      }else if(type === 'function'){\n        path.call(this, this.data);\n      }else{\n        for(var i in path) {\n          this.$set(i, path[i])\n        }\n      }\n    }\n  },\n  // 1. expr canbe string or a Expression\n  // 2. detect: if true, if expr is a string will directly return;\n  $get: function(expr, detect)  {\n    if(detect && typeof expr === 'string') return expr;\n    return this.$expression(expr).get(this);\n  },\n  $update: function(){\n    var rootParent = this;\n    if(rootParent.$phase==='destroyed') return this;\n    do{\n      if(rootParent.data.isolate || !rootParent.$parent) break;\n      rootParent = rootParent.$parent;\n    } while(rootParent)\n\n    var prephase =rootParent.$phase;\n    rootParent.$phase = 'digest'\n\n    this.$set.apply(this, arguments);\n\n    rootParent.$phase = prephase\n\n    rootParent.$digest();\n    return this;\n  },\n  // auto collect watchers for logic-control.\n  _record: function(){\n    if(!this._records) this._records = [];\n    this._records.push([]);\n  },\n  _release: function(){\n    return this._records.pop();\n  }\n}\n\n\n_.extend(Watcher.prototype, methods)\n\n\nWatcher.mixTo = function(obj){\n  obj = typeof obj === \"function\" ? obj.prototype : obj;\n  return _.extend(obj, methods)\n}\n\nmodule.exports = Watcher;\n","\nvar f = module.exports = {};\n\n// json:  two way \n//  - get: JSON.stringify\n//  - set: JSON.parse\n//  - example: `{ title|json }`\nf.json = {\n  get: function( value ){\n    return typeof JSON !== 'undefined'? JSON.stringify(value): value;\n  },\n  set: function( value ){\n    return typeof JSON !== 'undefined'? JSON.parse(value) : value;\n  }\n}\n\n// last: one-way\n//  - get: return the last item in list\n//  - example: `{ list|last }`\nf.last = function(arr){\n  return arr && arr[arr.length - 1];\n}\n\n// average: one-way\n//  - get: copute the average of the list\n//  - example: `{ list| average: \"score\" }`\nf.average = function(array, key){\n  array = array || [];\n  return array.length? f.total(array, key)/ array.length : 0;\n}\n\n\n// total: one-way\n//  - get: copute the total of the list\n//  - example: `{ list| total: \"score\" }`\nf.total = function(array, key){\n  var total = 0;\n  if(!array) return;\n  array.forEach(function( item ){\n    total += key? item[key] : item;\n  })\n  return total;\n}\n\n\n","// Regular\nvar _ = require(\"../util\");\nvar dom = require(\"../dom\");\nvar animate = require(\"../helper/animate\");\nvar Regular = require(\"../render/client\");\nvar consts = require(\"../const\");\nvar namespaces = consts.NAMESPACE;\nvar OPTIONS = consts.OPTIONS\nvar STABLE = OPTIONS.STABLE;\nvar DEEP_STABLE = {deep: true, stable: true};\n\n\n\n\nrequire(\"./event.js\");\nrequire(\"./form.js\");\n\n\nmodule.exports = {\n// **warn**: class inteplation will override this directive \n  'r-class': function(elem, value){\n\n    if(typeof value=== 'string'){\n      value = _.fixObjStr(value)\n    }\n    var isNotHtml = elem.namespaceURI && elem.namespaceURI !== namespaces.html ;\n    this.$watch(value, function(nvalue){\n      var className = isNotHtml? elem.getAttribute('class'): elem.className;\n      className = ' '+ (className||'').replace(/\\s+/g, ' ') +' ';\n      for(var i in nvalue) if(nvalue.hasOwnProperty(i)){\n        className = className.replace(' ' + i + ' ',' ');\n        if(nvalue[i] === true){\n          className += i+' ';\n        }\n      }\n      className = className.trim();\n      if(isNotHtml){\n        dom.attr(elem, 'class', className)\n      }else{\n        elem.className = className\n      }\n    }, DEEP_STABLE);\n  },\n  // **warn**: style inteplation will override this directive \n  'r-style': function(elem, value){\n    if(typeof value=== 'string'){\n      value = _.fixObjStr(value)\n    }\n    this.$watch(value, function(nvalue, ovalue){\n      // remove styleProperty that are no longer in nvalue\n      for (var i in ovalue) if (ovalue.hasOwnProperty(i) && !nvalue.hasOwnProperty(i)) {\n        dom.css(elem, i, '');\n      }\n      for(i in nvalue) if(nvalue.hasOwnProperty(i)){\n        dom.css(elem, i, nvalue[i]);\n      }\n    },DEEP_STABLE);\n  },\n  // when expression is evaluate to true, the elem will add display:none\n  // Example: <div r-hide={{items.length > 0}}></div>\n  'r-hide': {\n    link:function(elem, value){\n      var preBool = null, compelete;\n      if( _.isExpr(value) || typeof value === \"string\"){\n        this.$watch(value, function(nvalue){\n          var bool = !!nvalue;\n          if(bool === preBool) return; \n          preBool = bool;\n          if(bool){\n            if(elem.onleave){\n              compelete = elem.onleave(function(){\n                elem.style.display = \"none\"\n                compelete = null;\n              })\n            }else{\n              elem.style.display = \"none\"\n            }\n            \n          }else{\n            if(compelete) compelete();\n            elem.style.display = \"\";\n            if(elem.onenter){\n              elem.onenter();\n            }\n          }\n        }, STABLE);\n      }else if(!!value){\n        elem.style.display = \"none\";\n      }\n    },\n    ssr: function(value){\n      return value? 'style=\"display:none\"': ''\n    }\n  },\n  'r-html': {\n    ssr: function(value, tag){\n      tag.body = value;\n      return \"\";\n    },\n    link: function(elem, value){\n      this.$watch(value, function(nvalue){\n        nvalue = nvalue || \"\";\n        dom.html(elem, nvalue)\n      }, {force: true, stable: true});\n    }\n  },\n  'ref': {\n    accept: consts.COMPONENT_TYPE + consts.ELEMENT_TYPE,\n    link: function( elem, value ){\n      var refs = this.$refs || (this.$refs = {});\n      var cval;\n      if(_.isExpr(value)){\n        this.$watch(value, function(nval, oval){\n          cval = nval;\n          if(refs[oval] === elem) refs[oval] = null;\n          if(cval) refs[cval] = elem;\n        }, STABLE)\n      }else{\n        refs[cval = value] = elem;\n      }\n      return function(){\n        refs[cval] = null;\n      }\n    }\n  }\n}\n\nRegular.directive(module.exports);\n\n\n\n\n\n\n\n\n\n\n","/**\n * event directive  bundle\n *\n */\nvar _ = require(\"../util\");\nvar dom = require(\"../dom\");\nvar Regular = require(\"../render/client\");\n\nRegular._addProtoInheritCache(\"event\");\n\nRegular.directive( /^on-\\w+$/, function( elem, value, name , attrs) {\n  if ( !name || !value ) return;\n  var type = name.split(\"-\")[1];\n  return this._handleEvent( elem, type, value, attrs );\n});\n// TODO.\n/**\n- $('dx').delegate()\n*/\nRegular.directive( /^(delegate|de)-\\w+$/, function( elem, value, name ) {\n  var root = this.$root;\n  var _delegates = root._delegates || ( root._delegates = {} );\n  if ( !name || !value ) return;\n  var type = name.split(\"-\")[1];\n  var fire = _.handleEvent.call(this, value, type);\n\n  function delegateEvent(ev){\n    matchParent(ev, _delegates[type], root.parentNode);\n  }\n\n  if( !_delegates[type] ){\n    _delegates[type] = [];\n\n    if(root.parentNode){\n      dom.on(root.parentNode, type, delegateEvent);\n    }else{\n      root.$on( \"$inject\", function( node, position, preParent ){\n        var newParent = this.parentNode;\n        if( preParent ){\n          dom.off(preParent, type, delegateEvent);\n        }\n        if(newParent) dom.on(this.parentNode, type, delegateEvent);\n      })\n    }\n    root.$on(\"$destroy\", function(){\n      if(root.parentNode) dom.off(root.parentNode, type, delegateEvent)\n      _delegates[type] = null;\n    })\n  }\n  var delegate = {\n    element: elem,\n    fire: fire\n  }\n  _delegates[type].push( delegate );\n\n  return function(){\n    var delegates = _delegates[type];\n    if(!delegates || !delegates.length) return;\n    for( var i = 0, len = delegates.length; i < len; i++ ){\n      if( delegates[i] === delegate ) delegates.splice(i, 1);\n    }\n  }\n\n});\n\n\nfunction matchParent(ev , delegates, stop){\n  if(!stop) return;\n  var target = ev.target, pair;\n  while(target && target !== stop){\n    for( var i = 0, len = delegates.length; i < len; i++ ){\n      pair = delegates[i];\n      if(pair && pair.element === target){\n        pair.fire(ev)\n      }\n    }\n    target = target.parentNode;\n  }\n}","// Regular\nvar _ = require(\"../util\");\nvar dom = require(\"../dom\");\nvar OPTIONS = require('../const').OPTIONS\nvar STABLE = OPTIONS.STABLE;\nvar hasInput;\nvar Regular = require(\"../render/client\");\n\nvar modelHandlers = {\n  \"text\": initText,\n  \"select\": initSelect,\n  \"checkbox\": initCheckBox,\n  \"radio\": initRadio\n}\n\n\n// @TODO\n\n\n// autoUpdate directive for select element\n// to fix r-model issue , when handle dynamic options\n\n\n/**\n * <select r-model={name}> \n *   <r-option value={value} ></r-option>\n * </select>\n */\n\n\n// two-way binding with r-model\n// works on input, textarea, checkbox, radio, select\n\n\nRegular.directive(\"r-model\", {\n  param: ['throttle', 'lazy'],\n  link: function( elem, value, name, extra ){\n    var tag = elem.tagName.toLowerCase();\n    var sign = tag;\n    if(sign === \"input\") sign = elem.type || \"text\";\n    else if(sign === \"textarea\") sign = \"text\";\n    if(typeof value === \"string\") value = this.$expression(value);\n\n    if( modelHandlers[sign] ) return modelHandlers[sign].call(this, elem, value, extra);\n    else if(tag === \"input\"){\n      return modelHandlers.text.call(this, elem, value, extra);\n    }\n  }\n  //@TODO\n  // ssr: function(name, value){\n  //   return value? \"value=\" + value: \"\"\n  // }\n});\n\n\n\n\n\n// binding <select>\n\nfunction initSelect( elem, parsed, extra){\n  var self = this;\n  var wc = this.$watch(parsed, function(newValue){\n    var children = elem.getElementsByTagName('option');\n    for(var i =0, len = children.length ; i < len; i++){\n      if(children[i].value == newValue){\n        elem.selectedIndex = i;\n        break;\n      }\n    }\n  }, STABLE);\n\n  function handler(){\n    parsed.set(self, this.value);\n    wc.last = this.value;\n    self.$update();\n  }\n  // var isChanging = true \n  // var __change = function(){\n  //   if(isChanging) return;\n  //   isChanging = true;\n  //   setTimeout(handler,0)\n  // }\n\n  dom.on( elem, \"change\", handler );\n\n  \n  if(parsed.get(self) === undefined && elem.value){\n    parsed.set(self, elem.value);\n  }\n\n  return function destroy(){\n    dom.off(elem, \"change\", handler);\n    // @TODO remove __change function \n    // elem.__change = null;\n  }\n}\n\n// input,textarea binding\nfunction initText(elem, parsed, extra){\n  var param = extra.param;\n  var throttle, lazy = param.lazy\n\n  if('throttle' in param){\n    // <input throttle r-model>\n    if(param.throttle === true){\n      throttle = 400;\n    }else{\n      throttle = parseInt(param.throttle, 10)\n    }\n  }\n\n  var self = this;\n  var wc = this.$watch(parsed, function(newValue){\n    if(elem.value !== newValue) elem.value = newValue == null? \"\": \"\" + newValue;\n  }, STABLE);\n\n  // @TODO to fixed event\n  var isCompositing = false;\n  var handler = function (ev){\n\n    if(isCompositing) return;\n\n    isCompositing = false;\n\n    var that = this;\n    if(ev.type==='cut' || ev.type==='paste'){\n      _.nextTick(function(){\n        var value = that.value\n        parsed.set(self, value);\n        wc.last = value;\n        self.$update();\n      })\n    }else{\n        var value = that.value\n        parsed.set(self, value);\n        wc.last = value;\n        self.$update();\n    }\n  };\n\n  function onCompositionStart(){\n    isCompositing = true;\n  }\n\n  function onCompositionEnd(ev){\n    isCompositing = false;\n    handler.call(this,ev)\n  }\n\n  if(throttle && !lazy){\n    var preHandle = handler, tid;\n    handler = _.throttle(handler, throttle);\n  }\n\n  if(hasInput === undefined){\n    hasInput = dom.msie !== 9 && \"oninput\" in document.createElement('input')\n  }\n\n  if(lazy){\n    dom.on(elem, 'change', handler)\n  }else{\n\n    if(typeof CompositionEvent === 'function' ){ //lazycompositionend\n      elem.addEventListener(\"compositionstart\", onCompositionStart );\n      elem.addEventListener(\"compositionend\", onCompositionEnd );\n    }\n\n    if( hasInput){\n      elem.addEventListener(\"input\", handler );\n    }else{\n      dom.on(elem, \"paste keyup cut change\", handler)\n    }\n  }\n  if(parsed.get(self) === undefined && elem.value){\n     parsed.set(self, elem.value);\n  }\n  return function (){\n    if(lazy) return dom.off(elem, \"change\", handler);\n    if( hasInput ){\n      elem.removeEventListener(\"input\", handler );\n    }else{\n      dom.off(elem, \"paste keyup cut change\", handler)\n    }\n  }\n}\n\n\n// input:checkbox  binding\n\nfunction initCheckBox(elem, parsed){\n  var self = this;\n  var watcher = this.$watch(parsed, function(newValue){\n    dom.attr(elem, 'checked', !!newValue);\n  }, STABLE);\n\n  var handler = function handler(){\n    var value = this.checked;\n    parsed.set(self, value);\n    watcher.last = value;\n    self.$update();\n  }\n  if(parsed.set) dom.on(elem, \"change\", handler)\n\n  if(parsed.get(self) === undefined){\n    parsed.set(self, !!elem.checked);\n  }\n\n  return function destroy(){\n    if(parsed.set) dom.off(elem, \"change\", handler)\n  }\n}\n\n\n// input:radio binding\n\nfunction initRadio(elem, parsed){\n  var self = this;\n  var wc = this.$watch(parsed, function( newValue ){\n    if(newValue == elem.value) elem.checked = true;\n    else elem.checked = false;\n  }, STABLE);\n\n\n  var handler = function handler(){\n    var value = this.value;\n    parsed.set(self, value);\n    self.$update();\n  }\n  if(parsed.set) dom.on(elem, \"change\", handler)\n  // beacuse only after compile(init), the dom structrue is exsit. \n  if(parsed.get(self) === undefined){\n    if(elem.checked) {\n      parsed.set(self, elem.value);\n    }\n  }\n\n  return function destroy(){\n    if(parsed.set) dom.off(elem, \"change\", handler)\n  }\n}\n\n\n\n","var // packages\n  _ = require(\"../util\"),\n animate = require(\"../helper/animate\"),\n dom = require(\"../dom\"),\n Regular = require(\"../render/client\");\n\n\nvar // variables\n  rClassName = /^[-\\w]+(\\s[-\\w]+)*$/,\n  rCommaSep = /[\\r\\n\\f ]*,[\\r\\n\\f ]*(?=\\w+\\:)/, //  dont split comma in  Expression\n  rStyles = /^\\{.*\\}$/, //  for Simpilfy\n  rSpace = /\\s+/, //  for Simpilfy\n  WHEN_COMMAND = \"when\",\n  EVENT_COMMAND = \"on\",\n  THEN_COMMAND = \"then\";\n\n/**\n * Animation Plugin\n * @param {Component} Component \n */\n\n\nfunction createSeed(type){\n\n  var steps = [], current = 0, callback = _.noop;\n  var key;\n\n  var out = {\n    type: type,\n    start: function(cb){\n      key = _.uid();\n      if(typeof cb === \"function\") callback = cb;\n      if(current> 0 ){\n        current = 0 ;\n      }else{\n        out.step();\n      }\n      return out.compelete;\n    },\n    compelete: function(){\n      key = null;\n      callback && callback();\n      callback = _.noop;\n      current = 0;\n    },\n    step: function(){\n      if(steps[current]) steps[current ]( out.done.bind(out, key) );\n    },\n    done: function(pkey){\n      if(pkey !== key) return; // means the loop is down\n      if( current < steps.length - 1 ) {\n        current++;\n        out.step();\n      }else{\n        out.compelete();\n      }\n    },\n    push: function(step){\n      steps.push(step)\n    }\n  }\n\n  return out;\n}\n\nRegular._addProtoInheritCache(\"animation\")\n\n\n// builtin animation\nRegular.animation({\n  \"wait\": function( step ){\n    var timeout = parseInt( step.param ) || 0\n    return function(done){\n      // _.log(\"delay \" + timeout)\n      setTimeout( done, timeout );\n    }\n  },\n  \"class\": function(step){\n    var tmp = step.param.split(\",\"),\n      className = tmp[0] || \"\",\n      mode = parseInt(tmp[1]) || 1;\n\n    return function(done){\n      // _.log(className)\n      animate.startClassAnimate( step.element, className , done, mode );\n    }\n  },\n  \"call\": function(step){\n    var fn = this.$expression(step.param).get, self = this;\n    return function(done){\n      // _.log(step.param, 'call')\n      fn(self);\n      self.$update();\n      done()\n    }\n  },\n  \"emit\": function(step){\n    var param = step.param;\n    var tmp = param.split(\",\"),\n      evt = tmp[0] || \"\",\n      args = tmp[1]? this.$expression(tmp[1]).get: null;\n\n    if(!evt) throw Error(\"you shoud specified a eventname in emit command\");\n\n    var self = this;\n    return function(done){\n      self.$emit(evt, args? args(self) : undefined);\n      done();\n    }\n  },\n  // style: left {10}px,\n  style: function(step){\n    var styles = {}, \n      param = step.param,\n      pairs = param.split(\",\"), valid;\n    pairs.forEach(function(pair){\n      pair = pair.trim();\n      if(pair){\n        var tmp = pair.split( rSpace ),\n          name = tmp.shift(),\n          value = tmp.join(\" \");\n\n        if( !name || !value ) throw Error(\"invalid style in command: style\");\n        styles[name] = value;\n        valid = true;\n      }\n    })\n\n    return function(done){\n      if(valid){\n        animate.startStyleAnimate(step.element, styles, done);\n      }else{\n        done();\n      }\n    }\n  }\n})\n\n\n\n// hancdle the r-animation directive\n// el : the element to process\n// value: the directive value\nfunction processAnimate( element, value ){\n  var Component = this.constructor;\n\n  if(_.isExpr(value)){\n    value = value.get(this);\n  }\n\n  value = value.trim();\n\n  var composites = value.split(\";\"), \n    composite, context = this, seeds = [], seed, destroies = [], destroy,\n    command, param , current = 0, tmp, animator, self = this;\n\n  function reset( type ){\n    seed && seeds.push( seed )\n    seed = createSeed( type );\n  }\n\n  function whenCallback(start, value){\n    if( !!value ) start()\n  }\n\n  function animationDestroy(element){\n    return function(){\n      element.onenter = null;\n      element.onleave = null;\n    } \n  }\n\n  for( var i = 0, len = composites.length; i < len; i++ ){\n\n    composite = composites[i];\n    tmp = composite.split(\":\");\n    command = tmp[0] && tmp[0].trim();\n    param = tmp[1] && tmp[1].trim();\n\n    if( !command ) continue;\n\n    if( command === WHEN_COMMAND ){\n      reset(\"when\");\n      this.$watch(param, whenCallback.bind( this, seed.start ) );\n      continue;\n    }\n\n    if( command === EVENT_COMMAND){\n      reset(param);\n      if( param === \"leave\" ){\n        element.onleave = seed.start;\n        destroies.push( animationDestroy(element) );\n      }else if( param === \"enter\" ){\n        element.onenter = seed.start;\n        destroies.push( animationDestroy(element) );\n      }else{\n        if( (\"on\" + param) in element){ // if dom have the event , we use dom event\n          destroies.push(this._handleEvent( element, param, seed.start ));\n        }else{ // otherwise, we use component event\n          this.$on(param, seed.start);\n          destroies.push(this.$off.bind(this, param, seed.start));\n        }\n      }\n      continue;\n    }\n\n    var animator =  Component.animation(command) \n    if( animator && seed ){\n      seed.push(\n        animator.call(this,{\n          element: element,\n          done: seed.done,\n          param: param \n        })\n      )\n    }else{\n      throw Error( animator? \"you should start with `on` or `event` in animation\" : (\"undefined animator \" + command +\"\" ));\n    }\n  }\n\n  if(destroies.length){\n    return function(){\n      destroies.forEach(function(destroy){\n        destroy();\n      })\n    }\n  }\n}\n\n\nRegular.directive( \"r-animation\", processAnimate)\nRegular.directive( \"r-anim\", processAnimate)\n\n","var Regular = require(\"../render/client\");\n\n/**\n * Timeout Module\n * @param {Component} Component \n */\nfunction TimeoutModule(Component){\n\n  Component.implement({\n    /**\n     * just like setTimeout, but will enter digest automately\n     * @param  {Function} fn    \n     * @param  {Number}   delay \n     * @return {Number}   timeoutid\n     */\n    $timeout: function(fn, delay){\n      delay = delay || 0;\n      return setTimeout(function(){\n        fn.call(this);\n        this.$update(); //enter digest\n      }.bind(this), delay);\n    },\n    /**\n     * just like setInterval, but will enter digest automately\n     * @param  {Function} fn    \n     * @param  {Number}   interval \n     * @return {Number}   intervalid\n     */\n    $interval: function(fn, interval){\n      interval = interval || 1000/60;\n      return setInterval(function(){\n        fn.call(this);\n        this.$update(); //enter digest\n      }.bind(this), interval);\n    }\n  });\n}\n\n\nRegular.plugin('timeout', TimeoutModule);\nRegular.plugin('$timeout', TimeoutModule);","let raf = null;\nfunction requestAnimationFrame (callback) {\n  if (!raf) {\n    raf = (\n      window.requestAnimationFrame ||\n      window.webkitRequestAnimationFrame ||\n      window.mozRequestAnimationFrame ||\n      function (callback) {\n        return setTimeout(callback, 16)\n      }\n    ).bind(window);\n  }\n  return raf(callback)\n}\n\nlet caf = null;\nfunction cancelAnimationFrame (id) {\n  if (!caf) {\n    caf = (\n      window.cancelAnimationFrame ||\n      window.webkitCancelAnimationFrame ||\n      window.mozCancelAnimationFrame ||\n      function (id) {\n        clearTimeout(id);\n      }\n    ).bind(window);\n  }\n\n  caf(id);\n}\n\nfunction createStyles (styleText) {\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = styleText;\n  } else {\n    style.appendChild(document.createTextNode(styleText));\n  }\n  (document.querySelector('head') || document.body).appendChild(style);\n  return style\n}\n\nfunction createElement (tagName, props = {}) {\n  let elem = document.createElement(tagName);\n  Object.keys(props).forEach(key => {\n    elem[key] = props[key];\n  });\n  return elem\n}\n\nfunction getComputedStyle (elem, prop, pseudo) {\n  // for older versions of Firefox, `getComputedStyle` required\n  // the second argument and may return `null` for some elements\n  // when `display: none`\n  let computedStyle = window.getComputedStyle(elem, pseudo || null) || {\n    display: 'none'\n  };\n\n  return computedStyle[prop]\n}\n\nfunction getRenderInfo (elem) {\n  if (!document.documentElement.contains(elem)) {\n    return {\n      detached: true,\n      rendered: false\n    }\n  }\n\n  let current = elem;\n  while (current !== document) {\n    if (getComputedStyle(current, 'display') === 'none') {\n      return {\n        detached: false,\n        rendered: false\n      }\n    }\n    current = current.parentNode;\n  }\n\n  return {\n    detached: false,\n    rendered: true\n  }\n}\n\nvar css = \".resize-triggers{visibility:hidden;opacity:0}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:\\\"\\\";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}\";\n\nlet total = 0;\nlet style = null;\n\nfunction addListener (elem, callback) {\n  if (!elem.__resize_mutation_handler__) {\n    elem.__resize_mutation_handler__ = handleMutation.bind(elem);\n  }\n\n  let listeners = elem.__resize_listeners__;\n\n  if (!listeners) {\n    elem.__resize_listeners__ = [];\n    if (window.ResizeObserver) {\n      let { offsetWidth, offsetHeight } = elem;\n      let ro = new ResizeObserver(() => {\n        if (!elem.__resize_observer_triggered__) {\n          elem.__resize_observer_triggered__ = true;\n          if (elem.offsetWidth === offsetWidth && elem.offsetHeight === offsetHeight) {\n            return\n          }\n        }\n        runCallbacks(elem);\n      });\n\n      // initially display none won't trigger ResizeObserver callback\n      let { detached, rendered } = getRenderInfo(elem);\n      elem.__resize_observer_triggered__ = detached === false && rendered === false;\n      elem.__resize_observer__ = ro;\n      ro.observe(elem);\n    } else if (elem.attachEvent && elem.addEventListener) {\n      // targeting IE9/10\n      elem.__resize_legacy_resize_handler__ = function handleLegacyResize () {\n        runCallbacks(elem);\n      };\n      elem.attachEvent('onresize', elem.__resize_legacy_resize_handler__);\n      document.addEventListener('DOMSubtreeModified', elem.__resize_mutation_handler__);\n    } else {\n      if (!total) {\n        style = createStyles(css);\n      }\n      initTriggers(elem);\n\n      elem.__resize_rendered__ = getRenderInfo(elem).rendered;\n      if (window.MutationObserver) {\n        let mo = new MutationObserver(elem.__resize_mutation_handler__);\n        mo.observe(document, {\n          attributes: true,\n          childList: true,\n          characterData: true,\n          subtree: true\n        });\n        elem.__resize_mutation_observer__ = mo;\n      }\n    }\n  }\n\n  elem.__resize_listeners__.push(callback);\n  total++;\n}\n\nfunction removeListener (elem, callback) {\n  let listeners = elem.__resize_listeners__;\n  if (!listeners) {\n    return\n  }\n\n  if (callback) {\n    listeners.splice(listeners.indexOf(callback), 1);\n  }\n\n  // no listeners exist, or removing all listeners\n  if (!listeners.length || !callback) {\n    // targeting IE9/10\n    if (elem.detachEvent && elem.removeEventListener) {\n      elem.detachEvent('onresize', elem.__resize_legacy_resize_handler__);\n      document.removeEventListener('DOMSubtreeModified', elem.__resize_mutation_handler__);\n      return\n    }\n\n    if (elem.__resize_observer__) {\n      elem.__resize_observer__.unobserve(elem);\n      elem.__resize_observer__.disconnect();\n      elem.__resize_observer__ = null;\n    } else {\n      if (elem.__resize_mutation_observer__) {\n        elem.__resize_mutation_observer__.disconnect();\n        elem.__resize_mutation_observer__ = null;\n      }\n      elem.removeEventListener('scroll', handleScroll);\n      elem.removeChild(elem.__resize_triggers__.triggers);\n      elem.__resize_triggers__ = null;\n    }\n    elem.__resize_listeners__ = null;\n  }\n\n  if (!--total && style) {\n    style.parentNode.removeChild(style);\n  }\n}\n\nfunction getUpdatedSize (elem) {\n  let { width, height } = elem.__resize_last__;\n  let { offsetWidth, offsetHeight } = elem;\n  if (offsetWidth !== width || offsetHeight !== height) {\n    return {\n      width: offsetWidth,\n      height: offsetHeight\n    }\n  }\n  return null\n}\n\nfunction handleMutation () {\n  // `this` denotes the scrolling element\n  let { rendered, detached } = getRenderInfo(this);\n  if (rendered !== this.__resize_rendered__) {\n    if (!detached && this.__resize_triggers__) {\n      resetTriggers(this);\n      this.addEventListener('scroll', handleScroll, true);\n    }\n    this.__resize_rendered__ = rendered;\n    runCallbacks(this);\n  }\n}\n\nfunction handleScroll () {\n  // `this` denotes the scrolling element\n  resetTriggers(this);\n  if (this.__resize_raf__) {\n    cancelAnimationFrame(this.__resize_raf__);\n  }\n  this.__resize_raf__ = requestAnimationFrame(() => {\n    let updated = getUpdatedSize(this);\n    if (updated) {\n      this.__resize_last__ = updated;\n      runCallbacks(this);\n    }\n  });\n}\n\nfunction runCallbacks (elem) {\n  if (!elem || !elem.__resize_listeners__) {\n    return\n  }\n  elem.__resize_listeners__.forEach(callback => {\n    callback.call(elem);\n  });\n}\n\nfunction initTriggers (elem) {\n  let position = getComputedStyle(elem, 'position');\n  if (!position || position === 'static') {\n    elem.style.position = 'relative';\n  }\n\n  elem.__resize_old_position__ = position;\n  elem.__resize_last__ = {};\n\n  let triggers = createElement('div', {\n    className: 'resize-triggers'\n  });\n  let expand = createElement('div', {\n    className: 'resize-expand-trigger'\n  });\n  let expandChild = createElement('div');\n  let contract = createElement('div', {\n    className: 'resize-contract-trigger'\n  });\n  expand.appendChild(expandChild);\n  triggers.appendChild(expand);\n  triggers.appendChild(contract);\n  elem.appendChild(triggers);\n\n  elem.__resize_triggers__ = {\n    triggers,\n    expand,\n    expandChild,\n    contract\n  };\n\n  resetTriggers(elem);\n  elem.addEventListener('scroll', handleScroll, true);\n\n  elem.__resize_last__ = {\n    width: elem.offsetWidth,\n    height: elem.offsetHeight\n  };\n}\n\nfunction resetTriggers (elem) {\n  let { expand, expandChild, contract } = elem.__resize_triggers__;\n\n  // batch read\n  let { scrollWidth: csw, scrollHeight: csh } = contract;\n  let { offsetWidth: eow, offsetHeight: eoh, scrollWidth: esw, scrollHeight: esh } = expand;\n\n  // batch write\n  contract.scrollLeft = csw;\n  contract.scrollTop = csh;\n  expandChild.style.width = eow + 1 + 'px';\n  expandChild.style.height = eoh + 1 + 'px';\n  expand.scrollLeft = esw;\n  expand.scrollTop = esh;\n}\n\nexport { addListener, removeListener };\n","import {\n    addListener,\n    removeListener\n} from 'resize-detector'\nconst UPDATE_TRIGGERS = ['maxLines', 'maxHeight', 'ellipsis', 'isClamped']\nconst INIT_TRIGGERS = ['tag', 'text', 'autoresize']\n\nconst Clamp = {\n    name: 'regular-clamp',\n    data: {\n        offset: null,\n        text: '',\n        ellipsis: '...',\n        localExpanded: false,\n        realLines: 0\n    },\n    computed: {\n        clampedText(data) {\n            return data.text.slice(0, data.offset) + data.ellipsis\n        },\n        isClamped(data) {\n            if (!data.text) {\n                return false\n            }\n            return data.offset !== data.text.length\n        },\n        realText(data) {\n            return this.$get('isClamped') ? this.$get('clampedText') : data.text\n        },\n        realMaxHeight(data) {\n            if (data.localExpanded) {\n                return null\n            }\n            let {\n                maxHeight\n            } = data\n            if (!maxHeight) {\n                return null\n            }\n            return typeof maxHeight === 'number' ? `${maxHeight}px` : maxHeight\n        }\n    },\n    config() {\n        this.data.text = this.getText()\n        this.data.maxLines = +this.data.maxLines || 0\n        this.data.localExpanded = !!this.data.expanded\n        this.$watch('expanded', (val) => {\n            this.data.localExpanded = val\n            this.$update()\n        })\n        this.$watch('localExpanded', (val) => {\n            if (val) {\n                this.clampAt(this.data.text.length)\n            } else {\n                this.update()\n            }\n            if (this.data.expanded !== val) {\n                this.$emit('expanded', val)\n            }\n            this.$update()\n        })\n        this.$update()\n    },\n    init() {\n        setTimeout(() => {\n            this.mounted()\n        }, 0)\n    },\n    destroy() {\n        this.cleanUp()\n    },\n    mounted() {\n        this.initComp()\n        INIT_TRIGGERS.forEach(prop => {\n            this.$watch(prop, this.initComp)\n        })\n\n        UPDATE_TRIGGERS.forEach(prop => {\n            this.$watch(prop, this.update)\n        })\n        this.$watch(() => {\n            return this.$refs.content\n        }, (nVal) => {\n            this.data.realLines = nVal.getClientRects().length\n            this.$update()\n        }, {\n            deep: true,\n            init: true\n        })\n    },\n    initComp() {\n        if (!this.data.text) {\n            return\n        }\n        this.data.offset = this.data.text.length\n\n        this.cleanUp()\n        if (this.data.autoresize) {\n            let resizeCallback = () => {\n                this.update()\n            }\n            addListener(this.$refs.clamp, resizeCallback)\n            this.unregisterResizeCallback = () => {\n                removeListener(this.$refs.clamp, resizeCallback)\n            }\n        }\n        this.update()\n    },\n    update() {\n        this.data.realLines = this.getLines()\n        this.$update()\n        if (this.data.localExpanded) {\n            return\n        }\n        this.applyChange()\n        if (this.isOverflow() || this.$get('isClamped')) {\n            this.search()\n        }\n    },\n    toggle() {\n        this.data.localExpanded = !this.data.localExpanded\n        this.$update()\n    },\n    getLines() {\n        return this.$refs.content.getClientRects().length\n    },\n    isOverflow() {\n        if (!this.data.maxLines && !this.data.maxHeight) {\n            return false\n        }\n\n        if (this.data.maxLines) {\n            if (this.getLines() > this.data.maxLines) {\n                return true\n            }\n        }\n\n        if (this.data.maxHeight) {\n            if (this.$el.scrollHeight > this.$el.offsetHeight) {\n                return true\n            }\n        }\n        return false\n    },\n    getText() {\n        let [content = { }] = (this._body.ast || []).filter(\n            node => node.type === 'text'\n        )\n        if(content.text && content.text.trim()) {\n            return content.text\n        }\n        return this.data.text || ''\n    },\n    moveEdge(steps) {\n        this.clampAt(this.data.offset + steps)\n    },\n    clampAt(offset) {\n        this.data.offset = offset\n        this.$update()\n        this.applyChange()\n    },\n    applyChange() {\n        this.$refs.text.textContent = this.$get('realText')\n    },\n    stepToFit() {\n        this.fill()\n        this.clamp()\n    },\n    fill() {\n        while (\n            (!this.isOverflow() || this.getLines() < 2) &&\n            this.data.offset < this.data.text.length\n        ) {\n            this.moveEdge(1)\n        }\n    },\n    clamp() {\n        while (this.isOverflow() && this.getLines() > 1 && this.data.offset > 0) {\n            this.moveEdge(-1)\n        }\n    },\n    search(...range) {\n        let [from = 0, to = this.data.offset] = range\n        if (to - from <= 3) {\n            this.stepToFit()\n            return\n        }\n        let target = Math.floor((to + from) / 2)\n        this.clampAt(target)\n        if (this.isOverflow()) {\n            this.search(from, target)\n        } else {\n            this.search(target, to)\n        }\n    },\n    cleanUp() {\n        if (this.unregisterResizeCallback) {\n            this.unregisterResizeCallback()\n        }\n    },\n    template: `<div ref=\"clamp\" style=\"max-height: {realMaxHeight}; overflow: hidden;\">\n                    <span ref=\"content\" style=\"box-shadow: transparent 0 0;\">{#if before}{#include before}{/if}<span ref=\"text\" aria-label=\"{text.trim()}\" {#if isTextTriggerToggle} on-click={this.toggle()} {/if}>{realText}</span>{#if after}{#include after}{/if}</span>\n                </div>`\n}\n\nif (typeof window !== 'undefined' && window.Regular) {\n    window.Regular.extend(Clamp)\n}\n\nexport default Clamp","import Regular from 'regularjs'\nimport Clamp from './components/Clamp'\nRegular.extend(Clamp)\nconst str = `Regular\nRegular 4(2018), \nRegular  MDV()  ...\n\n,\n\n\nregular-state\n:  mpregular\n\nDSLHTML\n set/get \n IE7+ \n`\nnew Regular({\n    template: `\n        <regular-clamp on-expanded={this.updateExpanded($event)} text={text} max-lines=3 ellipsis=\"...\" after={after} before={before}>\n\n        </regular-clamp>\n    `,\n    data: {\n        after: `<span class=\"end tag\" r-hide=\"!(localExpanded || isClamped)\" on-click={this.toggle()}>\n            {#if localExpanded}\n                \n            {#else}\n                \n            {/if}\n        </span>`,\n        before: '<span class=\"start tag\"></span>',\n        text: str\n    },\n    updateExpanded: function (event) {\n        console.log(event)\n    }\n})\n.$inject(\"#test\")\nnew Regular({\n    template: `\n        <regular-clamp on-expanded={this.updateExpanded($event)} isTextTriggerToggle expanded autoresize max-lines=3 ellipsis=\"...\" after={after} before={before}>\n            ${str}\n        </regular-clamp>\n    `,\n    data: {\n        after: `<span class=\"end tag\" r-hide=\"!((localExpanded && realLines >3) || isClamped)\" on-click={this.toggle()}>\n            {#if localExpanded}\n                \n            {#else}\n                \n            {/if}\n        </span>`,\n        before: '<span class=\"start tag\"></span>'\n    },\n    updateExpanded: function (event) {\n        console.log(event)\n    }\n}).$inject(\"#resize\")"],"sourceRoot":""}